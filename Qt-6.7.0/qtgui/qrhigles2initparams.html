<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<!-- qrhigles2.cpp -->
  <meta name="description" content="OpenGL specific initialization parameters.">
  <title>QRhiGles2InitParams Struct | Qt GUI 6.7.0</title>
  <link rel="stylesheet" type="text/css" href="style/offline-simple.css" />
  <script type="text/javascript">
    document.getElementsByTagName("link").item(0).setAttribute("href", "style/offline.css");
    // loading style sheet breaks anchors that were jumped to before
    // so force jumping to anchor again
    setTimeout(function() {
        var anchor = location.hash;
        // need to jump to different anchor first (e.g. none)
        location.hash = "#";
        setTimeout(function() {
            location.hash = anchor;
        }, 0);
    }, 0);
  </script>
</head>
<body>
<div class="header" id="qtdocheader">
    <div class="main">
    <div class="main-rounded">
        <div class="navigationbar">
        <ul>
<li><a href="../qtdoc/index.html" translate="no">Qt 6.7</a></li>
<li><a href="qtgui-index.html" translate="no">Qt GUI</a></li>
<li><a href="qtgui-module.html" translate="no">C++ Classes</a></li>
<li>QRhiGles2InitParams</li>
<li id="buildversion"><a href="qtgui-index.html" translate="no">Qt 6.7.0 Reference Documentation</a></li>
    </ul>
    </div>
</div>
<div class="content">
<div class="line">
<div class="content mainContent">
<div class="sidebar">
<div class="toc">
<h3 id="toc">Contents</h3>
<ul>
<li class="level1"><a href="#public-functions">Public Functions</a></li>
<li class="level1"><a href="#public-variables">Public Variables</a></li>
<li class="level1"><a href="#static-public-members">Static Public Members</a></li>
<li class="level1"><a href="#details">Detailed Description</a></li>
<li class="level2"><a href="#working-with-existing-opengl-contexts">Working with existing OpenGL contexts</a></li>
</ul>
</div>
<div class="sidebar-content" id="sidebar-content"></div></div>
<h1 class="title" translate="no">QRhiGles2InitParams Struct</h1>
<!-- $$$QRhiGles2InitParams-brief -->
<p>OpenGL specific initialization parameters. <a href="#details">More...</a></p>
<!-- @@@QRhiGles2InitParams -->
<div class="table"><table class="alignedsummary" translate="no">
<tr><td class="memItemLeft rightAlign topAlign"> Header:</td><td class="memItemRight bottomAlign">  <span class="preprocessor">#include &lt;QRhiGles2InitParams&gt;</span></td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> CMake:</td><td class="memItemRight bottomAlign"> find_package(Qt6 REQUIRED COMPONENTS Gui) <br/>
target_link_libraries(mytarget PRIVATE Qt6::Gui)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> qmake:</td><td class="memItemRight bottomAlign"> QT += gui</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> Since:</td><td class="memItemRight bottomAlign"> Qt 6.6</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> Inherits:</td><td class="memItemRight bottomAlign"> <a href="qrhiinitparams.html" translate="no">QRhiInitParams</a></td></tr>
</table></div>
<ul>
<li><a href="qrhigles2initparams-members.html">List of all members, including inherited members</a></li>
</ul>
<h2 id="public-functions">Public Functions</h2>
<div class="table"><table class="alignedsummary" translate="no">
<tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="qrhigles2initparams.html#QRhiGles2InitParams" translate="no">QRhiGles2InitParams</a></b>()</td></tr>
</table></div>
<h2 id="public-variables">Public Variables</h2>
<div class="table"><table class="alignedsummary" translate="no">
<tr><td class="memItemLeft rightAlign topAlign"> QSurface *</td><td class="memItemRight bottomAlign"><b><a href="qrhigles2initparams.html#fallbackSurface-var" translate="no">fallbackSurface</a></b></td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QSurfaceFormat </td><td class="memItemRight bottomAlign"><b><a href="qrhigles2initparams.html#format-var" translate="no">format</a></b></td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QOpenGLContext *</td><td class="memItemRight bottomAlign"><b><a href="qrhigles2initparams.html#shareContext-var" translate="no">shareContext</a></b></td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QWindow *</td><td class="memItemRight bottomAlign"><b><a href="qrhigles2initparams.html#window-var" translate="no">window</a></b></td></tr>
</table></div>
<h2 id="static-public-members">Static Public Members</h2>
<div class="table"><table class="alignedsummary" translate="no">
<tr><td class="memItemLeft rightAlign topAlign"> QOffscreenSurface *</td><td class="memItemRight bottomAlign"><b><a href="qrhigles2initparams.html#newFallbackSurface" translate="no">newFallbackSurface</a></b>(const QSurfaceFormat &amp;<i>format</i> = QSurfaceFormat::defaultFormat())</td></tr>
</table></div>
<!-- $$$QRhiGles2InitParams-description -->
<div class="descr">
<h2 id="details">Detailed Description</h2>
<div class="admonition note">
<p><b>Note: </b>This is a RHI API with limited compatibility guarantees, see <a href="qrhi.html" translate="no">QRhi</a> for details.</p>
</div>
<p>An OpenGL-based <a href="qrhi.html" translate="no">QRhi</a> needs an already created <a href="qsurface.html" translate="no">QSurface</a> that can be used in combination with <a href="qopenglcontext.html" translate="no">QOpenGLContext</a>. Most commonly, this is a <a href="qoffscreensurface.html" translate="no">QOffscreenSurface</a> in practice. Additionally, while optional, it is recommended that the <a href="qwindow.html" translate="no">QWindow</a> the first <a href="qrhiswapchain.html" translate="no">QRhiSwapChain</a> will target is passed in as well.</p>
<pre class="cpp plain" translate="no">
 QOffscreenSurface *fallbackSurface = QRhiGles2InitParams::newFallbackSurface();
 QRhiGles2InitParams params;
 params.fallbackSurface = fallbackSurface;
 params.window = window;
 rhi = QRhi::create(QRhi::OpenGLES2, &amp;params);
</pre>
<p>By default <a href="qrhi.html" translate="no">QRhi</a> creates a <a href="qopenglcontext.html" translate="no">QOpenGLContext</a> on its own. This approach works well in most cases, included threaded scenarios, where there is a dedicated <a href="qrhi.html" translate="no">QRhi</a> for each rendering thread. As there will be a <a href="qopenglcontext.html" translate="no">QOpenGLContext</a> for each <a href="qrhi.html" translate="no">QRhi</a>, the OpenGL context requirements (a context can only be current on one thread) are satisfied. The implicitly created context is destroyed automatically together with the <a href="qrhi.html" translate="no">QRhi</a>.</p>
<p>The <a href="qsurfaceformat.html" translate="no">QSurfaceFormat</a> for the context is specified in <code translate="no">format</code>. The constructor sets this to <a href="qsurfaceformat.html#defaultFormat" translate="no">QSurfaceFormat::defaultFormat</a>() so applications that call <a href="qsurfaceformat.html#setDefaultFormat" translate="no">QSurfaceFormat::setDefaultFormat</a>() with the appropriate settings before the constructor runs will not need to change value of <code translate="no">format</code>.</p>
<div class="admonition note">
<p><b>Note: </b>Remember to set the depth and stencil buffer sizes to 24 and 8 when the renderer relies on depth or stencil testing, either in the global default <a href="qsurfaceformat.html" translate="no">QSurfaceFormat</a>, or, alternatively, separately in all the involved <a href="qsurfaceformat.html" translate="no">QSurfaceFormat</a> instances: in <code translate="no">format</code>, the format argument passed to <a href="qrhigles2initparams.html#newFallbackSurface" translate="no">newFallbackSurface</a>(), and on any <a href="qwindow.html" translate="no">QWindow</a> that is used with the <a href="qrhi.html" translate="no">QRhi</a>.</p>
</div>
<p>A <a href="qsurface.html" translate="no">QSurface</a> has to be specified in <code translate="no">fallbackSurface</code>. In order to prevent mistakes in threaded situations, this is never created automatically by the <a href="qrhi.html" translate="no">QRhi</a> because, like <a href="qwindow.html" translate="no">QWindow</a>, instances of <a href="qsurface.html" translate="no">QSurface</a> subclasses can often be created on the gui/main thread only.</p>
<p>As a convenience, applications can use <a href="qrhigles2initparams.html#newFallbackSurface" translate="no">newFallbackSurface</a>() which creates and returns a <a href="qoffscreensurface.html" translate="no">QOffscreenSurface</a> that is compatible with the <a href="qopenglcontext.html" translate="no">QOpenGLContext</a> that is going to be created by the <a href="qrhi.html" translate="no">QRhi</a> afterwards. Note that the ownership of the returned <a href="qoffscreensurface.html" translate="no">QOffscreenSurface</a> is transferred to the caller and the <a href="qrhi.html" translate="no">QRhi</a> will not destroy it.</p>
<div class="admonition note">
<p><b>Note: </b>With the OpenGL backend, <a href="qrhiswapchain.html" translate="no">QRhiSwapChain</a> can only target <a href="qwindow.html" translate="no">QWindow</a> instances that have their surface type set to <a href="qsurface.html#SurfaceType-enum" translate="no">QSurface::OpenGLSurface</a> or <a href="qsurface.html#SurfaceType-enum" translate="no">QSurface::RasterGLSurface</a>.</p>
</div>
<div class="admonition note">
<p><b>Note: </b><code translate="no">window</code> is optional. It is recommended to specify it whenever possible, in order to avoid problems on multi-adapter and multi-screen systems. When <code translate="no">window</code> is not set, the very first <a href="qopenglcontext.html#makeCurrent" translate="no">QOpenGLContext::makeCurrent</a>() happens with <code translate="no">fallbackSurface</code> which may be an invisible window on some platforms (for example, Windows) and that may trigger unexpected problems in some cases.</p>
</div>
<p>In case resource sharing with an existing <a href="qopenglcontext.html" translate="no">QOpenGLContext</a> is desired, <code translate="no">shareContext</code> can be set to an existing <a href="qopenglcontext.html" translate="no">QOpenGLContext</a>. Alternatively, <a href="../qtcore/qt.html#ApplicationAttribute-enum" translate="no">Qt::AA_ShareOpenGLContexts</a> is honored as well, when enabled.</p>
<h4 id="working-with-existing-opengl-contexts">Working with existing OpenGL contexts</h4>
<p>When interoperating with another graphics engine, it may be necessary to get a <a href="qrhi.html" translate="no">QRhi</a> instance that uses the same OpenGL context. This can be achieved by passing a pointer to a <a href="qrhigles2nativehandles.html" translate="no">QRhiGles2NativeHandles</a> to <a href="qrhi.html#create" translate="no">QRhi::create</a>(). The <code translate="no">QRhiGles2NativeHandles::context</code> must be set to a non-null value then.</p>
<p>An alternative approach is to create a <a href="qopenglcontext.html" translate="no">QOpenGLContext</a> that <a href="qopenglcontext.html#setShareContext" translate="no">shares resources</a> with the other engine's context and passing in that context via <a href="qrhigles2nativehandles.html" translate="no">QRhiGles2NativeHandles</a>.</p>
<p>The <a href="qrhi.html" translate="no">QRhi</a> does not take ownership of the <a href="qopenglcontext.html" translate="no">QOpenGLContext</a> passed in via <a href="qrhigles2nativehandles.html" translate="no">QRhiGles2NativeHandles</a>.</p>
</div>
<!-- @@@QRhiGles2InitParams -->
<div class="func">
<h2>Member Function Documentation</h2>
<!-- $$$QRhiGles2InitParams[overload1]$$$QRhiGles2InitParams -->
<h3 class="fn" translate="no" id="QRhiGles2InitParams">QRhiGles2InitParams::<span class="name">QRhiGles2InitParams</span>()</h3>
<p>Constructs a new QRhiGles2InitParams.</p>
<p><a href="qrhigles2initparams.html#format-var" translate="no">format</a> is set to <a href="qsurfaceformat.html#defaultFormat" translate="no">QSurfaceFormat::defaultFormat</a>().</p>
<!-- @@@QRhiGles2InitParams -->
<!-- $$$newFallbackSurface[overload1]$$$newFallbackSurfaceconstQSurfaceFormat& -->
<h3 class="fn" translate="no" id="newFallbackSurface"><code class="details extra" translate="no">[static]</code> <span class="type"><a href="qoffscreensurface.html" translate="no">QOffscreenSurface</a></span> *QRhiGles2InitParams::<span class="name">newFallbackSurface</span>(const <span class="type"><a href="qsurfaceformat.html" translate="no">QSurfaceFormat</a></span> &amp;<i>format</i> = QSurfaceFormat::defaultFormat())</h3>
<p>Returns a new <a href="qoffscreensurface.html" translate="no">QOffscreenSurface</a> that can be used with a <a href="qrhi.html" translate="no">QRhi</a> by passing it via a <a href="qrhigles2initparams.html" translate="no">QRhiGles2InitParams</a>.</p>
<p>When <i translate="no">format</i> is not specified, its default value is the global default format settable via <a href="qsurfaceformat.html#setDefaultFormat" translate="no">QSurfaceFormat::setDefaultFormat</a>().</p>
<p><i translate="no">format</i> is adjusted as appropriate in order to avoid having problems afterwards due to an incompatible context and surface.</p>
<div class="admonition note">
<p><b>Note: </b>This function must only be called on the gui/main thread.</p>
</div>
<div class="admonition note">
<p><b>Note: </b>It is the application's responsibility to destroy the returned <a href="qoffscreensurface.html" translate="no">QOffscreenSurface</a> on the gui/main thread once the associated <a href="qrhi.html" translate="no">QRhi</a> has been destroyed. The <a href="qrhi.html" translate="no">QRhi</a> will not destroy the <a href="qoffscreensurface.html" translate="no">QOffscreenSurface</a>.</p>
</div>
<!-- @@@newFallbackSurface -->
</div>
<div class="vars">
<h2>Member Variable Documentation</h2>
<!-- $$$fallbackSurface -->
<h3 class="fn" translate="no" id="fallbackSurface-var"><span class="type"><a href="qsurface.html" translate="no">QSurface</a></span> *QRhiGles2InitParams::<span class="name">fallbackSurface</span></h3>
<p>A <a href="qsurface.html" translate="no">QSurface</a> compatible with <a href="qrhigles2initparams.html#format-var" translate="no">format</a>. Typically a <a href="qoffscreensurface.html" translate="no">QOffscreenSurface</a>. Providing this is mandatory. Be aware of the threading implications: a <a href="qoffscreensurface.html" translate="no">QOffscreenSurface</a>, like <a href="qwindow.html" translate="no">QWindow</a>, must only ever be created and destroyed on the main (gui) thread, even if the <a href="qrhi.html" translate="no">QRhi</a> is created and operates on another thread.</p>
<!-- @@@fallbackSurface -->
<!-- $$$format -->
<h3 class="fn" translate="no" id="format-var"><span class="type"><a href="qsurfaceformat.html" translate="no">QSurfaceFormat</a></span> QRhiGles2InitParams::<span class="name">format</span></h3>
<p>The <a href="qsurfaceformat.html" translate="no">QSurfaceFormat</a>, initialized to <a href="qsurfaceformat.html#defaultFormat" translate="no">QSurfaceFormat::defaultFormat</a>() by default.</p>
<!-- @@@format -->
<!-- $$$shareContext -->
<h3 class="fn" translate="no" id="shareContext-var"><span class="type"><a href="qopenglcontext.html" translate="no">QOpenGLContext</a></span> *QRhiGles2InitParams::<span class="name">shareContext</span></h3>
<p>Optional, the <a href="qopenglcontext.html" translate="no">QOpenGLContext</a> to share resource with. <a href="qrhi.html" translate="no">QRhi</a> creates its own context, and setting this member to a valid <a href="qopenglcontext.html" translate="no">QOpenGLContext</a> leads to calling <a href="qopenglcontext.html#setShareContext" translate="no">setShareContext</a>() with it.</p>
<!-- @@@shareContext -->
<!-- $$$window -->
<h3 class="fn" translate="no" id="window-var"><span class="type"><a href="qwindow.html" translate="no">QWindow</a></span> *QRhiGles2InitParams::<span class="name">window</span></h3>
<p>Optional, but setting it is recommended when targeting a <a href="qwindow.html" translate="no">QWindow</a> with the <a href="qrhi.html" translate="no">QRhi</a>.</p>
<!-- @@@window -->
</div>
        </div>
       </div>
   </div>
   </div>
</div>
<div class="footer">
   <p>
   <acronym title="Copyright">&copy;</acronym> 2024 <span translate="no">The Qt Company Ltd.</span>
   Documentation contributions included herein are the copyrights of
   their respective owners.<br/>    The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the <span translate="no">Free Software Foundation</span>.<br/>    <span translate="no">Qt</span> and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of <span translate="no">The Qt Company Ltd.</span> in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>
</div>
</body>
</html>
