<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<!-- i18n.qdoc -->
  <meta name="description" content="Writing source code that enables the localization of applications.">
  <title>Writing Source Code for Translation | Qt 6.7</title>
  <link rel="stylesheet" type="text/css" href="style/offline-simple.css" />
  <script type="text/javascript">
    document.getElementsByTagName("link").item(0).setAttribute("href", "style/offline.css");
    // loading style sheet breaks anchors that were jumped to before
    // so force jumping to anchor again
    setTimeout(function() {
        var anchor = location.hash;
        // need to jump to different anchor first (e.g. none)
        location.hash = "#";
        setTimeout(function() {
            location.hash = anchor;
        }, 0);
    }, 0);
  </script>
</head>
<body>
<div class="header" id="qtdocheader">
    <div class="main">
    <div class="main-rounded">
        <div class="navigationbar">
        <ul>
<li><a href="index.html" translate="no">Qt 6.7</a></li>
<li><a href="internationalization.html" translate="no">Internationalization with Qt</a></li>
<li>Writing Source Code for Translation</li>
<li id="buildversion">Qt 6.7.0 Reference Documentation</li>
    </ul>
    </div>
</div>
<div class="content">
<div class="line">
<div class="content mainContent">
  <link rel="prev" href="internationalization.html" />
  <link rel="next" href="localization.html" />
<p class="naviNextPrevious headerNavi">
<a class="prevPage" href="internationalization.html">Internationalization with Qt</a>
<span class="naviSeparator">  &#9702;  </span>
<a class="nextPage" href="localization.html">Localizing Applications</a>
</p>
<div class="sidebar">
<div class="toc">
<h3 id="toc">Contents</h3>
<ul>
<li class="level1"><a href="#mark-strings-for-translation">Mark Strings for Translation</a></li>
<li class="level2"><a href="#qml-use-qstr">QML: Use qsTr()</a></li>
<li class="level2"><a href="#c-use-tr">C++: Use tr()</a></li>
<li class="level1"><a href="#use-parameters-instead-of-concatenating-strings">Use Parameters Instead of Concatenating Strings</a></li>
<li class="level2"><a href="#qml-use-arg">QML: Use .arg()</a></li>
<li class="level2"><a href="#c-use-qstring-arg">C++: Use QString::arg()</a></li>
<li class="level1"><a href="#handle-plural-forms">Handle Plural Forms</a></li>
<li class="level2"><a href="#qml-example">QML Example</a></li>
<li class="level2"><a href="#c-example">C++ Example</a></li>
<li class="level1"><a href="#use-regional-number-settings">Use Regional Number Settings</a></li>
<li class="level2"><a href="#qml-use-l">QML: Use %L</a></li>
<li class="level2"><a href="#c-use-ln">C++: Use %Ln</a></li>
<li class="level1"><a href="#internationalize-date-time-and-currency">Internationalize Date, Time, and Currency</a></li>
<li class="level2"><a href="#qml-use-qtqml-functions">QML: Use QtQml Functions</a></li>
<li class="level2"><a href="#c-use-qlocale-class">C++: Use QLocale Class</a></li>
<li class="level1"><a href="#mark-translatable-data-text-strings">Mark Translatable Data Text Strings</a></li>
<li class="level2"><a href="#qml-use-noop-functions">QML: Use _NoOp Functions</a></li>
<li class="level2"><a href="#c-use-noop-macros">C++: Use _NOOP Macros</a></li>
<li class="level1"><a href="#add-comments-for-translators">Add Comments for Translators</a></li>
<li class="level2"><a href="#qml-use-and">QML: Use //: and //~</a></li>
<li class="level2"><a href="#c-use-comment-characters">C++: Use Comment Characters</a></li>
<li class="level1"><a href="#disambiguate-identical-text">Disambiguate Identical Text</a></li>
<li class="level2"><a href="#qml-add-a-disambiguator-to-qstr">QML: Add a Disambiguator to qsTr()</a></li>
<li class="level2"><a href="#c-add-a-disambiguator-to-tr">C++: Add a Disambiguator to tr()</a></li>
<li class="level1"><a href="#make-keyboard-shortcuts-translatable">Make Keyboard Shortcuts Translatable</a></li>
<li class="level2"><a href="#qml-example">QML Example</a></li>
<li class="level2"><a href="#c-use-the-qkeysequence-class">C++: Use the QKeySequence Class</a></li>
<li class="level1"><a href="#use-locale-to-extend-localization-features">Use Locale to Extend Localization Features</a></li>
<li class="level2"><a href="#qml-set-image-source">QML: Set Image Source</a></li>
<li class="level2"><a href="#c-use-qfileselector">C++: Use QFileSelector</a></li>
<li class="level1"><a href="#enable-translation">Enable Translation</a></li>
<li class="level2"><a href="#qml-use-qqmlapplicationengine">QML: Use QQmlApplicationEngine</a></li>
<li class="level2"><a href="#c-use-qtranslator">C++: Use QTranslator</a></li>
<li class="level1"><a href="#prepare-for-dynamic-language-changes">Prepare for Dynamic Language Changes</a></li>
<li class="level2"><a href="#qt-widgets-override-changeevent">Qt Widgets: Override changeEvent</a></li>
<li class="level2"><a href="#qml-override-event-for-types-derived-from-item">QML: Override event for Types Derived from Item</a></li>
<li class="level2"><a href="#generic-qobject-derived-classes-use-event-filters">Generic QObject-derived Classes: Use Event Filters</a></li>
<li class="level1"><a href="#additional-considerations-for-c-code">Additional Considerations for C++ Code</a></li>
<li class="level2"><a href="#use-qstring-for-all-user-visible-text">Use QString for All User-Visible Text</a></li>
<li class="level2"><a href="#define-a-translation-context">Define a Translation Context</a></li>
<li class="level2"><a href="#translate-non-qt-classes">Translate Non-Qt Classes</a></li>
<li class="level2"><a href="#translate-text-that-is-outside-of-a-qobject-subclass">Translate Text That is Outside of a QObject Subclass</a></li>
</ul>
</div>
<div class="sidebar-content" id="sidebar-content"></div></div>
<h1 class="title">Writing Source Code for Translation</h1>
<!-- $$$i18n-source-translation.html-description -->
<div class="descr" id="details">
<p>Write QML and Qt C++ source code in a way that enables you to localize applications:</p>
<ul>
<li><a href="i18n-source-translation.html#mark-strings-for-translation" translate="no">Mark Strings for Translation</a></li>
<li><a href="i18n-source-translation.html#use-parameters-instead-of-concatenating-strings" translate="no">Use Parameters Instead of Concatenating Strings</a></li>
<li><a href="i18n-source-translation.html#handle-plural-forms" translate="no">Handle Plural Forms</a></li>
<li><a href="i18n-source-translation.html#use-regional-number-settings" translate="no">Use Regional Number Settings</a></li>
<li><a href="i18n-source-translation.html#internationalize-date-time-and-currency" translate="no">Internationalize Date, Time, and Currency</a></li>
<li><a href="i18n-source-translation.html#mark-translatable-data-text-strings" translate="no">Mark Translatable Data Text Strings</a></li>
<li><a href="i18n-source-translation.html#add-comments-for-translators" translate="no">Add Comments for Translators</a></li>
<li><a href="i18n-source-translation.html#disambiguate-identical-text" translate="no">Disambiguate Identical Text</a></li>
<li><a href="i18n-source-translation.html#make-keyboard-shortcuts-translatable" translate="no">Make Keyboard Shortcuts Translatable</a></li>
<li><a href="i18n-source-translation.html#use-locale-to-extend-localization-features" translate="no">Use Locale to Extend Localization Features</a></li>
<li><a href="i18n-source-translation.html#enable-translation" translate="no">Enable Translation</a></li>
<li><a href="i18n-source-translation.html#prepare-for-dynamic-language-changes" translate="no">Prepare for Dynamic Language Changes</a></li>
</ul>
<p>When developing C++ applications, see also <a href="i18n-source-translation.html#additional-considerations-for-c-code" translate="no">Additional Considerations for C++ Code</a>.</p>
<h2 id="mark-strings-for-translation">Mark Strings for Translation</h2>
<p>Most of the text that must be translated in an application consists of either single words or short phrases. These typically appear as window titles, menu items, tooltips, and labels to buttons, check boxes, and radio buttons.</p>
<p>Qt minimizes the performance cost of using translations by translating the phrases for each window as they are created. In most applications, the main window is created just once. Dialogs are often created once and then shown and hidden as required. Once the initial translation has taken place, there is no further runtime overhead for the translated windows. Only those windows that are created, destroyed and subsequently created will have a translation performance cost.</p>
<p>You can create applications that switch language at runtime, but it requires an effort and comes with a runtime performance cost.</p>
<p>Use translation functions to mark user-visible UI text for translation in QML and C++ code. Qt indexes each translatable string by the <i>translation context</i> it is associated with. The same phrase may occur in more than one context without conflict. If a phrase occurs more than once in a particular context, it is translated only once and the translation is applied to every occurrence within the context.</p>
<h3 id="qml-use-qstr">QML: Use qsTr()</h3>
<p>In QML, you can use the following functions to mark user-visible strings for translation in .qml files:</p>
<ul>
<li><a href="../qtqml/qml-qtqml-qt.html#qsTr-method" translate="no">qsTr</a>()</li>
<li><a href="../qtqml/qml-qtqml-qt.html#qsTranslate-method" translate="no">qsTranslate</a>()</li>
<li><a href="../qtqml/qml-qtqml-qt.html#qsTrId-method" translate="no">qsTrId</a>()</li>
</ul>
<p>Usually, you use the <code translate="no">qsTr()</code> function:</p>
<pre class="cpp" translate="no">
 Text {
     id: txt1
     text: qsTr(<span class="string">&quot;Back&quot;</span>)
 }
</pre>
<p>This code makes <i>Back</i> a key entry in the translation source (TS) files. At runtime, the translation system looks up the keyword <i>Back</i> and then gets the corresponding translation value for the current system locale. The result is returned to the <code translate="no">text</code> property and the UI shows the appropriate translation of <i>Back</i> for the current locale. If no translation is found, <code translate="no">qsTr()</code> returns the original string.</p>
<p>The translation context can be set for a given file with:</p>
<pre class="cpp" translate="no">
 pragma Translator: ChosenContext
</pre>
<p>or</p>
<pre class="cpp" translate="no">
 pragma Translator: <span class="string">&quot;Chosen::Context&quot;</span>
</pre>
<p>The context set via <code translate="no">qsTranslate()</code> takes precedent over the context set via <code translate="no">pragma</code> <code translate="no">Translator</code>. In QML, by default, the translation context is the file name.</p>
<h3 id="c-use-tr">C++: Use tr()</h3>
<p>In C++, use the <a href="../qtcore/qobject.html#tr" translate="no">tr</a>() function to mark text as translatable and to display translated text. The translation context is the name of the <a href="../qtcore/qobject.html" translate="no">QObject</a> subclass the string is used in. To define translation context for new <a href="../qtcore/qobject.html" translate="no">QObject</a>-based classes, use the <a href="../qtcore/qobject.html#Q_OBJECT" translate="no">Q_OBJECT</a> macro in each new class definition.</p>
<p>When <code translate="no">tr()</code> is called, it looks up the translatable string using a <a href="../qtcore/qtranslator.html" translate="no">QTranslator</a> object, which you must install on the application object, as described in <a href="i18n-source-translation.html#enable-translation" translate="no">Enable Translation</a>.</p>
<p>For example, assuming the <code translate="no">LoginWidget</code> is a subclass of <a href="../qtwidgets/qwidget.html" translate="no">QWidget</a>:</p>
<pre class="cpp" translate="no">
 LoginWidget<span class="operator">::</span>LoginWidget()
 {
     <span class="type"><a href="../qtwidgets/qlabel.html" translate="no">QLabel</a></span> <span class="operator">*</span>label <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="../qtwidgets/qlabel.html" translate="no">QLabel</a></span>(tr(<span class="string">&quot;Password:&quot;</span>));
     <span class="operator">.</span><span class="operator">.</span><span class="operator">.</span>
 }
</pre>
<p>This accounts for 99% of the user-visible strings you're likely to write. For information about marking string literals translatable, see <a href="i18n-source-translation.html#mark-translatable-data-text-strings" translate="no">Mark Translatable Data Text Strings</a>.</p>
<p>If the quoted text is not in a member function of a <a href="../qtcore/qobject.html" translate="no">QObject</a> subclass, use either the <code translate="no">tr()</code> function of an appropriate class, or the <a href="../qtcore/qcoreapplication.html#translate" translate="no">QCoreApplication::translate</a>() function directly:</p>
<pre class="cpp" translate="no">
 <span class="type">void</span> some_global_function(LoginWidget <span class="operator">*</span>logwid)
 {
     <span class="type"><a href="../qtwidgets/qlabel.html" translate="no">QLabel</a></span> <span class="operator">*</span>label <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="../qtwidgets/qlabel.html" translate="no">QLabel</a></span>(
                 LoginWidget<span class="operator">::</span>tr(<span class="string">&quot;Password:&quot;</span>)<span class="operator">,</span> logwid);
 }

 <span class="type">void</span> same_global_function(LoginWidget <span class="operator">*</span>logwid)
 {
     <span class="type"><a href="../qtwidgets/qlabel.html" translate="no">QLabel</a></span> <span class="operator">*</span>label <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="../qtwidgets/qlabel.html" translate="no">QLabel</a></span>(
                 <span class="type"><a href="../qtcore/qcoreapplication.html" translate="no">QCoreApplication</a></span><span class="operator">::</span>translate(<span class="string">&quot;LoginWidget&quot;</span><span class="operator">,</span> <span class="string">&quot;Password:&quot;</span>)<span class="operator">,</span> logwid);
 }
</pre>
<div class="admonition note">
<p><b>Note: </b>If you disable the <code translate="no">const char *</code> to <a href="../qtcore/qstring.html" translate="no">QString</a> automatic conversion by compiling your application with the macro <code translate="no">QT_NO_CAST_FROM_ASCII</code> defined, you will most likely catch any strings you are missing. See <a href="../qtcore/qstring.html#fromUtf8" translate="no">QString::fromUtf8</a>() and <a href="../qtcore/qstring.html#fromLatin1" translate="no">QString::fromLatin1</a>() for more information.</p>
</div>
<h2 id="use-parameters-instead-of-concatenating-strings">Use Parameters Instead of Concatenating Strings</h2>
<p>Different languages arrange words differently in phrases, clauses, and sentences, so do not create strings by concatenating words and data. Instead, use <code translate="no">%</code> to insert parameters into strings.</p>
<p>For example, in the string <code translate="no">After processing file %1, file %2 is next in line</code>, <code translate="no">%1</code> and <code translate="no">%2</code> are numbered parameters. At runtime, <code translate="no">%1</code> and <code translate="no">%2</code> are replaced with the first and second file names, respectively. The same numbered parameters must appear in the translation, but not necessarily in the same order. A German translation of the string might reverse the phrases. For example, <code translate="no">Datei %2 wird bearbeitet, wenn Datei %1 fertig ist</code>. Both numbered parameters appear in the translation, but in the reverse order.</p>
<h3 id="qml-use-arg">QML: Use .arg()</h3>
<p>The following QML snippet has a string with two number parameters <code translate="no">%1</code> and <code translate="no">%2</code>. These parameters are inserted with the <code translate="no">.arg()</code> functions.</p>
<pre class="cpp" translate="no">
 Text {
     text: qsTr(<span class="string">&quot;File %1 of %2&quot;</span>)<span class="operator">.</span>arg(counter)<span class="operator">.</span>arg(total)
 }
</pre>
<p><code translate="no">%1</code> refers to the first parameter and <code translate="no">%2</code> refers to the second parameter, so this code produces output like: <i>File 2 of 3</i>.</p>
<h3 id="c-use-qstring-arg">C++: Use QString::arg()</h3>
<p>In C++, use the <a href="../qtcore/qstring.html#arg" translate="no">QString::arg</a>() functions to substitute parameters:</p>
<pre class="cpp" translate="no">
 <span class="type">void</span> FileCopier<span class="operator">::</span>showProgress(<span class="type">int</span> done<span class="operator">,</span> <span class="type">int</span> total<span class="operator">,</span>
                               <span class="keyword">const</span> <span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> <span class="operator">&amp;</span>currentFile)
 {
     label<span class="operator">.</span>setText(tr(<span class="string">&quot;%1 of %2 files copied.\nCopying: %3&quot;</span>)
                   <span class="operator">.</span>arg(done)
                   <span class="operator">.</span>arg(total)
                   <span class="operator">.</span>arg(currentFile));
 }
</pre>
<p>This code produces output like: <i>5 of 10 files copied. Copying: somefile.txt</i>.</p>
<h2 id="handle-plural-forms">Handle Plural Forms</h2>
<p>You can pass an additional integer parameter (<i>n</i>) to the translation functions and use a special notation for plural forms (<code translate="no">%n</code>) in each translatable string.</p>
<p>Depending on the value of <i>n</i>, the translation function returns a different translation, with the correct grammatical number for the target language. Also, any occurrence of <code translate="no">%n</code> is replaced with <i>n</i>'s value.</p>
<p>For example, the English and French translations of the string <code translate="no">%n message(s) saved</code> require different plural forms.</p>
<div class="table"><table class="generic">
 <thead><tr class="qt-style"><th ><i>n</i></th><th >No Translation</th><th >French</th><th >English</th></tr></thead>
<tr valign="top" class="odd"><td >0</td><td >&quot;0 message(s) saved&quot;</td><td >&quot;0 message sauvegardé&quot;</td><td >&quot;0 message<b>s</b> saved&quot;</td></tr>
<tr valign="top" class="even"><td >1</td><td >&quot;1 message(s) saved&quot;</td><td >&quot;1 message sauvegardé&quot;</td><td >&quot;1 message saved&quot;</td></tr>
<tr valign="top" class="odd"><td >2</td><td >&quot;2 message(s) saved&quot;</td><td >&quot;2 message<b>s</b> sauvegardé<b>s</b>&quot;</td><td >&quot;2 message<b>s</b> saved&quot;</td></tr>
<tr valign="top" class="even"><td >37</td><td >&quot;37 message(s) saved&quot;</td><td >&quot;37 message<b>s</b> sauvegardé<b>s</b>&quot;</td><td >&quot;37 message<b>s</b> saved&quot;</td></tr>
</table></div>
<p>This idiom also works with target languages that have several plural forms, such as a <i>dual</i> form. In addition, the idiom handles the <i>n</i> <code translate="no">== 0</code> case correctly for languages such as French that require the singular.</p>
<p>For a summary of the rules that <i>Qt Linguist</i> and <code translate="no">lrelease</code> use to translate strings that contain plural forms, see <a href="i18n-plural-rules.html" translate="no">Translation Rules for Plural Forms</a>.</p>
<p>To handle plural forms in the native language, load a TS file for this language, too. Use the <code translate="no">lupdate</code> tool <code translate="no">-pluralonly</code> command line option, to create TS files that contain only entries with plural forms.</p>
<p>Alternatively, you can use the <code translate="no">lconvert</code> tool's <code translate="no">-pluralonly</code> command line option to remove all non-plural forms from an existing TS file.</p>
<h3 id="qml-example">QML Example</h3>
<p>The following QML code snippet replaces <code translate="no">%n</code> with the value of <code translate="no">total</code>:</p>
<pre class="cpp" translate="no">
 Text {
     text: qsTr(<span class="string">&quot;%n message(s) saved&quot;</span>)<span class="operator">.</span>arg(total)
 }
</pre>
<h3 id="c-example">C++ Example</h3>
<p>The following C++ code snippet replaces <code translate="no">%n</code> with the value that the <code translate="no">count()</code> function returns:</p>
<pre class="cpp" translate="no">
 <span class="type">int</span> n <span class="operator">=</span> messages<span class="operator">.</span>count();
 showMessage(tr(<span class="string">&quot;%n message(s) saved&quot;</span><span class="operator">,</span> <span class="string">&quot;&quot;</span><span class="operator">,</span> n));
</pre>
<h2 id="use-regional-number-settings">Use Regional Number Settings</h2>
<p>If you include the <code translate="no">%L</code> modifier when you specify a parameter, the number is localized according to the current regional settings. The conversion uses the default locale if you set it or the system-wide locale, otherwise.</p>
<h3 id="qml-use-l">QML: Use %L</h3>
<p>For example, in the following QML snippet, <code translate="no">%L1</code> formats the first parameter according to the number formatting conventions of the currently selected locale (geographical region):</p>
<pre class="cpp" translate="no">
 Text {
     text: qsTr(<span class="string">&quot;%L1&quot;</span>)<span class="operator">.</span>arg(total)
 }
</pre>
<p>If <code translate="no">total</code> is the number <i>4321.56</i>, with English regional settings (locale) the output is <i>4,321.56</i>, whereas with German regional settings it is <i>4.321,56</i>.</p>
<h3 id="c-use-ln">C++: Use %Ln</h3>
<p>In C++, you can use <code translate="no">%Ln</code> to produce a localized representation of <code translate="no">n</code>. Use <a href="../qtcore/qlocale.html#setDefault" translate="no">QLocale::setDefault</a>() to set the default locale.</p>
<h2 id="internationalize-date-time-and-currency">Internationalize Date, Time, and Currency</h2>
<p>Present date, time, and currency using the locally preferred formats.</p>
<h3 id="qml-use-qtqml-functions">QML: Use QtQml Functions</h3>
<p>QML does not have special in-string modifiers for formatting dates and times. Instead, you need to query the current locale (geographical region) and use the methods of <a href="../qtqml/qml-qtqml-date.html" translate="no">Date</a> to format the string.</p>
<p><code translate="no">Qt.locale()</code> returns a <a href="../qtqml/qml-qtqml-locale.html" translate="no">Locale</a> object which contains information about the locale. In particular, the <a href="../qtqml/qml-qtqml-locale.html#name-prop" translate="no">Locale.name</a> property contains the language and country of the current locale. You can use the value as is or parse it to determine the appropriate content for the current locale.</p>
<p>The following snippet gets the current date and time with <code translate="no">Date()</code>, then converts that to a string for the current locale. Then it inserts the date string into the <code translate="no">%1</code> parameter for the appropriate translation.</p>
<pre class="cpp" translate="no">
 Text {
     text: qsTr(<span class="string">&quot;Date %1&quot;</span>)<span class="operator">.</span>arg(Date()<span class="operator">.</span>toLocaleString(<span class="type"><a href="../qtcore/qt.html" translate="no">Qt</a></span><span class="operator">.</span>locale()))
 }
</pre>
<p>To localize currency numbers, use the <a href="../qtqml/qml-qtqml-number.html" translate="no">Number</a> type. It has similar functions as the <code translate="no">Date</code> type for converting numbers into localized currency strings.</p>
<h3 id="c-use-qlocale-class">C++: Use QLocale Class</h3>
<p>In C++, use <a href="../qtcore/qlocale.html#timeFormat" translate="no">QLocale::timeFormat</a>() or <a href="../qtcore/qlocale.html#toString" translate="no">QLocale::toString</a>(<a href="../qtcore/qtime.html" translate="no">QTime</a>) or <code translate="no">toString(QDate)</code>:</p>
<pre class="cpp" translate="no">
 <span class="type"><a href="../qtwidgets/qlabel.html" translate="no">QLabel</a></span> <span class="operator">*</span>label <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="../qtwidgets/qlabel.html" translate="no">QLabel</a></span>(<span class="keyword">this</span>);
 label<span class="operator">-</span><span class="operator">&gt;</span>setText(tr(<span class="string">&quot;Date %1&quot;</span>)<span class="operator">.</span>arg(<span class="type"><a href="../qtcore/qlocale.html" translate="no">QLocale</a></span>()<span class="operator">.</span>toString(<span class="type"><a href="../qtcore/qdate.html" translate="no">QDate</a></span><span class="operator">::</span>currentDate()));
</pre>
<h2 id="mark-translatable-data-text-strings">Mark Translatable Data Text Strings</h2>
<p>Use <code translate="no">_NoOp</code> functions (in QML) and <code translate="no">_NOOP</code> macros (in C++) to mark translatable string literals for extraction by the <code translate="no">lupdate</code> tool.</p>
<h3 id="qml-use-noop-functions">QML: Use _NoOp Functions</h3>
<p>In QML, use the following functions to mark translatable string literals:</p>
<ul>
<li><a href="../qtqml/qml-qtqml-qt.html#qsTrNoOp-method" translate="no">qsTrNoOp</a>()</li>
<li><a href="../qtqml/qml-qtqml-qt.html#qsTranslateNoOp-method" translate="no">qsTranslateNoOp</a>()</li>
<li><a href="../qtqml/qml-qtqml-qt.html#qsTrIdNoOp-method" translate="no">qsTrIdNoOp</a>()</li>
</ul>
<p>If the user changes the system language without a reboot, depending on the system, the strings in arrays and list models and other data structures might not be refreshed automatically. To force the texts to be refreshed when they are displayed in the UI, you need to declare the strings with the <code translate="no">qsTrNoOp()</code> function. Then, when you populate the objects for display, you need to explicitly retrieve the translation for each text.</p>
<p>For example:</p>
<pre class="cpp" translate="no">
 ListModel {
     id: myListModel

     ListElement {
         <span class="comment">//: Capital city of Finland</span>
         name: qsTrNoOp(<span class="string">&quot;Helsinki&quot;</span>)
     }
 }

 <span class="operator">.</span><span class="operator">.</span><span class="operator">.</span>

 Text {
     text: qsTr(myListModel<span class="operator">.</span>get(<span class="number">0</span>)<span class="operator">.</span>name)
     <span class="comment">// Get the translation of the name property in element 0</span>
 }
</pre>
<h3 id="c-use-noop-macros">C++: Use _NOOP Macros</h3>
<p>For translatable text completely outside a function, use the <a href="../qtcore/qttranslation-qtcore-proxy.html#QT_TR_NOOP" translate="no">QT_TR_NOOP</a>() and <a href="../qtcore/qttranslation-qtcore-proxy.html#QT_TRANSLATE_NOOP" translate="no">QT_TRANSLATE_NOOP</a>() macros that expand to just the text without the context.</p>
<p>An example of <code translate="no">QT_TR_NOOP()</code>:</p>
<pre class="cpp" translate="no">
 <span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> FriendlyConversation<span class="operator">::</span>greeting(<span class="type">int</span> type)
 {
     <span class="keyword">static</span> <span class="keyword">const</span> <span class="type">char</span> <span class="operator">*</span>greeting_strings<span class="operator">[</span><span class="operator">]</span> <span class="operator">=</span> {
         QT_TR_NOOP(<span class="string">&quot;Hello&quot;</span>)<span class="operator">,</span>
         QT_TR_NOOP(<span class="string">&quot;Goodbye&quot;</span>)
     };
     <span class="keyword">return</span> tr(greeting_strings<span class="operator">[</span>type<span class="operator">]</span>);
 }
</pre>
<p>An example of <code translate="no">QT_TRANSLATE_NOOP()</code>:</p>
<pre class="cpp" translate="no">
 <span class="keyword">static</span> <span class="keyword">const</span> <span class="type">char</span> <span class="operator">*</span>greeting_strings<span class="operator">[</span><span class="operator">]</span> <span class="operator">=</span> {
     QT_TRANSLATE_NOOP(<span class="string">&quot;FriendlyConversation&quot;</span><span class="operator">,</span> <span class="string">&quot;Hello&quot;</span>)<span class="operator">,</span>
     QT_TRANSLATE_NOOP(<span class="string">&quot;FriendlyConversation&quot;</span><span class="operator">,</span> <span class="string">&quot;Goodbye&quot;</span>)
 };

 <span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> FriendlyConversation<span class="operator">::</span>greeting(<span class="type">int</span> type)
 {
     <span class="keyword">return</span> tr(greeting_strings<span class="operator">[</span>type<span class="operator">]</span>);
 }

 <span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> global_greeting(<span class="type">int</span> type)
 {
     <span class="keyword">return</span> <span class="type"><a href="../qtcore/qcoreapplication.html" translate="no">QCoreApplication</a></span><span class="operator">::</span>translate(<span class="string">&quot;FriendlyConversation&quot;</span><span class="operator">,</span>
                                        greeting_strings<span class="operator">[</span>type<span class="operator">]</span>);
 }
</pre>
<h2 id="add-comments-for-translators">Add Comments for Translators</h2>
<p>You can add comments in the source code before a string you mark as translatable to clarify its purpose. The comments are included in the TS files that you deliver to the translator.</p>
<div class="admonition note">
<p><b>Note: </b>The TS files are XML files with the source texts and a place for the translated text. The updated TS files are converted into binary translation files and included as part of the final application.</p>
</div>
<h3 id="qml-use-and">QML: Use //: and //~</h3>
<p>In the following code snippet, the text on the <code translate="no">//:</code> line is the main comment for the translator.</p>
<p>The text on the <code translate="no">//~</code> line is optional extra information. The first word of the text is used as an additional identifier in the XML element in the TS file so make sure the first word is not part of the sentence. For example, the comment <i>Context Not related to back-stepping</i> is converted to <code translate="no">&lt;extra-Context&gt;Not related to back-stepping</code> in the TS file.</p>
<pre class="cpp" translate="no">
 Text {
     id: txt1;
     <span class="comment">// This UI string is only used here</span>
     <span class="comment">//: The back of the object, not the front</span>
     <span class="comment">//~ Context Not related to back-stepping</span>
     text: qsTr(<span class="string">&quot;Back&quot;</span>);
 }
</pre>
<h3 id="c-use-comment-characters">C++: Use Comment Characters</h3>
<p>To add comments in C++, annotate the <code translate="no">tr()</code> calls in your code with comments of the form <code translate="no">//:</code> or by marking the beginning and end of the comment.</p>
<p>In the following examples, the comments are associated with the strings passed to <code translate="no">tr()</code> in the context of each call:</p>
<pre class="cpp" translate="no">
 <span class="comment">//: This name refers to a host name.</span>
 hostNameLabel<span class="operator">-</span><span class="operator">&gt;</span>setText(tr(<span class="string">&quot;Name:&quot;</span>));

 <span class="comment">/*: This text refers to a C++ code example. */</span>
 <span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> example <span class="operator">=</span> tr(<span class="string">&quot;Example&quot;</span>);
</pre>
<p>To add optional comments, use:</p>
<pre class="cpp" translate="no">
 <span class="comment">//~ &lt;field name&gt; &lt;field contents&gt;</span>
</pre>
<p>The field name should consist of a domain prefix (possibly the conventional file extension of the file format the field is inspired by), a hyphen, and the actual field name in underscore-delimited notation. For storage in TS files, the field name together with the prefix <code translate="no">extra-</code> will form an XML element name. The field contents will be XML-escaped, but otherwise appear verbatim as the element's contents. You can add any number of unique fields to each message.</p>
<p>Example:</p>
<pre class="cpp" translate="no">
 <span class="comment">//: This is a comment for the translator.</span>
 <span class="comment">//= qtn_foo_bar</span>
 <span class="comment">//~ loc-layout_id foo_dialog</span>
 <span class="comment">//~ loc-blank False</span>
 <span class="comment">//~ magic-stuff This might mean something magic.</span>
 <span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> text <span class="operator">=</span> MyMagicClass<span class="operator">::</span>tr(<span class="string">&quot;Sim sala bim.&quot;</span>);
</pre>
<p>In C++, you use an equals sign to add a unique identifier:</p>
<pre class="cpp" translate="no">
 <span class="comment">//= &lt;id&gt;</span>
</pre>
<p>You can use the keyword <i>TRANSLATOR</i> for translator comments. Metadata appearing right in front of the TRANSLATOR keyword applies to the whole TS file.</p>
<h2 id="disambiguate-identical-text">Disambiguate Identical Text</h2>
<p>The translation system consolidates the UI text strings into unique items to avoid having to translate the same text multiple times. However, a text might look identical to another text but have a different meaning. For example, in English, <i>back</i> means both a step backward and the part of an object opposite to the front. You need to tell the translation system about these two separate meanings, so the translator can create two separate translations.</p>
<h3 id="qml-add-a-disambiguator-to-qstr">QML: Add a Disambiguator to qsTr()</h3>
<p>In QML, add a disambiguating string as the second parameter of the <code translate="no">qsTr()</code> function.</p>
<p>In the following code snippet, the ID <code translate="no">not front</code> differentiates this <i>Back</i> text from the backstepping <i>Back</i> text:</p>
<pre class="cpp" translate="no">
 Text {
     id: txt1
     <span class="comment">// This UI string is used only here</span>
     <span class="comment">//: The back of the object, not the front</span>
     <span class="comment">//~ Context Not related to back-stepping</span>
     text: qsTr(<span class="string">&quot;Back&quot;</span><span class="operator">,</span> <span class="string">&quot;not front&quot;</span>)
 }
</pre>
<h3 id="c-add-a-disambiguator-to-tr">C++: Add a Disambiguator to tr()</h3>
<p>In C++, pass a disambiguating string in the call to <a href="../qtcore/qobject.html#tr" translate="no">tr</a>().</p>
<p>In the following code snippet, the ID <code translate="no">recipient</code> differentiates the name of the recipient from that of the sender:</p>
<pre class="cpp" translate="no">
 MyWindow<span class="operator">::</span>MyWindow()
 {
     <span class="type"><a href="../qtwidgets/qlabel.html" translate="no">QLabel</a></span> <span class="operator">*</span>senderLabel <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="../qtwidgets/qlabel.html" translate="no">QLabel</a></span>(tr(<span class="string">&quot;Name:&quot;</span>));
     <span class="type"><a href="../qtwidgets/qlabel.html" translate="no">QLabel</a></span> <span class="operator">*</span>recipientLabel <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="../qtwidgets/qlabel.html" translate="no">QLabel</a></span>(tr(<span class="string">&quot;Name:&quot;</span><span class="operator">,</span> <span class="string">&quot;recipient&quot;</span>));
     ...
</pre>
<h2 id="make-keyboard-shortcuts-translatable">Make Keyboard Shortcuts Translatable</h2>
<p>In its most common form, a keyboard shortcut describes a combination of keys that you press to perform some action. For <a href="../qtgui/qkeysequence.html#standard-shortcuts" translate="no">standard shortcuts</a>, use a standard key to request the platform-specific key sequence associated with each shortcut.</p>
<p>For custom shortcuts, use human-readable strings, such as <b>Ctrl+Q</b> or <b>Alt+F</b>. You can translate them into the appropriate shortcuts for the speakers of different languages.</p>
<p>If you hard-code keyboard shortcuts in your application, translators cannot override them.</p>
<p>When you use keyboard shortcuts in menu item and button text, a <i>mnemonic</i> character (marked by underlining) indicates that pressing <b>Alt</b> or <b>Ctrl</b> with the underlined character performs the same action as clicking the menu item or pressing the button.</p>
<p>For example, applications often use <i>F</i> as the mnemonic character in the <b translate="no">File</b> menu, so you can either click the menu item or press <b>Alt+F</b> to open the menu. To define the mnemonic character in the translatable string (&quot;File&quot;), prefix it with an ampersand: <code translate="no">&quot;&amp;File&quot;</code>. The translation for the string should also have an ampersand in it, preferably in front of the same character.</p>
<h3 id="qml-example">QML Example</h3>
<p>In QML:</p>
<pre class="cpp plain" translate="no">
 Menu {
     id: fileMenu
     title: qsTr(&quot;&amp;File&quot;)

     MenuItem {
         objectName: &quot;quitMenuItem&quot;
         text: qsTr(&quot;E&amp;xit&quot;)
         onTriggered: Qt.quit()
     }
 }
</pre>
<h3 id="c-use-the-qkeysequence-class">C++: Use the QKeySequence Class</h3>
<p>In C++, use <a href="../qtgui/qaction.html" translate="no">QAction</a> and <a href="../qtgui/qkeysequence.html" translate="no">QKeySequence</a> objects to specify the keyboard shortcuts that trigger actions:</p>
<pre class="cpp" translate="no">
 exitAct <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="../qtgui/qaction.html" translate="no">QAction</a></span>(tr(<span class="string">&quot;E&amp;xit&quot;</span>)<span class="operator">,</span> <span class="keyword">this</span>);
 exitAct<span class="operator">-</span><span class="operator">&gt;</span>setShortcuts(<span class="type"><a href="../qtgui/qkeysequence.html" translate="no">QKeySequence</a></span><span class="operator">::</span>Quit);
</pre>
<p>The translations of keyboard shortcuts are associated with the <a href="../qtgui/qshortcut.html" translate="no">QShortcut</a> context.</p>
<h2 id="use-locale-to-extend-localization-features">Use Locale to Extend Localization Features</h2>
<p>You might find different graphics or audio more suitable for different geographical regions.</p>
<p>Generally, try to avoid localizing images. Create icons that are globally appropriate, rather than relying on local puns or stretched metaphors. However, you might have to reverse images of left and right pointing arrows for Arabic and Hebrew locales.</p>
<p>Locale is one of the default file selectors, so you can use file selection to display different images that you deliver as resources depending on the system locale.</p>
<p>The QML and C++ code examples in the following sections assume that you deliver the following files in the application resources and use language and country codes as the subfolder names:</p>
<pre class="cpp plain" translate="no">
 images
 ├── language-icon.png
 ├── +en_GB
 │   └── language-icon.png
 └── +fi_FI
     └── language-icon.png
</pre>
<h3 id="qml-set-image-source">QML: Set Image Source</h3>
<p>The following QML code snippet shows how to select an icon source image according to the current locale:</p>
<pre class="cpp" translate="no">
 icon<span class="operator">.</span>source: <span class="string">&quot;qrc:/images/language-icon.png&quot;</span>
</pre>
<h3 id="c-use-qfileselector">C++: Use QFileSelector</h3>
<p>The following C++ code snippet uses <a href="../qtcore/qfileselector.html" translate="no">QFileSelector</a> to pick a language icon from the <code translate="no">images</code> folder according to the system locale:</p>
<pre class="cpp" translate="no">
 <span class="keyword">const</span> <span class="type"><a href="../qtcore/qfileselector.html" translate="no">QFileSelector</a></span> selector;
 <span class="keyword">const</span> <span class="type"><a href="../qtgui/qicon.html" translate="no">QIcon</a></span> languageIcon(selector<span class="operator">.</span>select(<span class="string">&quot;:/images/language-icon.png&quot;</span>));
</pre>
<h2 id="enable-translation">Enable Translation</h2>
<p>TS file names must contain ISO language and country codes:</p>
<ul>
<li><i>language</i> is an <a href="https://www.iso.org/iso-639-language-codes.html" translate="no">ISO-639</a> language code in lowercase.</li>
<li><i>country</i> is an <a href="https://www.iso.org/iso-3166-country-codes.html" translate="no">ISO-3166</a> two-letter country code in uppercase.</li>
</ul>
<p>For example, <code translate="no">qml_de.ts</code> sets the target language to German, and <code translate="no">qml_de_CH.ts</code> sets the target language to German and the target country to Switzerland. The <code translate="no">lrelease</code> tool generates QM files called <code translate="no">qml_de.qm</code> and <code translate="no">qml_de_CH.qm</code> that the application loads depending on the system locale.</p>
<h3 id="qml-use-qqmlapplicationengine">QML: Use QQmlApplicationEngine</h3>
<p>In QML, use <a href="../qtqml/qqmlapplicationengine.html" translate="no">QQmlApplicationEngine</a> to automatically load translation files from a subdirectory called <code translate="no">i18n</code> in the directory that contains the main QML file. The translation file names must have the prefix <code translate="no">qml_</code>. For example, <code translate="no">qml_en_US.qm</code>.</p>
<p>Applications reload translations when the <a href="../qtqml/qjsengine.html#uiLanguage-prop" translate="no">QJSEngine::uiLanguage</a> or <a href="../qtqml/qml-qtqml-qt.html#uiLanguage-prop" translate="no">Qt.uiLanguage</a> property value changes.</p>
<h3 id="c-use-qtranslator">C++: Use QTranslator</h3>
<p>In C++, the TS file names must contain the application name. For example, <code translate="no">app_de_DE.ts</code>.</p>
<p>Typically, your Qt C++ application's <code translate="no">main()</code> function will look like this:</p>
<pre class="cpp" translate="no">
 <span class="type">int</span> main(<span class="type">int</span> argc<span class="operator">,</span> <span class="type">char</span> <span class="operator">*</span>argv<span class="operator">[</span><span class="operator">]</span>)
 {
     <span class="type"><a href="../qtwidgets/qapplication.html" translate="no">QApplication</a></span> app(argc<span class="operator">,</span> argv);

     <span class="type"><a href="../qtcore/qtranslator.html" translate="no">QTranslator</a></span> myappTranslator;
     <span class="keyword">if</span> (myappTranslator<span class="operator">.</span>load(<span class="type"><a href="../qtcore/qlocale.html" translate="no">QLocale</a></span><span class="operator">::</span>system()<span class="operator">,</span> u<span class="string">&quot;myapp&quot;</span>_s<span class="operator">,</span> u<span class="string">&quot;_&quot;</span>_s<span class="operator">,</span> u<span class="string">&quot;:/i18n&quot;</span>_s))
         app<span class="operator">.</span>installTranslator(<span class="operator">&amp;</span>myappTranslator);

     <span class="keyword">return</span> app<span class="operator">.</span>exec();
 }
</pre>
<p>For a translation-aware application, you create a <a href="../qtcore/qtranslator.html" translate="no">QTranslator</a> object, <a href="../qtcore/qtranslator.html#load" translate="no">load</a> a translation according to the user's UI display locale at runtime, and install the translator object into the application.</p>
<h2 id="prepare-for-dynamic-language-changes">Prepare for Dynamic Language Changes</h2>
<p>Both Qt Widgets and Qt Quick use <a href="../qtcore/eventsandfilters.html" translate="no">Qt's event system</a> to inform classes about translation changes.</p>
<p><a href="../qtcore/qevent.html#Type-enum" translate="no">LanguageChange</a> events are posted when you use the <a href="../qtcore/qcoreapplication.html#installTranslator" translate="no">QCoreApplication::installTranslator</a>() function to install a new translation. Other application components can also force widgets or QML types derived from the <a href="../qtquick/qml-qtquick-item.html" translate="no">Item</a> type to update themselves by posting <code translate="no">LanguageChange</code> events to them.</p>
<p>By default, <code translate="no">LanguageChange</code> events are propagated to all top-level windows, and from there they're propagated through the entire tree of widgets or QML types derived from Item.</p>
<h3 id="qt-widgets-override-changeevent">Qt Widgets: Override changeEvent</h3>
<p>The default event handler for <a href="../qtwidgets/qwidget.html" translate="no">QWidget</a> subclasses responds to the <a href="../qtcore/qevent.html#Type-enum" translate="no">QEvent::LanguageChange</a> event and calls the <code translate="no">changeEvent()</code> function when necessary.</p>
<p>To make Qt widgets aware of changes to the installed <a href="../qtcore/qtranslator.html" translate="no">QTranslator</a> objects, reimplement the widget's <a href="../qtwidgets/qwidget.html#changeEvent" translate="no">changeEvent</a>() function to check whether the event is a <a href="../qtcore/qevent.html#Type-enum" translate="no">LanguageChange</a> event and update the text displayed by widgets using the <a href="../qtcore/qobject.html#tr" translate="no">tr</a>() function. For example:</p>
<pre class="cpp" translate="no">
 <span class="type">void</span> MyWidget<span class="operator">::</span>changeEvent(<span class="type"><a href="../qtcore/qevent.html" translate="no">QEvent</a></span> <span class="operator">*</span>event)
 {
     <span class="keyword">if</span> (event<span class="operator">-</span><span class="operator">&gt;</span>type() <span class="operator">=</span><span class="operator">=</span> <span class="type"><a href="../qtcore/qevent.html" translate="no">QEvent</a></span><span class="operator">::</span>LanguageChange) {
         titleLabel<span class="operator">-</span><span class="operator">&gt;</span>setText(tr(<span class="string">&quot;Document Title&quot;</span>));
         <span class="operator">.</span><span class="operator">.</span><span class="operator">.</span>
         okPushButton<span class="operator">-</span><span class="operator">&gt;</span>setText(tr(<span class="string">&quot;&amp;OK&quot;</span>));
     } <span class="keyword">else</span>
         <span class="type"><a href="../qtwidgets/qwidget.html" translate="no">QWidget</a></span><span class="operator">::</span>changeEvent(event);
 }
</pre>
<p>When using <i>Qt Designer</i> UI files (.ui) and <code translate="no">uic</code>, you can read the new translation files and call <code translate="no">ui.retranslateUi(this)</code> directly:</p>
<pre class="cpp" translate="no">
 <span class="type">void</span> MyWidget<span class="operator">::</span>changeEvent(<span class="type"><a href="../qtcore/qevent.html" translate="no">QEvent</a></span> <span class="operator">*</span>event)
 {
     <span class="keyword">if</span> (event<span class="operator">-</span><span class="operator">&gt;</span>type() <span class="operator">=</span><span class="operator">=</span> <span class="type"><a href="../qtcore/qevent.html" translate="no">QEvent</a></span><span class="operator">::</span>LanguageChange) {
         ui<span class="operator">.</span>retranslateUi(<span class="keyword">this</span>);
     } <span class="keyword">else</span>
         <span class="type"><a href="../qtwidgets/qwidget.html" translate="no">QWidget</a></span><span class="operator">::</span>changeEvent(event);
 }
</pre>
<p>To pass on other change events, call the default implementation of the function.</p>
<p>The list of installed translators might change in response to a <a href="../qtcore/qevent.html#Type-enum" translate="no">LocaleChange</a> event, or the application might provide a UI that allows the user to change the current application language.</p>
<h3 id="qml-override-event-for-types-derived-from-item">QML: Override event for Types Derived from Item</h3>
<p>For plain QML applications without any custom C++ registered types, <a href="i18n-source-translation.html#qml-use-qqmlapplicationengine" translate="no">using QQmlApplicationEngine</a> is enough to trigger an update of all translation bindings.</p>
<p>However, if you registered a type derived from <a href="../qtquick/qquickitem.html" translate="no">QQuickItem</a>, and one of its properties exposes translated text (or is otherwise language dependent), override its <a href="../qtcore/qobject.html#event" translate="no">event method</a> and emit the property's change signal in it (or call <a href="../qtcore/qobjectbindableproperty.html#notify" translate="no">notify</a> in case of bindable properties). For example:</p>
<pre class="cpp" translate="no">
 <span class="keyword">class</span> MyItem : <span class="keyword">public</span> <span class="type"><a href="../qtquick/qquickitem.html" translate="no">QQuickItem</a></span>
 {
     Q_OJBECT
     QML_ELEMENT

     Q_PROPERTY(<span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> greeting READ greeting NOTIFY greetingChanged)

 <span class="keyword">public</span> <span class="keyword">signals</span>:
     <span class="type">void</span> greetingChanged();
 <span class="keyword">public</span>:
     <span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> greeting() <span class="keyword">const</span>
     {
         <span class="keyword">return</span> tr(<span class="string">&quot;Hello World!&quot;</span>);
     }

     <span class="type">bool</span> event(<span class="type"><a href="../qtcore/qevent.html" translate="no">QEvent</a></span> <span class="operator">*</span>ev) override
     {
         <span class="keyword">if</span> (ev<span class="operator">-</span><span class="operator">&gt;</span>type() <span class="operator">=</span><span class="operator">=</span> <span class="type"><a href="../qtcore/qevent.html" translate="no">QEvent</a></span><span class="operator">::</span>LanguageChange)
             <span class="keyword">emit</span> greetingChanged();
         <span class="keyword">return</span> <span class="type"><a href="../qtquick/qquickitem.html" translate="no">QQuickItem</a></span><span class="operator">::</span>event(ev);
     }
 };
</pre>
<p>This ensures that any binding in QML in which the property is used is reevaluated and takes the language change into account.</p>
<h3 id="generic-qobject-derived-classes-use-event-filters">Generic QObject-derived Classes: Use Event Filters</h3>
<p>Some classes are neither derived from <a href="../qtwidgets/qwidget.html" translate="no">QWidget</a> nor from <a href="../qtquick/qquickitem.html" translate="no">QQuickItem</a>, but might still need to handle language change events. In that case, install <a href="../qtcore/eventsandfilters.html#event-filters" translate="no">an event filter</a> on <a href="../qtcore/qcoreapplication.html" translate="no">QCoreApplication</a>.</p>
<pre class="cpp" translate="no">
 <span class="keyword">class</span> CustomObject : <span class="keyword">public</span> <span class="type"><a href="../qtcore/qobject.html" translate="no">QObject</a></span>
 {
     Q_OBJECT

 <span class="keyword">public</span>:
     <span class="type"><a href="../qtcore/qlist.html" translate="no">QList</a></span><span class="operator">&lt;</span><span class="type"><a href="../qtquick/qquickitem.html" translate="no">QQuickItem</a></span> <span class="operator">*</span><span class="operator">&gt;</span> managedItems;

     CustomObject(<span class="type">QOject</span> <span class="operator">*</span>parent <span class="operator">=</span> nullptr) : <span class="type"><a href="../qtcore/qobject.html" translate="no">QObject</a></span>(parent)
     {
         <span class="type"><a href="../qtcore/qcoreapplication.html" translate="no">QCoreApplication</a></span><span class="operator">::</span>instance()<span class="operator">-</span><span class="operator">&gt;</span>installEventFilter(<span class="keyword">this</span>);
     }

     <span class="type">bool</span> eventFilter(<span class="type"><a href="../qtcore/qobject.html" translate="no">QObject</a></span> <span class="operator">*</span>obj<span class="operator">,</span> <span class="type"><a href="../qtcore/qevent.html" translate="no">QEvent</a></span> <span class="operator">*</span>ev) override
     {
         <span class="keyword">if</span> (obj <span class="operator">=</span><span class="operator">=</span> <span class="type"><a href="../qtcore/qcoreapplication.html" translate="no">QCoreApplication</a></span><span class="operator">::</span>instance() <span class="operator">&amp;</span><span class="operator">&amp;</span> ev<span class="operator">-</span><span class="operator">&gt;</span>type() <span class="operator">=</span><span class="operator">=</span> <span class="type"><a href="../qtcore/qevent.html" translate="no">QEvent</a></span><span class="operator">::</span>LanguageChange) {
             <span class="keyword">for</span> (<span class="keyword">auto</span> item : std<span class="operator">::</span>as_const(managedItems))
                 <span class="type"><a href="../qtcore/qcoreapplication.html" translate="no">QCoreApplication</a></span><span class="operator">::</span>sendEvent(item<span class="operator">,</span> ev);
             <span class="comment">// do any further work on reaction, e.g. emit changed signals</span>
         }
         <span class="keyword">return</span> <span class="keyword">false</span>;
     }
 };
</pre>
<p>This might be necessary when translated strings are provided by the class that later get displayed in a user interface (for example, a custom <a href="../qtcore/qabstractitemmodel.html" translate="no">item model</a>), or when the class acts as a container of Widgets or Quick Items, and is therefore responsible for forwarding the event to them.</p>
<h2 id="additional-considerations-for-c-code">Additional Considerations for C++ Code</h2>
<p>The following sections contain more information about using the Qt C++ classes and functions in translatable applications:</p>
<ul>
<li><a href="i18n-source-translation.html#use-qstring-for-all-user-visible-text" translate="no">Use QString for All User-Visible Text</a></li>
<li><a href="i18n-source-translation.html#define-a-translation-context" translate="no">Define a Translation Context</a></li>
<li><a href="i18n-source-translation.html#translate-non-qt-classes" translate="no">Translate Non-Qt Classes</a></li>
<li><a href="i18n-source-translation.html#translate-text-that-is-outside-of-a-qobject-subclass" translate="no">Translate Text That is Outside of a QObject Subclass</a></li>
</ul>
<h3 id="use-qstring-for-all-user-visible-text">Use QString for All User-Visible Text</h3>
<p><a href="../qtcore/qstring.html" translate="no">QString</a> uses the <a href="unicode.html" translate="no">Unicode</a> encoding internally, and therefore you can use familiar text processing operations to transparently process all languages in the world. Also, since all Qt functions that present text to the user take a <a href="../qtcore/qstring.html" translate="no">QString</a> object as a parameter, there is no <code translate="no">char *</code> to <a href="../qtcore/qstring.html" translate="no">QString</a> conversion overhead.</p>
<h3 id="define-a-translation-context">Define a Translation Context</h3>
<p>The translation context for <a href="../qtcore/qobject.html" translate="no">QObject</a> and each <a href="../qtcore/qobject.html" translate="no">QObject</a> subclass is the class name itself. If you subclass <a href="../qtcore/qobject.html" translate="no">QObject</a>, use the <a href="../qtcore/qobject.html#Q_OBJECT" translate="no">Q_OBJECT</a> macro in the class definition to override the translation context. The macro sets the context to the name of the subclass.</p>
<p>For example, the following class definition includes the <a href="../qtcore/qobject.html#Q_OBJECT" translate="no">Q_OBJECT</a> macro, implementing a new <code translate="no">tr()</code> function that uses the <code translate="no">MainWindow</code> context:</p>
<pre class="cpp" translate="no">
 <span class="keyword">class</span> MainWindow : <span class="keyword">public</span> <span class="type"><a href="../qtwidgets/qmainwindow.html" translate="no">QMainWindow</a></span>
 {
     Q_OBJECT

 <span class="keyword">public</span>:
     MainWindow();
     ...
</pre>
<p>If you do not use <a href="../qtcore/qobject.html#Q_OBJECT" translate="no">Q_OBJECT</a> in a class definition, the context is inherited from the base class. For example, since all <a href="../qtcore/qobject.html" translate="no">QObject</a>-based classes in Qt provide a context, a new <a href="../qtwidgets/qwidget.html" translate="no">QWidget</a> subclass defined without a <a href="../qtcore/qobject.html#Q_OBJECT" translate="no">Q_OBJECT</a> macro uses the <code translate="no">QWidget</code> context if you invoke its <code translate="no">tr()</code> function.</p>
<h3 id="translate-non-qt-classes">Translate Non-Qt Classes</h3>
<p>You must provide extra information for <code translate="no">lupdate</code> about strings in classes that do not inherit <a href="../qtcore/qobject.html" translate="no">QObject</a> or use the <a href="../qtcore/qobject.html#Q_OBJECT" translate="no">Q_OBJECT</a> macro. To add translation support to a non-Qt class, you can use the <a href="../qtcore/qcoreapplication.html#Q_DECLARE_TR_FUNCTIONS" translate="no">Q_DECLARE_TR_FUNCTIONS</a>() macro. For example:</p>
<pre class="cpp" translate="no">
 <span class="keyword">class</span> MyClass
 {
     Q_DECLARE_TR_FUNCTIONS(MyClass)

 <span class="keyword">public</span>:
     MyClass();
     ...
 };
</pre>
<p>This provides the class with <a href="../qtcore/qobject.html#tr" translate="no">tr</a>() functions that you can use to translate strings associated with the class, and enables <code translate="no">lupdate</code> to find translatable strings in the source code.</p>
<p>Alternatively, you can call the <a href="../qtcore/qcoreapplication.html#translate" translate="no">QCoreApplication::translate</a>() function with a specific context that <code translate="no">lupdate</code> and Qt Linguist recognize.</p>
<h3 id="translate-text-that-is-outside-of-a-qobject-subclass">Translate Text That is Outside of a QObject Subclass</h3>
<p>If the quoted text is not in a member function of a <a href="../qtcore/qobject.html" translate="no">QObject</a> subclass, use either the <code translate="no">tr()</code> function of an appropriate class or the <a href="../qtcore/qcoreapplication.html#translate" translate="no">QCoreApplication::translate</a>() function directly:</p>
<pre class="cpp" translate="no">
 <span class="type">void</span> some_global_function(LoginWidget <span class="operator">*</span>logwid)
 {
     <span class="type"><a href="../qtwidgets/qlabel.html" translate="no">QLabel</a></span> <span class="operator">*</span>label <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="../qtwidgets/qlabel.html" translate="no">QLabel</a></span>(
             LoginWidget<span class="operator">::</span>tr(<span class="string">&quot;Password:&quot;</span>)<span class="operator">,</span> logwid);
 }

 <span class="type">void</span> same_global_function(LoginWidget <span class="operator">*</span>logwid)
 {
     <span class="type"><a href="../qtwidgets/qlabel.html" translate="no">QLabel</a></span> <span class="operator">*</span>label <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="../qtwidgets/qlabel.html" translate="no">QLabel</a></span>(
             <span class="type"><a href="../qtcore/qcoreapplication.html" translate="no">QCoreApplication</a></span><span class="operator">::</span>translate(<span class="string">&quot;LoginWidget&quot;</span><span class="operator">,</span> <span class="string">&quot;Password:&quot;</span>)<span class="operator">,</span>
             logwid);
 }
</pre>
</div>
<!-- @@@i18n-source-translation.html -->
<p class="naviNextPrevious footerNavi">
<a class="prevPage" href="internationalization.html">Internationalization with Qt</a>
<span class="naviSeparator">  &#9702;  </span>
<a class="nextPage" href="localization.html">Localizing Applications</a>
</p>
        </div>
       </div>
   </div>
   </div>
</div>
<div class="footer">
   <p>
   <acronym title="Copyright">&copy;</acronym> 2024 <span translate="no">The Qt Company Ltd.</span>
   Documentation contributions included herein are the copyrights of
   their respective owners.<br/>    The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the <span translate="no">Free Software Foundation</span>.<br/>    <span translate="no">Qt</span> and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of <span translate="no">The Qt Company Ltd.</span> in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>
</div>
</body>
</html>
