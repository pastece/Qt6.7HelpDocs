<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<!-- screencapture.qdoc -->
  <meta name="description" content="Capturing a screen or window.">
  <title>Screen Capture Example | Qt Multimedia 6.7.0</title>
  <link rel="stylesheet" type="text/css" href="style/offline-simple.css" />
  <script type="text/javascript">
    document.getElementsByTagName("link").item(0).setAttribute("href", "style/offline.css");
    // loading style sheet breaks anchors that were jumped to before
    // so force jumping to anchor again
    setTimeout(function() {
        var anchor = location.hash;
        // need to jump to different anchor first (e.g. none)
        location.hash = "#";
        setTimeout(function() {
            location.hash = anchor;
        }, 0);
    }, 0);
  </script>
</head>
<body>
<div class="header" id="qtdocheader">
    <div class="main">
    <div class="main-rounded">
        <div class="navigationbar">
        <ul>
<li><a href="../qtdoc/index.html" translate="no">Qt 6.7</a></li>
<li><a href="qtmultimedia-index.html" translate="no">Qt Multimedia</a></li>
<li><a href="multimedia-examples.html" translate="no">Qt Multimedia Examples</a></li>
<li>Screen Capture Example</li>
<li id="buildversion"><a href="qtmultimedia-index.html" translate="no">Qt 6.7.0 Reference Documentation</a></li>
    </ul>
    </div>
</div>
<div class="content">
<div class="line">
<div class="content mainContent">
<div class="sidebar">
<div class="toc">
<h3 id="toc">Contents</h3>
<ul>
<li class="level1"><a href="#running-the-example">Running the Example</a></li>
<li class="level1"><a href="#application-structure">Application Structure</a></li>
</ul>
</div>
<div class="sidebar-content" id="sidebar-content"></div></div>
<h1 class="title">Screen Capture Example</h1>
<!-- $$$screencapture-brief -->
<p>Capturing a screen or window.</p>
<!-- @@@screencapture -->
<!-- $$$screencapture-description -->
<div class="descr" id="details">
<p><i>Screen Capture</i> demonstrates how to capture a screen or window using <a href="qscreencapture.html" translate="no">QScreenCapture</a> and <a href="qwindowcapture.html" translate="no">QWindowCapture</a>. The example shows a list of screens and windows and displays a live preview of the selected item using a <a href="qmediacapturesession.html" translate="no">QMediaCaptureSession</a> and a <a href="qvideowidget.html" translate="no">QVideoWidget</a>. Capturing can be started and stopped with a <a href="../qtwidgets/qpushbutton.html" translate="no">button</a>.</p>
<p class="centerAlign"><img src="images/screencapture.jpg" alt="" /></p><h4 id="running-the-example">Running the Example</h4>
<p>To run the example from <a href="https://doc.qt.io/qtcreator/index.html" translate="no">Qt Creator</a>, open the <b translate="no">Welcome</b> mode and select the example from <b translate="no">Examples</b>. For more information, visit <a href="https://doc.qt.io/qtcreator/creator-build-example-application.html" translate="no">Building and Running an Example</a>.</p>
<h4 id="application-structure">Application Structure</h4>
<p>The example consists of three custom classes. The UI and all screen capture functionality is implemented in the class ScreenCapturePreview. The classes ScreenListModel and WindowListModel only serve as models behind the two <a href="../qtwidgets/qlistview.html" translate="no">QListView</a> widgets. The main function creates a ScreenCapturePreview object, which in turn creates instances of <a href="qscreencapture.html" translate="no">QScreenCapture</a> and <a href="qwindowcapture.html" translate="no">QWindowCapture</a>, and a <a href="qmediacapturesession.html" translate="no">QMediaCaptureSession</a> and <a href="qvideowidget.html" translate="no">QVideoWidget</a>, in addition to all the UI widgets.</p>
<p>The screen and window models are populated with the return values of <a href="../qtgui/qguiapplication.html#screens" translate="no">QGuiApplication::screens</a>() and <a href="qwindowcapture.html#capturableWindows" translate="no">QWindowCapture::capturableWindows</a>(), respectively.</p>
<p>When a list item is selected, it is connected to the <a href="qscreencapture.html" translate="no">QScreenCapture</a> object with <a href="qscreencapture.html#screen-prop" translate="no">setScreen</a>(), or to the <a href="qwindowcapture.html" translate="no">QWindowCapture</a> object with <a href="qwindowcapture.html#window-prop" translate="no">setWindow</a>(). The capture object is connected to the <a href="qmediacapturesession.html" translate="no">QMediaCaptureSession</a> object with <a href="qmediacapturesession.html#screenCapture-prop" translate="no">setScreenCapture</a>() and <a href="qmediacapturesession.html#windowCapture-prop" translate="no">setWindowCapture</a>(), respectively. The capture session in turn is connected to the <a href="qvideowidget.html" translate="no">QVideoWidget</a> object with <a href="qmediacapturesession.html#setVideoOutput" translate="no">setVideoOutput</a>(). Thus, the capture output is previewed in the video widget on the right hand side of the UI.</p>
<p>The start/stop button calls <a href="qscreencapture.html#start" translate="no">QScreenCapture::start</a>() and <a href="qscreencapture.html#stop" translate="no">QScreenCapture::stop</a>(), or <a href="qwindowcapture.html#start" translate="no">QWindowCapture::start</a>() and <a href="qwindowcapture.html#stop" translate="no">QWindowCapture::stop</a>().</p>
<p>A <a href="../qtwidgets/qmessagebox.html" translate="no">QMessageBox</a> pops up if the <a href="qscreencapture.html#errorOccurred" translate="no">errorOccurred</a> signal is emitted.</p>
<p><a href="https://code.qt.io/cgit/qt/qtmultimedia.git/tree/examples/multimedia/screencapture?h=6.7" translate="no">Example project @ code.qt.io</a></p>
</div>
<!-- @@@screencapture -->
        </div>
       </div>
   </div>
   </div>
</div>
<div class="footer">
   <p>
   <acronym title="Copyright">&copy;</acronym> 2024 <span translate="no">The Qt Company Ltd.</span>
   Documentation contributions included herein are the copyrights of
   their respective owners.<br/>    The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the <span translate="no">Free Software Foundation</span>.<br/>    <span translate="no">Qt</span> and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of <span translate="no">The Qt Company Ltd.</span> in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>
</div>
</body>
</html>
