<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<!-- calendarwidget.qdoc -->
  <meta name="description" content="The Calendar Widget example shows use of QCalendarWidget.">
  <title>Calendar Widget Example | Qt Widgets 6.7.0</title>
  <link rel="stylesheet" type="text/css" href="style/offline-simple.css" />
  <script type="text/javascript">
    document.getElementsByTagName("link").item(0).setAttribute("href", "style/offline.css");
    // loading style sheet breaks anchors that were jumped to before
    // so force jumping to anchor again
    setTimeout(function() {
        var anchor = location.hash;
        // need to jump to different anchor first (e.g. none)
        location.hash = "#";
        setTimeout(function() {
            location.hash = anchor;
        }, 0);
    }, 0);
  </script>
</head>
<body>
<div class="header" id="qtdocheader">
    <div class="main">
    <div class="main-rounded">
        <div class="navigationbar">
        <ul>
<li><a href="../qtdoc/index.html" translate="no">Qt 6.7</a></li>
<li><a href="qtwidgets-index.html" translate="no">Qt Widgets</a></li>
<li><a href="examples-widgets.html" translate="no">Qt Widgets Examples</a></li>
<li>Calendar Widget Example</li>
<li id="buildversion"><a href="qtwidgets-index.html" translate="no">Qt 6.7.0 Reference Documentation</a></li>
    </ul>
    </div>
</div>
<div class="content">
<div class="line">
<div class="content mainContent">
<div class="sidebar">
<div class="toc">
<h3 id="toc">Contents</h3>
<ul>
<li class="level1"><a href="#window-class-definition">Window Class Definition</a></li>
<li class="level1"><a href="#window-class-implementation">Window Class Implementation</a></li>
</ul>
</div>
<div class="sidebar-content" id="sidebar-content"></div></div>
<h1 class="title">Calendar Widget Example</h1>
<!-- $$$widgets/calendarwidget-brief -->
<p>The Calendar Widget example shows use of <a href="qcalendarwidget.html" translate="no">QCalendarWidget</a>.</p>
<!-- @@@widgets/calendarwidget -->
<!-- $$$widgets/calendarwidget-description -->
<div class="descr" id="details">
<div class="border"><p class="centerAlign"><img src="images/calendarwidgetexample.png" alt="" /></p></div><p><a href="qcalendarwidget.html" translate="no">QCalendarWidget</a> displays one calendar month at a time and lets the user select a date. The calendar consists of four components: a navigation bar that lets the user change the month that is displayed, a grid where each cell represents one day in the month, and two headers that display weekday names and week numbers.</p>
<p>The Calendar Widget example displays a <a href="qcalendarwidget.html" translate="no">QCalendarWidget</a> and lets the user configure its appearance and behavior using <a href="qcombobox.html" translate="no">QComboBox</a>es, <a href="qcheckbox.html" translate="no">QCheckBox</a>es, and <a href="qdateedit.html" translate="no">QDateEdit</a>s. In addition, the user can influence the formatting of individual dates and headers.</p>
<p>The properties of the <a href="qcalendarwidget.html" translate="no">QCalendarWidget</a> are summarized in the table below.</p>
<div class="table"><table class="generic">
 <thead><tr class="qt-style"><th >Property</th><th >Description</th></tr></thead>
<tr valign="top" class="odd"><td ><a href="qcalendarwidget.html#selectedDate-prop" translate="no">selectedDate</a></td><td >The currently selected date.</td></tr>
<tr valign="top" class="even"><td ><a href="qcalendarwidget.html#minimumDate-prop" translate="no">minimumDate</a></td><td >The earliest date that can be selected.</td></tr>
<tr valign="top" class="odd"><td ><a href="qcalendarwidget.html#maximumDate-prop" translate="no">maximumDate</a></td><td >The latest date that can be selected.</td></tr>
<tr valign="top" class="even"><td ><a href="qcalendarwidget.html#firstDayOfWeek-prop" translate="no">firstDayOfWeek</a></td><td >The day that is displayed as the first day of the week (usually Sunday or Monday).</td></tr>
<tr valign="top" class="odd"><td ><a href="qcalendarwidget.html#gridVisible-prop" translate="no">gridVisible</a></td><td >Whether the grid should be shown.</td></tr>
<tr valign="top" class="even"><td ><a href="qcalendarwidget.html#selectionMode-prop" translate="no">selectionMode</a></td><td >Whether the user can select a date or not.</td></tr>
<tr valign="top" class="odd"><td ><a href="qcalendarwidget.html#horizontalHeaderFormat-prop" translate="no">horizontalHeaderFormat</a></td><td >The format of the day names in the horizontal header (e.g., &quot;M&quot;, &quot;Mon&quot;, or &quot;Monday&quot;).</td></tr>
<tr valign="top" class="even"><td ><a href="qcalendarwidget.html#verticalHeaderFormat-prop" translate="no">verticalHeaderFormat</a></td><td >The format of the vertical header.</td></tr>
<tr valign="top" class="odd"><td ><a href="qcalendarwidget.html#navigationBarVisible-prop" translate="no">navigationBarVisible</a></td><td >Whether the navigation bar at the top of the calendar widget is shown.</td></tr>
</table></div>
<p>The example consists of one class, <code translate="no">Window</code>, which creates and lays out the <a href="qcalendarwidget.html" translate="no">QCalendarWidget</a> and the other widgets that let the user configure the <a href="qcalendarwidget.html" translate="no">QCalendarWidget</a>.</p>
<h4 id="window-class-definition">Window Class Definition</h4>
<p>Here is the definition of the <code translate="no">Window</code> class:</p>
<pre class="cpp" translate="no">
 <span class="keyword">class</span> Window : <span class="keyword">public</span> <span class="type"><a href="qwidget.html" translate="no">QWidget</a></span>
 {
     Q_OBJECT

 <span class="keyword">public</span>:
     Window(<span class="type"><a href="qwidget.html" translate="no">QWidget</a></span> <span class="operator">*</span>parent <span class="operator">=</span> nullptr);

 <span class="keyword">private</span> <span class="keyword">slots</span>:
     <span class="type">void</span> localeChanged(<span class="type">int</span> index);
     <span class="type">void</span> firstDayChanged(<span class="type">int</span> index);
     <span class="type">void</span> selectionModeChanged(<span class="type">int</span> index);
     <span class="type">void</span> horizontalHeaderChanged(<span class="type">int</span> index);
     <span class="type">void</span> verticalHeaderChanged(<span class="type">int</span> index);
     <span class="type">void</span> selectedDateChanged();
     <span class="type">void</span> minimumDateChanged(<span class="type"><a href="../qtcore/qdate.html" translate="no">QDate</a></span> date);
     <span class="type">void</span> maximumDateChanged(<span class="type"><a href="../qtcore/qdate.html" translate="no">QDate</a></span> date);
     <span class="type">void</span> weekdayFormatChanged();
     <span class="type">void</span> weekendFormatChanged();
     <span class="type">void</span> reformatHeaders();
     <span class="type">void</span> reformatCalendarPage();

 <span class="keyword">private</span>:
     <span class="type">void</span> createPreviewGroupBox();
     <span class="type">void</span> createGeneralOptionsGroupBox();
     <span class="type">void</span> createDatesGroupBox();
     <span class="type">void</span> createTextFormatsGroupBox();
     <span class="type"><a href="qcombobox.html" translate="no">QComboBox</a></span> <span class="operator">*</span>createColorComboBox();

     <span class="type"><a href="qgroupbox.html" translate="no">QGroupBox</a></span> <span class="operator">*</span>previewGroupBox;
     <span class="type"><a href="qgridlayout.html" translate="no">QGridLayout</a></span> <span class="operator">*</span>previewLayout;
     <span class="type"><a href="qcalendarwidget.html" translate="no">QCalendarWidget</a></span> <span class="operator">*</span>calendar;

     <span class="type"><a href="qgroupbox.html" translate="no">QGroupBox</a></span> <span class="operator">*</span>generalOptionsGroupBox;
     <span class="type"><a href="qlabel.html" translate="no">QLabel</a></span> <span class="operator">*</span>localeLabel;
     <span class="type"><a href="qlabel.html" translate="no">QLabel</a></span> <span class="operator">*</span>firstDayLabel;
     ...
     <span class="type"><a href="qcheckbox.html" translate="no">QCheckBox</a></span> <span class="operator">*</span>mayFirstCheckBox;
 };
</pre>
<p>As is often the case with classes that represent self-contained windows, most of the API is private. We will review the private members as we stumble upon them in the implementation.</p>
<h4 id="window-class-implementation">Window Class Implementation</h4>
<p>Let's now review the class implementation, starting with the constructor:</p>
<pre class="cpp" translate="no">
 Window<span class="operator">::</span>Window(<span class="type"><a href="qwidget.html" translate="no">QWidget</a></span> <span class="operator">*</span>parent)
     : <span class="type"><a href="qwidget.html" translate="no">QWidget</a></span>(parent)
 {
     createPreviewGroupBox();
     createGeneralOptionsGroupBox();
     createDatesGroupBox();
     createTextFormatsGroupBox();

     <span class="type"><a href="qgridlayout.html" translate="no">QGridLayout</a></span> <span class="operator">*</span>layout <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qgridlayout.html" translate="no">QGridLayout</a></span>;
     layout<span class="operator">-</span><span class="operator">&gt;</span>addWidget(previewGroupBox<span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">0</span>);
     layout<span class="operator">-</span><span class="operator">&gt;</span>addWidget(generalOptionsGroupBox<span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">1</span>);
     layout<span class="operator">-</span><span class="operator">&gt;</span>addWidget(datesGroupBox<span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="number">0</span>);
     layout<span class="operator">-</span><span class="operator">&gt;</span>addWidget(textFormatsGroupBox<span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="number">1</span>);
     layout<span class="operator">-</span><span class="operator">&gt;</span>setSizeConstraint(<span class="type"><a href="qlayout.html" translate="no">QLayout</a></span><span class="operator">::</span>SetFixedSize);
     setLayout(layout);

     previewLayout<span class="operator">-</span><span class="operator">&gt;</span>setRowMinimumHeight(<span class="number">0</span><span class="operator">,</span> calendar<span class="operator">-</span><span class="operator">&gt;</span>sizeHint()<span class="operator">.</span>height());
     previewLayout<span class="operator">-</span><span class="operator">&gt;</span>setColumnMinimumWidth(<span class="number">0</span><span class="operator">,</span> calendar<span class="operator">-</span><span class="operator">&gt;</span>sizeHint()<span class="operator">.</span>width());

     setWindowTitle(tr(<span class="string">&quot;Calendar Widget&quot;</span>));
 }
</pre>
<p>We start by creating the four <a href="qgroupbox.html" translate="no">QGroupBox</a>es and their child widgets (including the <a href="qcalendarwidget.html" translate="no">QCalendarWidget</a>) using four private <code translate="no">create...GroupBox()</code> functions, described below. Then we arrange the group boxes in a <a href="qgridlayout.html" translate="no">QGridLayout</a>.</p>
<p>We set the grid layout's resize policy to <a href="qlayout.html#SizeConstraint-enum" translate="no">QLayout::SetFixedSize</a> to prevent the user from resizing the window. In that mode, the window's size is set automatically by <a href="qgridlayout.html" translate="no">QGridLayout</a> based on the size hints of its contents widgets.</p>
<p>To ensure that the window isn't automatically resized every time we change a property of the <a href="qcalendarwidget.html" translate="no">QCalendarWidget</a> (for example, hiding the navigation bar, the vertical header, or the grid), we set the minimum height of row 0 and the minimum width of column 0 to the initial size of the <a href="qcalendarwidget.html" translate="no">QCalendarWidget</a>.</p>
<p>Let's move on to the <code translate="no">createPreviewGroupBox()</code> function:</p>
<pre class="cpp" translate="no">
 <span class="type">void</span> Window<span class="operator">::</span>createPreviewGroupBox()
 {
     previewGroupBox <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qgroupbox.html" translate="no">QGroupBox</a></span>(tr(<span class="string">&quot;Preview&quot;</span>));

     calendar <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qcalendarwidget.html" translate="no">QCalendarWidget</a></span>;
     calendar<span class="operator">-</span><span class="operator">&gt;</span>setMinimumDate(<span class="type"><a href="../qtcore/qdate.html" translate="no">QDate</a></span>(<span class="number">1900</span><span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="number">1</span>));
     calendar<span class="operator">-</span><span class="operator">&gt;</span>setMaximumDate(<span class="type"><a href="../qtcore/qdate.html" translate="no">QDate</a></span>(<span class="number">3000</span><span class="operator">,</span> <span class="number">1</span><span class="operator">,</span> <span class="number">1</span>));
     calendar<span class="operator">-</span><span class="operator">&gt;</span>setGridVisible(<span class="keyword">true</span>);

     connect(calendar<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qcalendarwidget.html" translate="no">QCalendarWidget</a></span><span class="operator">::</span>currentPageChanged<span class="operator">,</span>
             <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>Window<span class="operator">::</span>reformatCalendarPage);

     previewLayout <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qgridlayout.html" translate="no">QGridLayout</a></span>;
     previewLayout<span class="operator">-</span><span class="operator">&gt;</span>addWidget(calendar<span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="number">0</span><span class="operator">,</span> <span class="type"><a href="../qtcore/qt.html" translate="no">Qt</a></span><span class="operator">::</span>AlignCenter);
     previewGroupBox<span class="operator">-</span><span class="operator">&gt;</span>setLayout(previewLayout);
 }
</pre>
<p>The <b translate="no">Preview</b> group box contains only one widget: the <a href="qcalendarwidget.html" translate="no">QCalendarWidget</a>. We set it up, connect its <a href="qcalendarwidget.html#currentPageChanged" translate="no">currentPageChanged</a>() signal to our <code translate="no">reformatCalendarPage()</code> slot to make sure that every new page gets the formatting specified by the user.</p>
<p>The <code translate="no">createGeneralOptionsGroupBox()</code> function is somewhat large and several widgets are set up in the same way. We will look at parts of its implementation here and skip the rest:</p>
<pre class="cpp" translate="no">
 <span class="type">void</span> Window<span class="operator">::</span>createGeneralOptionsGroupBox()
 {
     generalOptionsGroupBox <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qgroupbox.html" translate="no">QGroupBox</a></span>(tr(<span class="string">&quot;General Options&quot;</span>));

     localeCombo <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qcombobox.html" translate="no">QComboBox</a></span>;
     <span class="type">int</span> curLocaleIndex <span class="operator">=</span> <span class="operator">-</span><span class="number">1</span>;
     <span class="type">int</span> index <span class="operator">=</span> <span class="number">0</span>;
     <span class="keyword">for</span> (<span class="type">int</span> _lang <span class="operator">=</span> <span class="type"><a href="../qtcore/qlocale.html" translate="no">QLocale</a></span><span class="operator">::</span>C; _lang <span class="operator">&lt;</span><span class="operator">=</span> <span class="type"><a href="../qtcore/qlocale.html" translate="no">QLocale</a></span><span class="operator">::</span>LastLanguage; <span class="operator">+</span><span class="operator">+</span>_lang) {
         <span class="type"><a href="../qtcore/qlocale.html" translate="no">QLocale</a></span><span class="operator">::</span>Language lang <span class="operator">=</span> <span class="keyword">static_cast</span><span class="operator">&lt;</span><span class="type"><a href="../qtcore/qlocale.html" translate="no">QLocale</a></span><span class="operator">::</span>Language<span class="operator">&gt;</span>(_lang);
         <span class="keyword">const</span> <span class="keyword">auto</span> locales <span class="operator">=</span>
             <span class="type"><a href="../qtcore/qlocale.html" translate="no">QLocale</a></span><span class="operator">::</span>matchingLocales(lang<span class="operator">,</span> <span class="type"><a href="../qtcore/qlocale.html" translate="no">QLocale</a></span><span class="operator">::</span>AnyScript<span class="operator">,</span> <span class="type"><a href="../qtcore/qlocale.html" translate="no">QLocale</a></span><span class="operator">::</span>AnyTerritory);
         <span class="keyword">for</span> (<span class="keyword">auto</span> loc : locales) {
             <span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> label <span class="operator">=</span> <span class="type"><a href="../qtcore/qlocale.html" translate="no">QLocale</a></span><span class="operator">::</span>languageToString(lang);
             <span class="keyword">auto</span> territory <span class="operator">=</span> loc<span class="operator">.</span>territory();
             label <span class="operator">+</span><span class="operator">=</span> QLatin1Char(<span class="char">'/'</span>);
             label <span class="operator">+</span><span class="operator">=</span> <span class="type"><a href="../qtcore/qlocale.html" translate="no">QLocale</a></span><span class="operator">::</span>territoryToString(territory);
             <span class="keyword">if</span> (locale()<span class="operator">.</span>language() <span class="operator">=</span><span class="operator">=</span> lang <span class="operator">&amp;</span><span class="operator">&amp;</span> locale()<span class="operator">.</span>territory() <span class="operator">=</span><span class="operator">=</span> territory)
                 curLocaleIndex <span class="operator">=</span> index;
             localeCombo<span class="operator">-</span><span class="operator">&gt;</span>addItem(label<span class="operator">,</span> loc);
             <span class="operator">+</span><span class="operator">+</span>index;
         }
     }
     <span class="keyword">if</span> (curLocaleIndex <span class="operator">!</span><span class="operator">=</span> <span class="operator">-</span><span class="number">1</span>)
         localeCombo<span class="operator">-</span><span class="operator">&gt;</span>setCurrentIndex(curLocaleIndex);
     localeLabel <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qlabel.html" translate="no">QLabel</a></span>(tr(<span class="string">&quot;&amp;Locale&quot;</span>));
     localeLabel<span class="operator">-</span><span class="operator">&gt;</span>setBuddy(localeCombo);

     firstDayCombo <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qcombobox.html" translate="no">QComboBox</a></span>;
     firstDayCombo<span class="operator">-</span><span class="operator">&gt;</span>addItem(tr(<span class="string">&quot;Sunday&quot;</span>)<span class="operator">,</span> <span class="type"><a href="../qtcore/qt.html" translate="no">Qt</a></span><span class="operator">::</span>Sunday);
     firstDayCombo<span class="operator">-</span><span class="operator">&gt;</span>addItem(tr(<span class="string">&quot;Monday&quot;</span>)<span class="operator">,</span> <span class="type"><a href="../qtcore/qt.html" translate="no">Qt</a></span><span class="operator">::</span>Monday);
     firstDayCombo<span class="operator">-</span><span class="operator">&gt;</span>addItem(tr(<span class="string">&quot;Tuesday&quot;</span>)<span class="operator">,</span> <span class="type"><a href="../qtcore/qt.html" translate="no">Qt</a></span><span class="operator">::</span>Tuesday);
     firstDayCombo<span class="operator">-</span><span class="operator">&gt;</span>addItem(tr(<span class="string">&quot;Wednesday&quot;</span>)<span class="operator">,</span> <span class="type"><a href="../qtcore/qt.html" translate="no">Qt</a></span><span class="operator">::</span>Wednesday);
     firstDayCombo<span class="operator">-</span><span class="operator">&gt;</span>addItem(tr(<span class="string">&quot;Thursday&quot;</span>)<span class="operator">,</span> <span class="type"><a href="../qtcore/qt.html" translate="no">Qt</a></span><span class="operator">::</span>Thursday);
     firstDayCombo<span class="operator">-</span><span class="operator">&gt;</span>addItem(tr(<span class="string">&quot;Friday&quot;</span>)<span class="operator">,</span> <span class="type"><a href="../qtcore/qt.html" translate="no">Qt</a></span><span class="operator">::</span>Friday);
     firstDayCombo<span class="operator">-</span><span class="operator">&gt;</span>addItem(tr(<span class="string">&quot;Saturday&quot;</span>)<span class="operator">,</span> <span class="type"><a href="../qtcore/qt.html" translate="no">Qt</a></span><span class="operator">::</span>Saturday);

     firstDayLabel <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qlabel.html" translate="no">QLabel</a></span>(tr(<span class="string">&quot;Wee&amp;k starts on:&quot;</span>));
     firstDayLabel<span class="operator">-</span><span class="operator">&gt;</span>setBuddy(firstDayCombo);
     ...
</pre>
<p>We start with the setup of the <b translate="no">Week starts on</b> combobox. This combobox controls which day should be displayed as the first day of the week.</p>
<p>The <a href="qcombobox.html" translate="no">QComboBox</a> class lets us attach user data as a <a href="../qtcore/qvariant.html" translate="no">QVariant</a> to each item. The data can later be retrieved with <a href="qcombobox.html" translate="no">QComboBox</a>'s <a href="qcombobox.html#itemData" translate="no">itemData</a>() function. <a href="../qtcore/qvariant.html" translate="no">QVariant</a> doesn't directly support the <a href="../qtcore/qt.html#DayOfWeek-enum" translate="no">Qt::DayOfWeek</a> data type, but it supports <code translate="no">int</code>, and C++ will happily convert any enum value to <code translate="no">int</code>.</p>
<pre class="cpp" translate="no">
     ...
     connect(localeCombo<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qcombobox.html" translate="no">QComboBox</a></span><span class="operator">::</span>currentIndexChanged<span class="operator">,</span>
             <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>Window<span class="operator">::</span>localeChanged);
     connect(firstDayCombo<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qcombobox.html" translate="no">QComboBox</a></span><span class="operator">::</span>currentIndexChanged<span class="operator">,</span>
             <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>Window<span class="operator">::</span>firstDayChanged);
     connect(selectionModeCombo<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qcombobox.html" translate="no">QComboBox</a></span><span class="operator">::</span>currentIndexChanged<span class="operator">,</span>
             <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>Window<span class="operator">::</span>selectionModeChanged);
     connect(gridCheckBox<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qcheckbox.html" translate="no">QCheckBox</a></span><span class="operator">::</span>toggled<span class="operator">,</span>
             calendar<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qcalendarwidget.html" translate="no">QCalendarWidget</a></span><span class="operator">::</span>setGridVisible);
     connect(navigationCheckBox<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qcheckbox.html" translate="no">QCheckBox</a></span><span class="operator">::</span>toggled<span class="operator">,</span>
             calendar<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qcalendarwidget.html" translate="no">QCalendarWidget</a></span><span class="operator">::</span>setNavigationBarVisible);
     connect(horizontalHeaderCombo<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qcombobox.html" translate="no">QComboBox</a></span><span class="operator">::</span>currentIndexChanged<span class="operator">,</span>
             <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>Window<span class="operator">::</span>horizontalHeaderChanged);
     connect(verticalHeaderCombo<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qcombobox.html" translate="no">QComboBox</a></span><span class="operator">::</span>currentIndexChanged<span class="operator">,</span>
             <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>Window<span class="operator">::</span>verticalHeaderChanged);
     ...
</pre>
<p>After having created the widgets, we connect the signals and slots. We connect the comboboxes to private slots of <code translate="no">Window</code> or to public slots provided by <a href="qcombobox.html" translate="no">QComboBox</a>.</p>
<pre class="cpp" translate="no">
     ...
     firstDayChanged(firstDayCombo<span class="operator">-</span><span class="operator">&gt;</span>currentIndex());
     selectionModeChanged(selectionModeCombo<span class="operator">-</span><span class="operator">&gt;</span>currentIndex());
     horizontalHeaderChanged(horizontalHeaderCombo<span class="operator">-</span><span class="operator">&gt;</span>currentIndex());
     verticalHeaderChanged(verticalHeaderCombo<span class="operator">-</span><span class="operator">&gt;</span>currentIndex());
 }
</pre>
<p>At the end of the function, we call the slots that update the calendar to ensure that the <a href="qcalendarwidget.html" translate="no">QCalendarWidget</a> is synchronized with the other widgets on startup.</p>
<p>Let's now take a look at the <code translate="no">createDatesGroupBox()</code> private function:</p>
<pre class="cpp" translate="no">
 <span class="type">void</span> Window<span class="operator">::</span>createDatesGroupBox()
 {
     datesGroupBox <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qgroupbox.html" translate="no">QGroupBox</a></span>(tr(<span class="string">&quot;Dates&quot;</span>));

     minimumDateEdit <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qdateedit.html" translate="no">QDateEdit</a></span>;
     minimumDateEdit<span class="operator">-</span><span class="operator">&gt;</span>setDisplayFormat(<span class="string">&quot;MMM d yyyy&quot;</span>);
     minimumDateEdit<span class="operator">-</span><span class="operator">&gt;</span>setDateRange(calendar<span class="operator">-</span><span class="operator">&gt;</span>minimumDate()<span class="operator">,</span>
                                   calendar<span class="operator">-</span><span class="operator">&gt;</span>maximumDate());
     minimumDateEdit<span class="operator">-</span><span class="operator">&gt;</span>setDate(calendar<span class="operator">-</span><span class="operator">&gt;</span>minimumDate());

     minimumDateLabel <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qlabel.html" translate="no">QLabel</a></span>(tr(<span class="string">&quot;&amp;Minimum Date:&quot;</span>));
     minimumDateLabel<span class="operator">-</span><span class="operator">&gt;</span>setBuddy(minimumDateEdit);

     currentDateEdit <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qdateedit.html" translate="no">QDateEdit</a></span>;
     currentDateEdit<span class="operator">-</span><span class="operator">&gt;</span>setDisplayFormat(<span class="string">&quot;MMM d yyyy&quot;</span>);
     currentDateEdit<span class="operator">-</span><span class="operator">&gt;</span>setDate(calendar<span class="operator">-</span><span class="operator">&gt;</span>selectedDate());
     currentDateEdit<span class="operator">-</span><span class="operator">&gt;</span>setDateRange(calendar<span class="operator">-</span><span class="operator">&gt;</span>minimumDate()<span class="operator">,</span>
                                   calendar<span class="operator">-</span><span class="operator">&gt;</span>maximumDate());

     currentDateLabel <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qlabel.html" translate="no">QLabel</a></span>(tr(<span class="string">&quot;&amp;Current Date:&quot;</span>));
     currentDateLabel<span class="operator">-</span><span class="operator">&gt;</span>setBuddy(currentDateEdit);

     maximumDateEdit <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qdateedit.html" translate="no">QDateEdit</a></span>;
     maximumDateEdit<span class="operator">-</span><span class="operator">&gt;</span>setDisplayFormat(<span class="string">&quot;MMM d yyyy&quot;</span>);
     maximumDateEdit<span class="operator">-</span><span class="operator">&gt;</span>setDateRange(calendar<span class="operator">-</span><span class="operator">&gt;</span>minimumDate()<span class="operator">,</span>
                                   calendar<span class="operator">-</span><span class="operator">&gt;</span>maximumDate());
     maximumDateEdit<span class="operator">-</span><span class="operator">&gt;</span>setDate(calendar<span class="operator">-</span><span class="operator">&gt;</span>maximumDate());

     maximumDateLabel <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qlabel.html" translate="no">QLabel</a></span>(tr(<span class="string">&quot;Ma&amp;ximum Date:&quot;</span>));
     maximumDateLabel<span class="operator">-</span><span class="operator">&gt;</span>setBuddy(maximumDateEdit);
</pre>
<p>In this function, we create the <b translate="no">Minimum Date</b>, <b translate="no">Maximum Date</b>, and <b translate="no">Current Date</b> editor widgets, which control the calendar's minimum, maximum, and selected dates. The calendar's minimum and maximum dates have already been set in <code translate="no">createPrivewGroupBox()</code>; we can then set the widgets default values to the calendars values.</p>
<pre class="cpp" translate="no">
     connect(currentDateEdit<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qdateedit.html" translate="no">QDateEdit</a></span><span class="operator">::</span>dateChanged<span class="operator">,</span>
             calendar<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qcalendarwidget.html" translate="no">QCalendarWidget</a></span><span class="operator">::</span>setSelectedDate);
     connect(calendar<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qcalendarwidget.html" translate="no">QCalendarWidget</a></span><span class="operator">::</span>selectionChanged<span class="operator">,</span>
             <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>Window<span class="operator">::</span>selectedDateChanged);
     connect(minimumDateEdit<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qdateedit.html" translate="no">QDateEdit</a></span><span class="operator">::</span>dateChanged<span class="operator">,</span>
             <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>Window<span class="operator">::</span>minimumDateChanged);
     connect(maximumDateEdit<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qdateedit.html" translate="no">QDateEdit</a></span><span class="operator">::</span>dateChanged<span class="operator">,</span>
             <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>Window<span class="operator">::</span>maximumDateChanged);
     ...
 }
</pre>
<p>We connect the <code translate="no">currentDateEdit</code>'s <a href="qdatetimeedit.html#dateChanged" translate="no">dateChanged</a>() signal directly to the calendar's <a href="qcalendarwidget.html#selectedDate-prop" translate="no">setSelectedDate</a>() slot. When the calendar's selected date changes, either as a result of a user action or programmatically, our <code translate="no">selectedDateChanged()</code> slot updates the <b translate="no">Current Date</b> editor. We also need to react when the user changes the <b translate="no">Minimum Date</b> and <b translate="no">Maximum Date</b> editors.</p>
<p>Here is the <code translate="no">createTextFormatsGroup()</code> function:</p>
<pre class="cpp" translate="no">
 <span class="type">void</span> Window<span class="operator">::</span>createTextFormatsGroupBox()
 {
     textFormatsGroupBox <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qgroupbox.html" translate="no">QGroupBox</a></span>(tr(<span class="string">&quot;Text Formats&quot;</span>));

     weekdayColorCombo <span class="operator">=</span> createColorComboBox();
     weekdayColorCombo<span class="operator">-</span><span class="operator">&gt;</span>setCurrentIndex(
             weekdayColorCombo<span class="operator">-</span><span class="operator">&gt;</span>findText(tr(<span class="string">&quot;Black&quot;</span>)));

     weekdayColorLabel <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qlabel.html" translate="no">QLabel</a></span>(tr(<span class="string">&quot;&amp;Weekday color:&quot;</span>));
     weekdayColorLabel<span class="operator">-</span><span class="operator">&gt;</span>setBuddy(weekdayColorCombo);

     weekendColorCombo <span class="operator">=</span> createColorComboBox();
     weekendColorCombo<span class="operator">-</span><span class="operator">&gt;</span>setCurrentIndex(
             weekendColorCombo<span class="operator">-</span><span class="operator">&gt;</span>findText(tr(<span class="string">&quot;Red&quot;</span>)));

     weekendColorLabel <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qlabel.html" translate="no">QLabel</a></span>(tr(<span class="string">&quot;Week&amp;end color:&quot;</span>));
     weekendColorLabel<span class="operator">-</span><span class="operator">&gt;</span>setBuddy(weekendColorCombo);
</pre>
<p>We set up the <b translate="no">Weekday Color</b> and <b translate="no">Weekend Color</b> comboboxes using <code translate="no">createColorCombo()</code>, which instantiates a <a href="qcombobox.html" translate="no">QComboBox</a> and populates it with colors (&quot;Red&quot;, &quot;Blue&quot;, etc.).</p>
<pre class="cpp" translate="no">
     headerTextFormatCombo <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qcombobox.html" translate="no">QComboBox</a></span>;
     headerTextFormatCombo<span class="operator">-</span><span class="operator">&gt;</span>addItem(tr(<span class="string">&quot;Bold&quot;</span>));
     headerTextFormatCombo<span class="operator">-</span><span class="operator">&gt;</span>addItem(tr(<span class="string">&quot;Italic&quot;</span>));
     headerTextFormatCombo<span class="operator">-</span><span class="operator">&gt;</span>addItem(tr(<span class="string">&quot;Plain&quot;</span>));

     headerTextFormatLabel <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qlabel.html" translate="no">QLabel</a></span>(tr(<span class="string">&quot;&amp;Header text:&quot;</span>));
     headerTextFormatLabel<span class="operator">-</span><span class="operator">&gt;</span>setBuddy(headerTextFormatCombo);

     firstFridayCheckBox <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qcheckbox.html" translate="no">QCheckBox</a></span>(tr(<span class="string">&quot;&amp;First Friday in blue&quot;</span>));

     mayFirstCheckBox <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qcheckbox.html" translate="no">QCheckBox</a></span>(tr(<span class="string">&quot;May &amp;1 in red&quot;</span>));
</pre>
<p>The <b translate="no">Header Text Format</b> combobox lets the user change the text format (bold, italic, or plain) used for horizontal and vertical headers. The <b translate="no">First Friday in blue</b> and <b translate="no">May 1 in red</b> check box affect the rendering of specific dates.</p>
<pre class="cpp" translate="no">
     connect(weekdayColorCombo<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qcombobox.html" translate="no">QComboBox</a></span><span class="operator">::</span>currentIndexChanged<span class="operator">,</span>
             <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>Window<span class="operator">::</span>weekdayFormatChanged);
     connect(weekdayColorCombo<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qcombobox.html" translate="no">QComboBox</a></span><span class="operator">::</span>currentIndexChanged<span class="operator">,</span>
             <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>Window<span class="operator">::</span>reformatCalendarPage);
     connect(weekendColorCombo<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qcombobox.html" translate="no">QComboBox</a></span><span class="operator">::</span>currentIndexChanged<span class="operator">,</span>
             <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>Window<span class="operator">::</span>weekendFormatChanged);
     connect(weekendColorCombo<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qcombobox.html" translate="no">QComboBox</a></span><span class="operator">::</span>currentIndexChanged<span class="operator">,</span>
             <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>Window<span class="operator">::</span>reformatCalendarPage);
     connect(headerTextFormatCombo<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qcombobox.html" translate="no">QComboBox</a></span><span class="operator">::</span>currentIndexChanged<span class="operator">,</span>
             <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>Window<span class="operator">::</span>reformatHeaders);
     connect(firstFridayCheckBox<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qcheckbox.html" translate="no">QCheckBox</a></span><span class="operator">::</span>toggled<span class="operator">,</span>
             <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>Window<span class="operator">::</span>reformatCalendarPage);
     connect(mayFirstCheckBox<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qcheckbox.html" translate="no">QCheckBox</a></span><span class="operator">::</span>toggled<span class="operator">,</span>
             <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>Window<span class="operator">::</span>reformatCalendarPage);
</pre>
<p>We connect the check boxes and comboboxes to various private slots. The <b translate="no">First Friday in blue</b> and <b translate="no">May 1 in red</b> check boxes are both connected to <code translate="no">reformatCalendarPage()</code>, which is also called when the calendar switches month.</p>
<pre class="cpp" translate="no">
     ...
     reformatHeaders();
     reformatCalendarPage();
 }
</pre>
<p>At the end of <code translate="no">createTextFormatsGroupBox()</code>, we call private slots to synchronize the <a href="qcalendarwidget.html" translate="no">QCalendarWidget</a> with the other widgets.</p>
<p>We're now done reviewing the four <code translate="no">create...GroupBox()</code> functions. Let's now take a look at the other private functions and slots.</p>
<pre class="cpp" translate="no">
 <span class="type"><a href="qcombobox.html" translate="no">QComboBox</a></span> <span class="operator">*</span>Window<span class="operator">::</span>createColorComboBox()
 {
     <span class="type"><a href="qcombobox.html" translate="no">QComboBox</a></span> <span class="operator">*</span>comboBox <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qcombobox.html" translate="no">QComboBox</a></span>;
     comboBox<span class="operator">-</span><span class="operator">&gt;</span>addItem(tr(<span class="string">&quot;Red&quot;</span>)<span class="operator">,</span> <span class="type"><a href="../qtgui/qcolor.html" translate="no">QColor</a></span>(<span class="type"><a href="../qtcore/qt.html" translate="no">Qt</a></span><span class="operator">::</span>red));
     comboBox<span class="operator">-</span><span class="operator">&gt;</span>addItem(tr(<span class="string">&quot;Blue&quot;</span>)<span class="operator">,</span> <span class="type"><a href="../qtgui/qcolor.html" translate="no">QColor</a></span>(<span class="type"><a href="../qtcore/qt.html" translate="no">Qt</a></span><span class="operator">::</span>blue));
     comboBox<span class="operator">-</span><span class="operator">&gt;</span>addItem(tr(<span class="string">&quot;Black&quot;</span>)<span class="operator">,</span> <span class="type"><a href="../qtgui/qcolor.html" translate="no">QColor</a></span>(<span class="type"><a href="../qtcore/qt.html" translate="no">Qt</a></span><span class="operator">::</span>black));
     comboBox<span class="operator">-</span><span class="operator">&gt;</span>addItem(tr(<span class="string">&quot;Magenta&quot;</span>)<span class="operator">,</span> <span class="type"><a href="../qtgui/qcolor.html" translate="no">QColor</a></span>(<span class="type"><a href="../qtcore/qt.html" translate="no">Qt</a></span><span class="operator">::</span>magenta));
     <span class="keyword">return</span> comboBox;
 }
</pre>
<p>In <code translate="no">createColorCombo()</code>, we create a combobox and populate it with standard colors. The second argument to <a href="qcombobox.html#addItem" translate="no">QComboBox::addItem</a>() is a <a href="../qtcore/qvariant.html" translate="no">QVariant</a> storing user data (in this case, <a href="../qtgui/qcolor.html" translate="no">QColor</a> objects).</p>
<p>This function was used to set up the <b translate="no">Weekday Color</b> and <b translate="no">Weekend Color</b> comboboxes.</p>
<pre class="cpp" translate="no">
 <span class="type">void</span> Window<span class="operator">::</span>firstDayChanged(<span class="type">int</span> index)
 {
     calendar<span class="operator">-</span><span class="operator">&gt;</span>setFirstDayOfWeek(<span class="type"><a href="../qtcore/qt.html" translate="no">Qt</a></span><span class="operator">::</span>DayOfWeek(
                                 firstDayCombo<span class="operator">-</span><span class="operator">&gt;</span>itemData(index)<span class="operator">.</span>toInt()));
 }
</pre>
<p>When the user changes the <b translate="no">Week starts on</b> combobox's value, <code translate="no">firstDayChanged()</code> is invoked with the index of the combobox's new value. We retrieve the custom data item associated with the new current item using <a href="qcombobox.html#itemData" translate="no">itemData</a>() and cast it to a <a href="../qtcore/qt.html#DayOfWeek-enum" translate="no">Qt::DayOfWeek</a>.</p>
<p><code translate="no">selectionModeChanged()</code>, <code translate="no">horizontalHeaderChanged()</code>, and <code translate="no">verticalHeaderChanged()</code> are very similar to <code translate="no">firstDayChanged()</code>, so they are omitted.</p>
<pre class="cpp" translate="no">
 <span class="type">void</span> Window<span class="operator">::</span>selectedDateChanged()
 {
     currentDateEdit<span class="operator">-</span><span class="operator">&gt;</span>setDate(calendar<span class="operator">-</span><span class="operator">&gt;</span>selectedDate());
 }
</pre>
<p>The <code translate="no">selectedDateChanged()</code> updates the <b translate="no">Current Date</b> editor to reflect the current state of the <a href="qcalendarwidget.html" translate="no">QCalendarWidget</a>.</p>
<pre class="cpp" translate="no">
 <span class="type">void</span> Window<span class="operator">::</span>minimumDateChanged(<span class="type"><a href="../qtcore/qdate.html" translate="no">QDate</a></span> date)
 {
     calendar<span class="operator">-</span><span class="operator">&gt;</span>setMinimumDate(date);
     maximumDateEdit<span class="operator">-</span><span class="operator">&gt;</span>setDate(calendar<span class="operator">-</span><span class="operator">&gt;</span>maximumDate());
 }
</pre>
<p>When the user changes the minimum date, we tell the QCalenderWidget. We also update the <b translate="no">Maximum Date</b> editor, because if the new minimum date is later than the current maximum date, <a href="qcalendarwidget.html" translate="no">QCalendarWidget</a> will automatically adapt its maximum date to avoid a contradicting state.</p>
<pre class="cpp" translate="no">
 <span class="type">void</span> Window<span class="operator">::</span>maximumDateChanged(<span class="type"><a href="../qtcore/qdate.html" translate="no">QDate</a></span> date)
 {
     calendar<span class="operator">-</span><span class="operator">&gt;</span>setMaximumDate(date);
     minimumDateEdit<span class="operator">-</span><span class="operator">&gt;</span>setDate(calendar<span class="operator">-</span><span class="operator">&gt;</span>minimumDate());
 }
</pre>
<p><code translate="no">maximumDateChanged()</code> is implemented similarly to <code translate="no">minimumDateChanged()</code>.</p>
<pre class="cpp" translate="no">
 <span class="type">void</span> Window<span class="operator">::</span>weekdayFormatChanged()
 {
     <span class="type"><a href="../qtgui/qtextcharformat.html" translate="no">QTextCharFormat</a></span> format;

     format<span class="operator">.</span>setForeground(qvariant_cast<span class="operator">&lt;</span><span class="type"><a href="../qtgui/qcolor.html" translate="no">QColor</a></span><span class="operator">&gt;</span>(
         weekdayColorCombo<span class="operator">-</span><span class="operator">&gt;</span>itemData(weekdayColorCombo<span class="operator">-</span><span class="operator">&gt;</span>currentIndex())));
     calendar<span class="operator">-</span><span class="operator">&gt;</span>setWeekdayTextFormat(<span class="type"><a href="../qtcore/qt.html" translate="no">Qt</a></span><span class="operator">::</span>Monday<span class="operator">,</span> format);
     calendar<span class="operator">-</span><span class="operator">&gt;</span>setWeekdayTextFormat(<span class="type"><a href="../qtcore/qt.html" translate="no">Qt</a></span><span class="operator">::</span>Tuesday<span class="operator">,</span> format);
     calendar<span class="operator">-</span><span class="operator">&gt;</span>setWeekdayTextFormat(<span class="type"><a href="../qtcore/qt.html" translate="no">Qt</a></span><span class="operator">::</span>Wednesday<span class="operator">,</span> format);
     calendar<span class="operator">-</span><span class="operator">&gt;</span>setWeekdayTextFormat(<span class="type"><a href="../qtcore/qt.html" translate="no">Qt</a></span><span class="operator">::</span>Thursday<span class="operator">,</span> format);
     calendar<span class="operator">-</span><span class="operator">&gt;</span>setWeekdayTextFormat(<span class="type"><a href="../qtcore/qt.html" translate="no">Qt</a></span><span class="operator">::</span>Friday<span class="operator">,</span> format);
 }
</pre>
<p>Each combobox item has a <a href="../qtgui/qcolor.html" translate="no">QColor</a> object as user data corresponding to the item's text. After fetching the colors from the comboboxes, we set the text format of each day of the week.</p>
<p>The text format of a column in the calendar is given as a <a href="../qtgui/qtextcharformat.html" translate="no">QTextCharFormat</a>, which besides the foreground color lets us specify various character formatting information. In this example, we only show a subset of the possibilities.</p>
<pre class="cpp" translate="no">
 <span class="type">void</span> Window<span class="operator">::</span>weekendFormatChanged()
 {
     <span class="type"><a href="../qtgui/qtextcharformat.html" translate="no">QTextCharFormat</a></span> format;

     format<span class="operator">.</span>setForeground(qvariant_cast<span class="operator">&lt;</span><span class="type"><a href="../qtgui/qcolor.html" translate="no">QColor</a></span><span class="operator">&gt;</span>(
         weekendColorCombo<span class="operator">-</span><span class="operator">&gt;</span>itemData(weekendColorCombo<span class="operator">-</span><span class="operator">&gt;</span>currentIndex())));
     calendar<span class="operator">-</span><span class="operator">&gt;</span>setWeekdayTextFormat(<span class="type"><a href="../qtcore/qt.html" translate="no">Qt</a></span><span class="operator">::</span>Saturday<span class="operator">,</span> format);
     calendar<span class="operator">-</span><span class="operator">&gt;</span>setWeekdayTextFormat(<span class="type"><a href="../qtcore/qt.html" translate="no">Qt</a></span><span class="operator">::</span>Sunday<span class="operator">,</span> format);
 }
</pre>
<p><code translate="no">weekendFormatChanged()</code> is the same as <code translate="no">weekdayFormatChanged()</code>, except that it affects Saturday and Sunday instead of Monday to Friday.</p>
<pre class="cpp" translate="no">
 <span class="type">void</span> Window<span class="operator">::</span>reformatHeaders()
 {
     <span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> text <span class="operator">=</span> headerTextFormatCombo<span class="operator">-</span><span class="operator">&gt;</span>currentText();
     <span class="type"><a href="../qtgui/qtextcharformat.html" translate="no">QTextCharFormat</a></span> format;

     <span class="keyword">if</span> (text <span class="operator">=</span><span class="operator">=</span> tr(<span class="string">&quot;Bold&quot;</span>))
         format<span class="operator">.</span>setFontWeight(<span class="type"><a href="../qtgui/qfont.html" translate="no">QFont</a></span><span class="operator">::</span>Bold);
     <span class="keyword">else</span> <span class="keyword">if</span> (text <span class="operator">=</span><span class="operator">=</span> tr(<span class="string">&quot;Italic&quot;</span>))
         format<span class="operator">.</span>setFontItalic(<span class="keyword">true</span>);
     <span class="keyword">else</span> <span class="keyword">if</span> (text <span class="operator">=</span><span class="operator">=</span> tr(<span class="string">&quot;Green&quot;</span>))
         format<span class="operator">.</span>setForeground(<span class="type"><a href="../qtcore/qt.html" translate="no">Qt</a></span><span class="operator">::</span>green);
     calendar<span class="operator">-</span><span class="operator">&gt;</span>setHeaderTextFormat(format);
 }
</pre>
<p>The <code translate="no">reformatHeaders()</code> slot is called when the user changes the text format of the headers. We compare the current text of the <b translate="no">Header Text Format</b> combobox to determine which format to apply. (An alternative would have been to store <a href="../qtgui/qtextcharformat.html" translate="no">QTextCharFormat</a> values alongside the combobox items.)</p>
<pre class="cpp" translate="no">
 <span class="type">void</span> Window<span class="operator">::</span>reformatCalendarPage()
 {
     <span class="type"><a href="../qtgui/qtextcharformat.html" translate="no">QTextCharFormat</a></span> mayFirstFormat;
     <span class="keyword">const</span> <span class="type"><a href="../qtcore/qdate.html" translate="no">QDate</a></span> mayFirst(calendar<span class="operator">-</span><span class="operator">&gt;</span>yearShown()<span class="operator">,</span> <span class="number">5</span><span class="operator">,</span> <span class="number">1</span>);

     <span class="type"><a href="../qtgui/qtextcharformat.html" translate="no">QTextCharFormat</a></span> firstFridayFormat;
     <span class="type"><a href="../qtcore/qdate.html" translate="no">QDate</a></span> firstFriday(calendar<span class="operator">-</span><span class="operator">&gt;</span>yearShown()<span class="operator">,</span> calendar<span class="operator">-</span><span class="operator">&gt;</span>monthShown()<span class="operator">,</span> <span class="number">1</span>);
     <span class="keyword">while</span> (firstFriday<span class="operator">.</span>dayOfWeek() <span class="operator">!</span><span class="operator">=</span> <span class="type"><a href="../qtcore/qt.html" translate="no">Qt</a></span><span class="operator">::</span>Friday)
         firstFriday <span class="operator">=</span> firstFriday<span class="operator">.</span>addDays(<span class="number">1</span>);

     <span class="keyword">if</span> (firstFridayCheckBox<span class="operator">-</span><span class="operator">&gt;</span>isChecked()) {
         firstFridayFormat<span class="operator">.</span>setForeground(<span class="type"><a href="../qtcore/qt.html" translate="no">Qt</a></span><span class="operator">::</span>blue);
     } <span class="keyword">else</span> { <span class="comment">// Revert to regular colour for this day of the week.</span>
         <span class="type"><a href="../qtcore/qt.html" translate="no">Qt</a></span><span class="operator">::</span>DayOfWeek dayOfWeek(<span class="keyword">static_cast</span><span class="operator">&lt;</span><span class="type"><a href="../qtcore/qt.html" translate="no">Qt</a></span><span class="operator">::</span>DayOfWeek<span class="operator">&gt;</span>(firstFriday<span class="operator">.</span>dayOfWeek()));
         firstFridayFormat<span class="operator">.</span>setForeground(calendar<span class="operator">-</span><span class="operator">&gt;</span>weekdayTextFormat(dayOfWeek)<span class="operator">.</span>foreground());
     }

     calendar<span class="operator">-</span><span class="operator">&gt;</span>setDateTextFormat(firstFriday<span class="operator">,</span> firstFridayFormat);

     <span class="comment">// When it is checked, &quot;May First in Red&quot; always takes precedence over &quot;First Friday in Blue&quot;.</span>
     <span class="keyword">if</span> (mayFirstCheckBox<span class="operator">-</span><span class="operator">&gt;</span>isChecked()) {
         mayFirstFormat<span class="operator">.</span>setForeground(<span class="type"><a href="../qtcore/qt.html" translate="no">Qt</a></span><span class="operator">::</span>red);
     } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="operator">!</span>firstFridayCheckBox<span class="operator">-</span><span class="operator">&gt;</span>isChecked() <span class="operator">|</span><span class="operator">|</span> firstFriday <span class="operator">!</span><span class="operator">=</span> mayFirst) {
         <span class="comment">// We can now be certain we won't be resetting &quot;May First in Red&quot; when we restore</span>
         <span class="comment">// may 1st's regular colour for this day of the week.</span>
         <span class="type"><a href="../qtcore/qt.html" translate="no">Qt</a></span><span class="operator">::</span>DayOfWeek dayOfWeek(<span class="keyword">static_cast</span><span class="operator">&lt;</span><span class="type"><a href="../qtcore/qt.html" translate="no">Qt</a></span><span class="operator">::</span>DayOfWeek<span class="operator">&gt;</span>(mayFirst<span class="operator">.</span>dayOfWeek()));
         calendar<span class="operator">-</span><span class="operator">&gt;</span>setDateTextFormat(mayFirst<span class="operator">,</span> calendar<span class="operator">-</span><span class="operator">&gt;</span>weekdayTextFormat(dayOfWeek));
     }

     calendar<span class="operator">-</span><span class="operator">&gt;</span>setDateTextFormat(mayFirst<span class="operator">,</span> mayFirstFormat);
 }
</pre>
<p>In <code translate="no">reformatCalendarPage()</code>, we set the text format of the first Friday in the month and May 1 in the current year. The text formats that are actually used depend on which check boxes are checked and what the weekday/weekend formats are.</p>
<p><a href="qcalendarwidget.html" translate="no">QCalendarWidget</a> lets us set the text format of individual dates with the <a href="qcalendarwidget.html#setDateTextFormat" translate="no">setDateTextFormat</a>(). We chose to set the date formats when the calendar page changes - i.e. a new month is displayed - and when the weekday/weekend format is changed. We check which of the <code translate="no">mayFirstCheckBox</code> and <code translate="no">firstDayCheckBox</code>, if any, are checked and set the text formats accordingly.</p>
<p><a href="https://code.qt.io/cgit/qt/qtbase.git/tree/examples/widgets/widgets/calendarwidget?h=6.7" translate="no">Example project @ code.qt.io</a></p>
</div>
<!-- @@@widgets/calendarwidget -->
        </div>
       </div>
   </div>
   </div>
</div>
<div class="footer">
   <p>
   <acronym title="Copyright">&copy;</acronym> 2024 <span translate="no">The Qt Company Ltd.</span>
   Documentation contributions included herein are the copyrights of
   their respective owners.<br/>    The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the <span translate="no">Free Software Foundation</span>.<br/>    <span translate="no">Qt</span> and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of <span translate="no">The Qt Company Ltd.</span> in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>
</div>
</body>
</html>
