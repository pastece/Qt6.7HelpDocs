<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<!-- qsqlquerymodel.cpp -->
  <meta name="description" content="The QSqlQueryModel class provides a read-only data model for SQL result sets.">
  <title>QSqlQueryModel Class | Qt SQL 6.7.0</title>
  <link rel="stylesheet" type="text/css" href="style/offline-simple.css" />
  <script type="text/javascript">
    document.getElementsByTagName("link").item(0).setAttribute("href", "style/offline.css");
    // loading style sheet breaks anchors that were jumped to before
    // so force jumping to anchor again
    setTimeout(function() {
        var anchor = location.hash;
        // need to jump to different anchor first (e.g. none)
        location.hash = "#";
        setTimeout(function() {
            location.hash = anchor;
        }, 0);
    }, 0);
  </script>
</head>
<body>
<div class="header" id="qtdocheader">
    <div class="main">
    <div class="main-rounded">
        <div class="navigationbar">
        <ul>
<li><a href="../qtdoc/index.html" translate="no">Qt 6.7</a></li>
<li><a href="qtsql-index.html" translate="no">Qt SQL</a></li>
<li><a href="qtsql-module.html" translate="no">C++ Classes</a></li>
<li>QSqlQueryModel</li>
<li id="buildversion"><a href="qtsql-index.html" translate="no">Qt 6.7.0 Reference Documentation</a></li>
    </ul>
    </div>
</div>
<div class="content">
<div class="line">
<div class="content mainContent">
<div class="sidebar">
<div class="toc">
<h3 id="toc">Contents</h3>
<ul>
<li class="level1"><a href="#public-functions">Public Functions</a></li>
<li class="level1"><a href="#reimplemented-public-functions">Reimplemented Public Functions</a></li>
<li class="level1"><a href="#protected-functions">Protected Functions</a></li>
<li class="level1"><a href="#details">Detailed Description</a></li>
</ul>
</div>
<div class="sidebar-content" id="sidebar-content"></div></div>
<h1 class="title" translate="no">QSqlQueryModel Class</h1>
<!-- $$$QSqlQueryModel-brief -->
<p>The QSqlQueryModel class provides a read-only data model for SQL result sets. <a href="#details">More...</a></p>
<!-- @@@QSqlQueryModel -->
<div class="table"><table class="alignedsummary" translate="no">
<tr><td class="memItemLeft rightAlign topAlign"> Header:</td><td class="memItemRight bottomAlign">  <span class="preprocessor">#include &lt;QSqlQueryModel&gt;</span></td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> CMake:</td><td class="memItemRight bottomAlign"> find_package(Qt6 REQUIRED COMPONENTS Sql) <br/>
target_link_libraries(mytarget PRIVATE Qt6::Sql)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> qmake:</td><td class="memItemRight bottomAlign"> QT += sql</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> Inherits:</td><td class="memItemRight bottomAlign"> <a href="../qtcore/qabstracttablemodel.html" translate="no">QAbstractTableModel</a></td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> Inherited By:</td><td class="memItemRight bottomAlign"> <p><a href="qsqltablemodel.html" translate="no">QSqlTableModel</a></p>
</td></tr>
</table></div>
<ul>
<li><a href="qsqlquerymodel-members.html">List of all members, including inherited members</a></li>
<li><a href="qsqlquerymodel-obsolete.html">Deprecated members</a></li>
<li>QSqlQueryModel is part of <a href="database.html">Database Classes</a>.</li>
</ul>
<h2 id="public-functions">Public Functions</h2>
<div class="table"><table class="alignedsummary" translate="no">
<tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="qsqlquerymodel.html#QSqlQueryModel" translate="no">QSqlQueryModel</a></b>(QObject *<i>parent</i> = nullptr)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> virtual </td><td class="memItemRight bottomAlign"><b><a href="qsqlquerymodel.html#dtor.QSqlQueryModel" translate="no">~QSqlQueryModel</a></b>()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> virtual void </td><td class="memItemRight bottomAlign"><b><a href="qsqlquerymodel.html#clear" translate="no">clear</a></b>()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QSqlError </td><td class="memItemRight bottomAlign"><b><a href="qsqlquerymodel.html#lastError" translate="no">lastError</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> const QSqlQuery &amp;</td><td class="memItemRight bottomAlign"><b><a href="qsqlquerymodel.html#query" translate="no">query</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QSqlRecord </td><td class="memItemRight bottomAlign"><b><a href="qsqlquerymodel.html#record" translate="no">record</a></b>(int <i>row</i>) const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QSqlRecord </td><td class="memItemRight bottomAlign"><b><a href="qsqlquerymodel.html#record-1" translate="no">record</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> <code class="summary extra" translate="no">(since 6.2)</code> void </td><td class="memItemRight bottomAlign"><b><a href="qsqlquerymodel.html#setQuery" translate="no">setQuery</a></b>(QSqlQuery &amp;&amp;<i>query</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="qsqlquerymodel.html#setQuery-2" translate="no">setQuery</a></b>(const QString &amp;<i>query</i>, const QSqlDatabase &amp;<i>db</i> = QSqlDatabase())</td></tr>
</table></div>
<h2 id="reimplemented-public-functions">Reimplemented Public Functions</h2>
<div class="table"><table class="alignedsummary" translate="no">
<tr><td class="memItemLeft rightAlign topAlign"> virtual bool </td><td class="memItemRight bottomAlign"><b><a href="qsqlquerymodel.html#canFetchMore" translate="no">canFetchMore</a></b>(const QModelIndex &amp;<i>parent</i> = QModelIndex()) const override</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> virtual int </td><td class="memItemRight bottomAlign"><b><a href="qsqlquerymodel.html#columnCount" translate="no">columnCount</a></b>(const QModelIndex &amp;<i>index</i> = QModelIndex()) const override</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> virtual QVariant </td><td class="memItemRight bottomAlign"><b><a href="qsqlquerymodel.html#data" translate="no">data</a></b>(const QModelIndex &amp;<i>item</i>, int <i>role</i> = Qt::DisplayRole) const override</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> virtual void </td><td class="memItemRight bottomAlign"><b><a href="qsqlquerymodel.html#fetchMore" translate="no">fetchMore</a></b>(const QModelIndex &amp;<i>parent</i> = QModelIndex()) override</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> virtual QVariant </td><td class="memItemRight bottomAlign"><b><a href="qsqlquerymodel.html#headerData" translate="no">headerData</a></b>(int <i>section</i>, Qt::Orientation <i>orientation</i>, int <i>role</i> = Qt::DisplayRole) const override</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> virtual bool </td><td class="memItemRight bottomAlign"><b><a href="qsqlquerymodel.html#insertColumns" translate="no">insertColumns</a></b>(int <i>column</i>, int <i>count</i>, const QModelIndex &amp;<i>parent</i> = QModelIndex()) override</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> virtual bool </td><td class="memItemRight bottomAlign"><b><a href="qsqlquerymodel.html#removeColumns" translate="no">removeColumns</a></b>(int <i>column</i>, int <i>count</i>, const QModelIndex &amp;<i>parent</i> = QModelIndex()) override</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> virtual QHash&lt;int, QByteArray&gt; </td><td class="memItemRight bottomAlign"><b><a href="qsqlquerymodel.html#roleNames" translate="no">roleNames</a></b>() const override</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> virtual int </td><td class="memItemRight bottomAlign"><b><a href="qsqlquerymodel.html#rowCount" translate="no">rowCount</a></b>(const QModelIndex &amp;<i>parent</i> = QModelIndex()) const override</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> virtual bool </td><td class="memItemRight bottomAlign"><b><a href="qsqlquerymodel.html#setHeaderData" translate="no">setHeaderData</a></b>(int <i>section</i>, Qt::Orientation <i>orientation</i>, const QVariant &amp;<i>value</i>, int <i>role</i> = Qt::EditRole) override</td></tr>
</table></div>
<h2 id="protected-functions">Protected Functions</h2>
<div class="table"><table class="alignedsummary" translate="no">
<tr><td class="memItemLeft rightAlign topAlign"> virtual QModelIndex </td><td class="memItemRight bottomAlign"><b><a href="qsqlquerymodel.html#indexInQuery" translate="no">indexInQuery</a></b>(const QModelIndex &amp;<i>item</i>) const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> virtual void </td><td class="memItemRight bottomAlign"><b><a href="qsqlquerymodel.html#queryChange" translate="no">queryChange</a></b>()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="qsqlquerymodel.html#setLastError" translate="no">setLastError</a></b>(const QSqlError &amp;<i>error</i>)</td></tr>
</table></div>
<!-- $$$QSqlQueryModel-description -->
<div class="descr">
<h2 id="details">Detailed Description</h2>
<p>QSqlQueryModel is a high-level interface for executing SQL statements and traversing the result set. It is built on top of the lower-level <a href="qsqlquery.html" translate="no">QSqlQuery</a> and can be used to provide data to view classes such as <a href="../qtwidgets/qtableview.html" translate="no">QTableView</a>. For example:</p>
<pre class="cpp" translate="no">
     <span class="type"><a href="qsqlquerymodel.html#QSqlQueryModel" translate="no">QSqlQueryModel</a></span> <span class="operator">*</span>model <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qsqlquerymodel.html#QSqlQueryModel" translate="no">QSqlQueryModel</a></span>;
     model<span class="operator">-</span><span class="operator">&gt;</span>setQuery(<span class="string">&quot;SELECT name, salary FROM employee&quot;</span>);
     model<span class="operator">-</span><span class="operator">&gt;</span>setHeaderData(<span class="number">0</span><span class="operator">,</span> <span class="type">Qt</span><span class="operator">::</span>Horizontal<span class="operator">,</span> tr(<span class="string">&quot;Name&quot;</span>));
     model<span class="operator">-</span><span class="operator">&gt;</span>setHeaderData(<span class="number">1</span><span class="operator">,</span> <span class="type">Qt</span><span class="operator">::</span>Horizontal<span class="operator">,</span> tr(<span class="string">&quot;Salary&quot;</span>));
     <span class="type"><a href="../qtwidgets/qtableview.html" translate="no">QTableView</a></span> <span class="operator">*</span>view <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="../qtwidgets/qtableview.html" translate="no">QTableView</a></span>;
     view<span class="operator">-</span><span class="operator">&gt;</span>setModel(model);
     view<span class="operator">-</span><span class="operator">&gt;</span>show();
</pre>
<p>We set the model's query, then we set up the labels displayed in the view header.</p>
<p>QSqlQueryModel can also be used to access a database programmatically, without binding it to a view:</p>
<pre class="cpp" translate="no">
     <span class="type"><a href="qsqlquerymodel.html#QSqlQueryModel" translate="no">QSqlQueryModel</a></span> model;
     model<span class="operator">.</span>setQuery(<span class="string">&quot;SELECT name, salary FROM employee&quot;</span>);
     <span class="type">int</span> salary <span class="operator">=</span> model<span class="operator">.</span>record(<span class="number">4</span>)<span class="operator">.</span>value(<span class="string">&quot;salary&quot;</span>)<span class="operator">.</span>toInt();
</pre>
<p>The code snippet above extracts the <code translate="no">salary</code> field from record 4 in the result set of the <code translate="no">SELECT</code> query. Since <code translate="no">salary</code> is the 2nd column (or column index 1), we can rewrite the last line as follows:</p>
<pre class="cpp" translate="no">
     <span class="type">int</span> salary <span class="operator">=</span> model<span class="operator">.</span>data(model<span class="operator">.</span>index(<span class="number">4</span><span class="operator">,</span> <span class="number">1</span>))<span class="operator">.</span>toInt();
</pre>
<p>The model is read-only by default. To make it read-write, you must subclass it and reimplement <a href="../qtcore/qabstractitemmodel.html#setData" translate="no">setData</a>() and <a href="../qtcore/qabstracttablemodel.html#flags" translate="no">flags</a>(). Another option is to use <a href="qsqltablemodel.html" translate="no">QSqlTableModel</a>, which provides a read-write model based on a single database table.</p>
<p>The <a href="qtsql-querymodel-example.html" translate="no">querymodel</a> example illustrates how to use QSqlQueryModel to display the result of a query. It also shows how to subclass QSqlQueryModel to customize the contents of the data before showing it to the user, and how to create a read-write model based on QSqlQueryModel.</p>
<p>If the database doesn't return the number of selected rows in a query, the model will fetch rows incrementally. See <a href="qsqlquerymodel.html#fetchMore" translate="no">fetchMore</a>() for more information.</p>
</div>
<p><b>See also </b><a href="qsqltablemodel.html" translate="no">QSqlTableModel</a>, <a href="qsqlrelationaltablemodel.html" translate="no">QSqlRelationalTableModel</a>, <a href="qsqlquery.html" translate="no">QSqlQuery</a>, <a href="../qtwidgets/model-view-programming.html" translate="no">Model/View Programming</a>, and <a href="qtsql-querymodel-example.html" translate="no">Query Model Example</a>.</p>
<!-- @@@QSqlQueryModel -->
<div class="func">
<h2>Member Function Documentation</h2>
<!-- $$$QSqlQueryModel[overload1]$$$QSqlQueryModelQObject* -->
<h3 class="fn" translate="no" id="QSqlQueryModel"><code class="details extra" translate="no">[explicit]</code> QSqlQueryModel::<span class="name">QSqlQueryModel</span>(<span class="type"><a href="../qtcore/qobject.html#QObject" translate="no">QObject</a></span> *<i>parent</i> = nullptr)</h3>
<p>Creates an empty QSqlQueryModel with the given <i translate="no">parent</i>.</p>
<!-- @@@QSqlQueryModel -->
<!-- $$$~QSqlQueryModel[overload1]$$$~QSqlQueryModel -->
<h3 class="fn" translate="no" id="dtor.QSqlQueryModel"><code class="details extra" translate="no">[virtual noexcept]</code> QSqlQueryModel::<span class="name">~QSqlQueryModel</span>()</h3>
<p>Destroys the object and frees any allocated resources.</p>
<p><b>See also </b><a href="qsqlquerymodel.html#clear" translate="no">clear</a>().</p>
<!-- @@@~QSqlQueryModel -->
<!-- $$$canFetchMore[overload1]$$$canFetchMoreconstQModelIndex& -->
<h3 class="fn" translate="no" id="canFetchMore"><code class="details extra" translate="no">[override virtual]</code> <span class="type">bool</span> QSqlQueryModel::<span class="name">canFetchMore</span>(const <span class="type"><a href="../qtcore/qmodelindex.html" translate="no">QModelIndex</a></span> &amp;<i>parent</i> = QModelIndex()) const</h3>
<p>Reimplements: <a href="../qtcore/qabstractitemmodel.html#canFetchMore" translate="no">QAbstractItemModel::canFetchMore(const QModelIndex &amp;parent) const</a>.</p>
<p>Returns <code translate="no">true</code> if it is possible to read more rows from the database. This only affects databases that don't report back the size of a query (see <a href="qsqldriver.html#hasFeature" translate="no">QSqlDriver::hasFeature</a>()).</p>
<p><i translate="no">parent</i> should always be an invalid <a href="../qtcore/qmodelindex.html" translate="no">QModelIndex</a>.</p>
<p><b>See also </b><a href="qsqlquerymodel.html#fetchMore" translate="no">fetchMore</a>().</p>
<!-- @@@canFetchMore -->
<!-- $$$clear[overload1]$$$clear -->
<h3 class="fn" translate="no" id="clear"><code class="details extra" translate="no">[virtual]</code> <span class="type">void</span> QSqlQueryModel::<span class="name">clear</span>()</h3>
<p>Clears the model and releases any acquired resource.</p>
<!-- @@@clear -->
<!-- $$$columnCount[overload1]$$$columnCountconstQModelIndex& -->
<h3 class="fn" translate="no" id="columnCount"><code class="details extra" translate="no">[override virtual]</code> <span class="type">int</span> QSqlQueryModel::<span class="name">columnCount</span>(const <span class="type"><a href="../qtcore/qmodelindex.html" translate="no">QModelIndex</a></span> &amp;<i>index</i> = QModelIndex()) const</h3>
<p>Reimplements: <a href="../qtcore/qabstractitemmodel.html#columnCount" translate="no">QAbstractItemModel::columnCount(const QModelIndex &amp;parent) const</a>.</p>
<!-- @@@columnCount -->
<!-- $$$data[overload1]$$$dataconstQModelIndex&int -->
<h3 class="fn" translate="no" id="data"><code class="details extra" translate="no">[override virtual]</code> <span class="type"><a href="../qtcore/qvariant.html" translate="no">QVariant</a></span> QSqlQueryModel::<span class="name">data</span>(const <span class="type"><a href="../qtcore/qmodelindex.html" translate="no">QModelIndex</a></span> &amp;<i>item</i>, <span class="type">int</span> <i>role</i> = Qt::DisplayRole) const</h3>
<p>Reimplements: <a href="../qtcore/qabstractitemmodel.html#data" translate="no">QAbstractItemModel::data(const QModelIndex &amp;index, int role) const</a>.</p>
<p>Returns the value for the specified <i translate="no">item</i> and <i translate="no">role</i>.</p>
<p>If <i translate="no">item</i> is out of bounds or if an error occurred, an invalid <a href="../qtcore/qvariant.html" translate="no">QVariant</a> is returned.</p>
<p><b>See also </b><a href="qsqlquerymodel.html#lastError" translate="no">lastError</a>().</p>
<!-- @@@data -->
<!-- $$$fetchMore[overload1]$$$fetchMoreconstQModelIndex& -->
<h3 class="fn" translate="no" id="fetchMore"><code class="details extra" translate="no">[override virtual]</code> <span class="type">void</span> QSqlQueryModel::<span class="name">fetchMore</span>(const <span class="type"><a href="../qtcore/qmodelindex.html" translate="no">QModelIndex</a></span> &amp;<i>parent</i> = QModelIndex())</h3>
<p>Reimplements: <a href="../qtcore/qabstractitemmodel.html#fetchMore" translate="no">QAbstractItemModel::fetchMore</a>(const QModelIndex &amp;parent).</p>
<p>Fetches more rows from a database. This only affects databases that don't report back the size of a query (see <a href="qsqldriver.html#hasFeature" translate="no">QSqlDriver::hasFeature</a>()).</p>
<p>To force fetching of the entire result set, you can use the following:</p>
<pre class="cpp" translate="no">
 <span class="keyword">while</span> (myModel<span class="operator">-</span><span class="operator">&gt;</span>canFetchMore())
     myModel<span class="operator">-</span><span class="operator">&gt;</span>fetchMore();
</pre>
<p><i translate="no">parent</i> should always be an invalid <a href="../qtcore/qmodelindex.html" translate="no">QModelIndex</a>.</p>
<p><b>See also </b><a href="qsqlquerymodel.html#canFetchMore" translate="no">canFetchMore</a>().</p>
<!-- @@@fetchMore -->
<!-- $$$headerData[overload1]$$$headerDataintQt::Orientationint -->
<h3 class="fn" translate="no" id="headerData"><code class="details extra" translate="no">[override virtual]</code> <span class="type"><a href="../qtcore/qvariant.html" translate="no">QVariant</a></span> QSqlQueryModel::<span class="name">headerData</span>(<span class="type">int</span> <i>section</i>, <span class="type"><a href="../qtcore/qt.html#Orientation-enum" translate="no">Qt::Orientation</a></span> <i>orientation</i>, <span class="type">int</span> <i>role</i> = Qt::DisplayRole) const</h3>
<p>Reimplements: <a href="../qtcore/qabstractitemmodel.html#headerData" translate="no">QAbstractItemModel::headerData(int section, Qt::Orientation orientation, int role) const</a>.</p>
<p>Returns the header data for the given <i translate="no">role</i> in the <i translate="no">section</i> of the header with the specified <i translate="no">orientation</i>.</p>
<p><b>See also </b><a href="qsqlquerymodel.html#setHeaderData" translate="no">setHeaderData</a>().</p>
<!-- @@@headerData -->
<!-- $$$indexInQuery[overload1]$$$indexInQueryconstQModelIndex& -->
<h3 class="fn" translate="no" id="indexInQuery"><code class="details extra" translate="no">[virtual protected]</code> <span class="type"><a href="../qtcore/qmodelindex.html" translate="no">QModelIndex</a></span> QSqlQueryModel::<span class="name">indexInQuery</span>(const <span class="type"><a href="../qtcore/qmodelindex.html" translate="no">QModelIndex</a></span> &amp;<i>item</i>) const</h3>
<p>Returns the index of the value in the database result set for the given <i translate="no">item</i> in the model.</p>
<p>The return value is identical to <i translate="no">item</i> if no columns or rows have been inserted, removed, or moved around.</p>
<p>Returns an invalid model index if <i translate="no">item</i> is out of bounds or if <i translate="no">item</i> does not point to a value in the result set.</p>
<p><b>See also </b><a href="qsqltablemodel.html#indexInQuery" translate="no">QSqlTableModel::indexInQuery</a>(), <a href="qsqlquerymodel.html#insertColumns" translate="no">insertColumns</a>(), and <a href="qsqlquerymodel.html#removeColumns" translate="no">removeColumns</a>().</p>
<!-- @@@indexInQuery -->
<!-- $$$insertColumns[overload1]$$$insertColumnsintintconstQModelIndex& -->
<h3 class="fn" translate="no" id="insertColumns"><code class="details extra" translate="no">[override virtual]</code> <span class="type">bool</span> QSqlQueryModel::<span class="name">insertColumns</span>(<span class="type">int</span> <i>column</i>, <span class="type">int</span> <i>count</i>, const <span class="type"><a href="../qtcore/qmodelindex.html" translate="no">QModelIndex</a></span> &amp;<i>parent</i> = QModelIndex())</h3>
<p>Reimplements: <a href="../qtcore/qabstractitemmodel.html#insertColumns" translate="no">QAbstractItemModel::insertColumns</a>(int column, int count, const QModelIndex &amp;parent).</p>
<p>Inserts <i translate="no">count</i> columns into the model at position <i translate="no">column</i>. The <i translate="no">parent</i> parameter must always be an invalid <a href="../qtcore/qmodelindex.html" translate="no">QModelIndex</a>, since the model does not support parent-child relationships.</p>
<p>Returns <code translate="no">true</code> if <i translate="no">column</i> is within bounds; otherwise returns <code translate="no">false</code>.</p>
<p>By default, inserted columns are empty. To fill them with data, reimplement <a href="qsqlquerymodel.html#data" translate="no">data</a>() and handle any inserted column separately:</p>
<pre class="cpp" translate="no">
 <span class="type"><a href="../qtcore/qvariant.html" translate="no">QVariant</a></span> MyModel<span class="operator">::</span>data(<span class="keyword">const</span> <span class="type"><a href="../qtcore/qmodelindex.html" translate="no">QModelIndex</a></span> <span class="operator">&amp;</span>item<span class="operator">,</span> <span class="type">int</span> role) <span class="keyword">const</span>
 {
     <span class="keyword">if</span> (item<span class="operator">.</span>column() <span class="operator">=</span><span class="operator">=</span> m_specialColumnNo) {
         <span class="comment">// handle column separately</span>
     }
     <span class="keyword">return</span> <span class="type"><a href="qsqlquerymodel.html#QSqlQueryModel" translate="no">QSqlQueryModel</a></span><span class="operator">::</span>data(item<span class="operator">,</span> role);
 }
</pre>
<p><b>See also </b><a href="qsqlquerymodel.html#removeColumns" translate="no">removeColumns</a>().</p>
<!-- @@@insertColumns -->
<!-- $$$lastError[overload1]$$$lastError -->
<h3 class="fn" translate="no" id="lastError"><span class="type"><a href="qsqlerror.html" translate="no">QSqlError</a></span> QSqlQueryModel::<span class="name">lastError</span>() const</h3>
<p>Returns information about the last error that occurred on the database.</p>
<p><b>See also </b><a href="qsqlquerymodel.html#setLastError" translate="no">setLastError</a>() and <a href="qsqlquerymodel.html#query" translate="no">query</a>().</p>
<!-- @@@lastError -->
<!-- $$$query[overload1]$$$query -->
<h3 class="fn" translate="no" id="query">const <span class="type"><a href="qsqlquery.html" translate="no">QSqlQuery</a></span> &amp;QSqlQueryModel::<span class="name">query</span>() const</h3>
<p>Returns a reference to the const <a href="qsqlquery.html" translate="no">QSqlQuery</a> object associated with this model.</p>
<p><b>See also </b><a href="qsqlquerymodel.html#setQuery" translate="no">setQuery</a>().</p>
<!-- @@@query -->
<!-- $$$queryChange[overload1]$$$queryChange -->
<h3 class="fn" translate="no" id="queryChange"><code class="details extra" translate="no">[virtual protected]</code> <span class="type">void</span> QSqlQueryModel::<span class="name">queryChange</span>()</h3>
<p>This virtual function is called whenever the query changes. The default implementation does nothing.</p>
<p><a href="qsqlquerymodel.html#query" translate="no">query</a>() returns the new query.</p>
<p><b>See also </b><a href="qsqlquerymodel.html#query" translate="no">query</a>() and <a href="qsqlquerymodel.html#setQuery" translate="no">setQuery</a>().</p>
<!-- @@@queryChange -->
<!-- $$$record[overload1]$$$recordint -->
<h3 class="fn" translate="no" id="record"><span class="type"><a href="qsqlrecord.html" translate="no">QSqlRecord</a></span> QSqlQueryModel::<span class="name">record</span>(<span class="type">int</span> <i>row</i>) const</h3>
<p>Returns the record containing information about the fields of the current query. If <i translate="no">row</i> is the index of a valid row, the record will be populated with values from that row.</p>
<p>If the model is not initialized, an empty record will be returned.</p>
<p><b>See also </b><a href="qsqlrecord.html#isEmpty" translate="no">QSqlRecord::isEmpty</a>().</p>
<!-- @@@record -->
<!-- $$$record$$$record -->
<h3 class="fn" translate="no" id="record-1"><span class="type"><a href="qsqlrecord.html" translate="no">QSqlRecord</a></span> QSqlQueryModel::<span class="name">record</span>() const</h3>
<p>This is an overloaded function.</p>
<p>Returns an empty record containing information about the fields of the current query.</p>
<p>If the model is not initialized, an empty record will be returned.</p>
<p><b>See also </b><a href="qsqlrecord.html#isEmpty" translate="no">QSqlRecord::isEmpty</a>().</p>
<!-- @@@record -->
<!-- $$$removeColumns[overload1]$$$removeColumnsintintconstQModelIndex& -->
<h3 class="fn" translate="no" id="removeColumns"><code class="details extra" translate="no">[override virtual]</code> <span class="type">bool</span> QSqlQueryModel::<span class="name">removeColumns</span>(<span class="type">int</span> <i>column</i>, <span class="type">int</span> <i>count</i>, const <span class="type"><a href="../qtcore/qmodelindex.html" translate="no">QModelIndex</a></span> &amp;<i>parent</i> = QModelIndex())</h3>
<p>Reimplements: <a href="../qtcore/qabstractitemmodel.html#removeColumns" translate="no">QAbstractItemModel::removeColumns</a>(int column, int count, const QModelIndex &amp;parent).</p>
<p>Removes <i translate="no">count</i> columns from the model starting from position <i translate="no">column</i>. The <i translate="no">parent</i> parameter must always be an invalid <a href="../qtcore/qmodelindex.html" translate="no">QModelIndex</a>, since the model does not support parent-child relationships.</p>
<p>Removing columns effectively hides them. It does not affect the underlying <a href="qsqlquery.html" translate="no">QSqlQuery</a>.</p>
<p>Returns <code translate="no">true</code> if the columns were removed; otherwise returns <code translate="no">false</code>.</p>
<!-- @@@removeColumns -->
<!-- $$$roleNames[overload1]$$$roleNames -->
<h3 class="fn" translate="no" id="roleNames"><code class="details extra" translate="no">[override virtual]</code> <span class="type"><a href="../qtcore/qhash.html" translate="no">QHash</a></span>&lt;<span class="type">int</span>, <span class="type"><a href="../qtcore/qbytearray.html" translate="no">QByteArray</a></span>&gt; QSqlQueryModel::<span class="name">roleNames</span>() const</h3>
<p>Reimplements: <a href="../qtcore/qabstractitemmodel.html#roleNames" translate="no">QAbstractItemModel::roleNames() const</a>.</p>
<p>Returns the model's role names.</p>
<p>Qt defines only one role for the <a href="qsqlquerymodel.html" translate="no">QSqlQueryModel</a>:</p>
<div class="table"><table class="generic">
 <thead><tr class="qt-style"><th >Qt Role</th><th >QML Role Name</th></tr></thead>
<tr valign="top" class="odd"><td ><a href="../qtcore/qt.html#ItemDataRole-enum" translate="no">Qt::DisplayRole</a></td><td >display</td></tr>
</table></div>
<!-- @@@roleNames -->
<!-- $$$rowCount[overload1]$$$rowCountconstQModelIndex& -->
<h3 class="fn" translate="no" id="rowCount"><code class="details extra" translate="no">[override virtual]</code> <span class="type">int</span> QSqlQueryModel::<span class="name">rowCount</span>(const <span class="type"><a href="../qtcore/qmodelindex.html" translate="no">QModelIndex</a></span> &amp;<i>parent</i> = QModelIndex()) const</h3>
<p>Reimplements: <a href="../qtcore/qabstractitemmodel.html#rowCount" translate="no">QAbstractItemModel::rowCount(const QModelIndex &amp;parent) const</a>.</p>
<p>If the database supports returning the size of a query (see <a href="qsqldriver.html#hasFeature" translate="no">QSqlDriver::hasFeature</a>()), the number of rows of the current query is returned. Otherwise, returns the number of rows currently cached on the client.</p>
<p><i translate="no">parent</i> should always be an invalid <a href="../qtcore/qmodelindex.html" translate="no">QModelIndex</a>.</p>
<p><b>See also </b><a href="qsqlquerymodel.html#canFetchMore" translate="no">canFetchMore</a>() and <a href="qsqldriver.html#hasFeature" translate="no">QSqlDriver::hasFeature</a>().</p>
<!-- @@@rowCount -->
<!-- $$$setHeaderData[overload1]$$$setHeaderDataintQt::OrientationconstQVariant&int -->
<h3 class="fn" translate="no" id="setHeaderData"><code class="details extra" translate="no">[override virtual]</code> <span class="type">bool</span> QSqlQueryModel::<span class="name">setHeaderData</span>(<span class="type">int</span> <i>section</i>, <span class="type"><a href="../qtcore/qt.html#Orientation-enum" translate="no">Qt::Orientation</a></span> <i>orientation</i>, const <span class="type"><a href="../qtcore/qvariant.html" translate="no">QVariant</a></span> &amp;<i>value</i>, <span class="type">int</span> <i>role</i> = Qt::EditRole)</h3>
<p>Reimplements: <a href="../qtcore/qabstractitemmodel.html#setHeaderData" translate="no">QAbstractItemModel::setHeaderData</a>(int section, Qt::Orientation orientation, const QVariant &amp;value, int role).</p>
<p>Sets the caption for a horizontal header for the specified <i translate="no">role</i> to <i translate="no">value</i>. This is useful if the model is used to display data in a view (e.g., <a href="../qtwidgets/qtableview.html" translate="no">QTableView</a>).</p>
<p>Returns <code translate="no">true</code> if <i translate="no">orientation</i> is <a href="../qtcore/qt.html#Orientation-enum" translate="no">Qt::Horizontal</a> and the <i translate="no">section</i> refers to a valid section; otherwise returns false.</p>
<p>Note that this function cannot be used to modify values in the database since the model is read-only.</p>
<p><b>See also </b><a href="qsqlquerymodel.html#headerData" translate="no">headerData</a>() and <a href="qsqlquerymodel.html#data" translate="no">data</a>().</p>
<!-- @@@setHeaderData -->
<!-- $$$setLastError[overload1]$$$setLastErrorconstQSqlError& -->
<h3 class="fn" translate="no" id="setLastError"><code class="details extra" translate="no">[protected]</code> <span class="type">void</span> QSqlQueryModel::<span class="name">setLastError</span>(const <span class="type"><a href="qsqlerror.html" translate="no">QSqlError</a></span> &amp;<i>error</i>)</h3>
<p>Protected function which allows derived classes to set the value of the last error that occurred on the database to <i translate="no">error</i>.</p>
<p><b>See also </b><a href="qsqlquerymodel.html#lastError" translate="no">lastError</a>().</p>
<!-- @@@setLastError -->
<!-- $$$setQuery[overload1]$$$setQueryQSqlQuery&& -->
<h3 class="fn" translate="no" id="setQuery"><code class="details extra" translate="no">[since 6.2]</code> <span class="type">void</span> QSqlQueryModel::<span class="name">setQuery</span>(<span class="type"><a href="qsqlquery.html" translate="no">QSqlQuery</a></span> &amp;&amp;<i>query</i>)</h3>
<p>Resets the model and sets the data provider to be the given <i translate="no">query</i>. Note that the query must be active and must not be isForwardOnly().</p>
<p><a href="qsqlquerymodel.html#lastError" translate="no">lastError</a>() can be used to retrieve verbose information if there was an error setting the query.</p>
<div class="admonition note">
<p><b>Note: </b>Calling setQuery() will remove any inserted columns.</p>
</div>
<p>This function was introduced in Qt 6.2.</p>
<p><b>See also </b><a href="qsqlquerymodel.html#query" translate="no">query</a>(), <a href="qsqlquery.html#isActive" translate="no">QSqlQuery::isActive</a>(), <a href="qsqlquery.html#setForwardOnly" translate="no">QSqlQuery::setForwardOnly</a>(), and <a href="qsqlquerymodel.html#lastError" translate="no">lastError</a>().</p>
<!-- @@@setQuery -->
<!-- $$$setQuery$$$setQueryconstQString&constQSqlDatabase& -->
<h3 class="fn" translate="no" id="setQuery-2"><span class="type">void</span> QSqlQueryModel::<span class="name">setQuery</span>(const <span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> &amp;<i>query</i>, const <span class="type"><a href="qsqldatabase.html" translate="no">QSqlDatabase</a></span> &amp;<i>db</i> = QSqlDatabase())</h3>
<p>This is an overloaded function.</p>
<p>Executes the query <i translate="no">query</i> for the given database connection <i translate="no">db</i>. If no database (or an invalid database) is specified, the default connection is used.</p>
<p><a href="qsqlquerymodel.html#lastError" translate="no">lastError</a>() can be used to retrieve verbose information if there was an error setting the query.</p>
<p>Example:</p>
<pre class="cpp" translate="no">
 <span class="type"><a href="qsqlquerymodel.html#QSqlQueryModel" translate="no">QSqlQueryModel</a></span> model;
 model<span class="operator">.</span>setQuery(<span class="string">&quot;select * from MyTable&quot;</span>);
 <span class="keyword">if</span> (model<span class="operator">.</span>lastError()<span class="operator">.</span>isValid())
     <a href="../qtcore/qtlogging.html#qDebug" translate="no">qDebug</a>() <span class="operator">&lt;</span><span class="operator">&lt;</span> model<span class="operator">.</span>lastError();
</pre>
<p><b>See also </b><a href="qsqlquerymodel.html#query" translate="no">query</a>(), <a href="qsqlquerymodel.html#queryChange" translate="no">queryChange</a>(), and <a href="qsqlquerymodel.html#lastError" translate="no">lastError</a>().</p>
<!-- @@@setQuery -->
</div>
        </div>
       </div>
   </div>
   </div>
</div>
<div class="footer">
   <p>
   <acronym title="Copyright">&copy;</acronym> 2024 <span translate="no">The Qt Company Ltd.</span>
   Documentation contributions included herein are the copyrights of
   their respective owners.<br/>    The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the <span translate="no">Free Software Foundation</span>.<br/>    <span translate="no">Qt</span> and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of <span translate="no">The Qt Company Ltd.</span> in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>
</div>
</body>
</html>
