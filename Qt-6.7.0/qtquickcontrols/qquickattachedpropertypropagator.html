<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<!-- qquickattachedpropertypropagator.cpp -->
  <meta name="description" content="The QQuickAttachedPropertyPropagator class provides a way to propagate attached properties.">
  <title>QQuickAttachedPropertyPropagator Class | Qt Quick Controls 6.7.0</title>
  <link rel="stylesheet" type="text/css" href="style/offline-simple.css" />
  <script type="text/javascript">
    document.getElementsByTagName("link").item(0).setAttribute("href", "style/offline.css");
    // loading style sheet breaks anchors that were jumped to before
    // so force jumping to anchor again
    setTimeout(function() {
        var anchor = location.hash;
        // need to jump to different anchor first (e.g. none)
        location.hash = "#";
        setTimeout(function() {
            location.hash = anchor;
        }, 0);
    }, 0);
  </script>
</head>
<body>
<div class="header" id="qtdocheader">
    <div class="main">
    <div class="main-rounded">
        <div class="navigationbar">
        <ul>
<li><a href="../qtdoc/index.html" translate="no">Qt 6.7</a></li>
<li><a href="qtquickcontrols-index.html" translate="no">Qt Quick Controls</a></li>
<li><a href="qtquickcontrols2-module.html" translate="no">C++ Classes</a></li>
<li>QQuickAttachedPropertyPropagator</li>
<li id="buildversion"><a href="qtquickcontrols-index.html" translate="no">Qt 6.7.0 Reference Documentation</a></li>
    </ul>
    </div>
</div>
<div class="content">
<div class="line">
<div class="content mainContent">
<div class="sidebar">
<div class="toc">
<h3 id="toc">Contents</h3>
<ul>
<li class="level1"><a href="#public-functions">Public Functions</a></li>
<li class="level1"><a href="#protected-functions">Protected Functions</a></li>
<li class="level1"><a href="#details">Detailed Description</a></li>
</ul>
</div>
<div class="sidebar-content" id="sidebar-content"></div></div>
<h1 class="title" translate="no">QQuickAttachedPropertyPropagator Class</h1>
<!-- $$$QQuickAttachedPropertyPropagator-brief -->
<p>The QQuickAttachedPropertyPropagator class provides a way to propagate attached properties. <a href="#details">More...</a></p>
<!-- @@@QQuickAttachedPropertyPropagator -->
<div class="table"><table class="alignedsummary" translate="no">
<tr><td class="memItemLeft rightAlign topAlign"> Header:</td><td class="memItemRight bottomAlign">  <span class="preprocessor">#include &lt;QQuickAttachedPropertyPropagator&gt;</span></td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> CMake:</td><td class="memItemRight bottomAlign"> find_package(Qt6 REQUIRED COMPONENTS QuickControls2) <br/>
target_link_libraries(mytarget PRIVATE Qt6::QuickControls2)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> qmake:</td><td class="memItemRight bottomAlign"> QT += quickcontrols2</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> Since:</td><td class="memItemRight bottomAlign"> Qt 6.5</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> Inherits:</td><td class="memItemRight bottomAlign"> <a href="../qtcore/qobject.html" translate="no">QObject</a></td></tr>
</table></div>
<ul>
<li><a href="qquickattachedpropertypropagator-members.html">List of all members, including inherited members</a></li>
</ul>
<h2 id="public-functions">Public Functions</h2>
<div class="table"><table class="alignedsummary" translate="no">
<tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="qquickattachedpropertypropagator.html#QQuickAttachedPropertyPropagator" translate="no">QQuickAttachedPropertyPropagator</a></b>(QObject *<i>parent</i> = nullptr)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> virtual </td><td class="memItemRight bottomAlign"><b><a href="qquickattachedpropertypropagator.html#dtor.QQuickAttachedPropertyPropagator" translate="no">~QQuickAttachedPropertyPropagator</a></b>()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QList&lt;QQuickAttachedPropertyPropagator *&gt; </td><td class="memItemRight bottomAlign"><b><a href="qquickattachedpropertypropagator.html#attachedChildren" translate="no">attachedChildren</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QQuickAttachedPropertyPropagator *</td><td class="memItemRight bottomAlign"><b><a href="qquickattachedpropertypropagator.html#attachedParent" translate="no">attachedParent</a></b>() const</td></tr>
</table></div>
<h2 id="protected-functions">Protected Functions</h2>
<div class="table"><table class="alignedsummary" translate="no">
<tr><td class="memItemLeft rightAlign topAlign"> virtual void </td><td class="memItemRight bottomAlign"><b><a href="qquickattachedpropertypropagator.html#attachedParentChange" translate="no">attachedParentChange</a></b>(QQuickAttachedPropertyPropagator *<i>newParent</i>, QQuickAttachedPropertyPropagator *<i>oldParent</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="qquickattachedpropertypropagator.html#initialize" translate="no">initialize</a></b>()</td></tr>
</table></div>
<!-- $$$QQuickAttachedPropertyPropagator-description -->
<div class="descr">
<h2 id="details">Detailed Description</h2>
<p>In QML, it is possible to <a href="../qtqml/qtqml-syntax-objectattributes.html#attached-properties-and-attached-signal-handlers" translate="no">attach properties and signal handlers</a> to objects. <a href="../qtqml/qtqml-cppintegration-definetypes.html#providing-attached-properties" translate="no">Providing Attached Properties</a> goes into more detail about how to expose your own C++ attached types.</p>
<p>QQuickAttachedPropertyPropagator provides an API to propagate attached properties from a parent object to its children, similar to <a href="qml-qtquick-controls-control.html#font-prop" translate="no">font</a> and <a href="../qtquick/qml-qtquick-item.html#palette-prop" translate="no">palette</a> propagation. It supports propagation through <a href="../qtquick/qml-qtquick-item.html" translate="no">items</a>, <a href="qml-qtquick-controls-popup.html" translate="no">popups</a>, and <a href="../qtquick/qml-qtquick-window.html" translate="no">windows</a>.</p>
<p>If propagation of properties is not important, consider using a <a href="../qtqml/qqmlengine.html#QML_SINGLETON" translate="no">C++</a> or <a href="../qtqml/qtqml-modules-qmldir.html#contents-of-a-module-definition-qmldir-file" translate="no">QML</a> singleton instead, as it is better suited for that use case, and is more efficient in that it only requires one <a href="../qtcore/qobject.html" translate="no">QObject</a>.</p>
<p>To use QQuickAttachedPropertyPropagator:</p>
<ul>
<li>Derive from it</li>
<li>Call <a href="qquickattachedpropertypropagator.html#initialize" translate="no">initialize</a>() in the constructor</li>
<li>Define set/inherit/propagate/reset functions for each property as needed</li>
<li>Reimplement <a href="qquickattachedpropertypropagator.html#attachedParentChange" translate="no">attachedParentChange</a>() to handle property inheritance</li>
</ul>
<p>For an example that demonstrates this in depth, see <a href="qtquickcontrols-attachedstyleproperties-example.html" translate="no">Qt Quick Controls - Attached Style Properties Example</a>.</p>
</div>
<p><b>See also </b><a href="qtquickcontrols-styles.html" translate="no">Styling Qt Quick Controls</a>.</p>
<!-- @@@QQuickAttachedPropertyPropagator -->
<div class="func">
<h2>Member Function Documentation</h2>
<!-- $$$QQuickAttachedPropertyPropagator[overload1]$$$QQuickAttachedPropertyPropagatorQObject* -->
<h3 class="fn" translate="no" id="QQuickAttachedPropertyPropagator"><code class="details extra" translate="no">[explicit]</code> QQuickAttachedPropertyPropagator::<span class="name">QQuickAttachedPropertyPropagator</span>(<span class="type"><a href="../qtcore/qobject.html#QObject" translate="no">QObject</a></span> *<i>parent</i> = nullptr)</h3>
<p>Constructs a QQuickAttachedPropertyPropagator with the given <i translate="no">parent</i>.</p>
<p>The <code translate="no">parent</code> will be used to find this object's <a href="qquickattachedpropertypropagator.html#attachedParent" translate="no">attached parent</a>.</p>
<p>Derived classes should call <a href="qquickattachedpropertypropagator.html#initialize" translate="no">initialize</a>() in their constructor.</p>
<!-- @@@QQuickAttachedPropertyPropagator -->
<!-- $$$~QQuickAttachedPropertyPropagator[overload1]$$$~QQuickAttachedPropertyPropagator -->
<h3 class="fn" translate="no" id="dtor.QQuickAttachedPropertyPropagator"><code class="details extra" translate="no">[virtual noexcept]</code> QQuickAttachedPropertyPropagator::<span class="name">~QQuickAttachedPropertyPropagator</span>()</h3>
<p>Destroys the <a href="qquickattachedpropertypropagator.html" translate="no">QQuickAttachedPropertyPropagator</a>.</p>
<!-- @@@~QQuickAttachedPropertyPropagator -->
<!-- $$$attachedChildren[overload1]$$$attachedChildren -->
<h3 class="fn" translate="no" id="attachedChildren"><span class="type"><a href="../qtcore/qlist.html" translate="no">QList</a></span>&lt;<span class="type"><a href="qquickattachedpropertypropagator.html#QQuickAttachedPropertyPropagator" translate="no">QQuickAttachedPropertyPropagator</a></span> *&gt; QQuickAttachedPropertyPropagator::<span class="name">attachedChildren</span>() const</h3>
<p>This function returns the attached children of this attached object.</p>
<p>The attached children are used when propagating property values:</p>
<pre class="cpp" translate="no">
 <span class="type">void</span> MyStyle<span class="operator">::</span>propagateTheme()
 {
     <span class="keyword">const</span> <span class="keyword">auto</span> styles <span class="operator">=</span> attachedChildren();
     <span class="keyword">for</span> (<span class="type"><a href="qquickattachedpropertypropagator.html#QQuickAttachedPropertyPropagator" translate="no">QQuickAttachedPropertyPropagator</a></span> <span class="operator">*</span>child : styles) {
         MyStyle <span class="operator">*</span>myStyle <span class="operator">=</span> qobject_cast<span class="operator">&lt;</span>MyStyle <span class="operator">*</span><span class="operator">&gt;</span>(child);
         <span class="keyword">if</span> (myStyle)
             myStyle<span class="operator">-</span><span class="operator">&gt;</span>inheritTheme(m_theme);
     }
 }
</pre>
<!-- @@@attachedChildren -->
<!-- $$$attachedParent[overload1]$$$attachedParent -->
<h3 class="fn" translate="no" id="attachedParent"><span class="type"><a href="qquickattachedpropertypropagator.html#QQuickAttachedPropertyPropagator" translate="no">QQuickAttachedPropertyPropagator</a></span> *QQuickAttachedPropertyPropagator::<span class="name">attachedParent</span>() const</h3>
<p>This function returns the attached parent of this attached object.</p>
<p>The attached parent is used when inheriting property values:</p>
<pre class="cpp" translate="no">
 <span class="type">void</span> MyStyle<span class="operator">::</span>resetTheme()
 {
     <span class="keyword">if</span> (<span class="operator">!</span>m_explicitTheme)
         <span class="keyword">return</span>;

     m_explicitTheme <span class="operator">=</span> <span class="keyword">false</span>;
     MyStyle <span class="operator">*</span>myStyle <span class="operator">=</span> qobject_cast<span class="operator">&lt;</span>MyStyle <span class="operator">*</span><span class="operator">&gt;</span>(attachedParent());
     inheritTheme(myStyle <span class="operator">?</span> myStyle<span class="operator">-</span><span class="operator">&gt;</span>theme() : globalTheme);
 }
</pre>
<!-- @@@attachedParent -->
<!-- $$$attachedParentChange[overload1]$$$attachedParentChangeQQuickAttachedPropertyPropagator*QQuickAttachedPropertyPropagator* -->
<h3 class="fn" translate="no" id="attachedParentChange"><code class="details extra" translate="no">[virtual protected]</code> <span class="type">void</span> QQuickAttachedPropertyPropagator::<span class="name">attachedParentChange</span>(<span class="type"><a href="qquickattachedpropertypropagator.html#QQuickAttachedPropertyPropagator" translate="no">QQuickAttachedPropertyPropagator</a></span> *<i>newParent</i>, <span class="type"><a href="qquickattachedpropertypropagator.html#QQuickAttachedPropertyPropagator" translate="no">QQuickAttachedPropertyPropagator</a></span> *<i>oldParent</i>)</h3>
<p>This function is called whenever the attached parent of this <a href="qquickattachedpropertypropagator.html" translate="no">QQuickAttachedPropertyPropagator</a> changes from <i translate="no">oldParent</i> to <i translate="no">newParent</i>.</p>
<p>Subclasses should reimplement this function to inherit attached properties from <code translate="no">newParent</code>.</p>
<pre class="cpp" translate="no">
 <span class="type">void</span> MyStyle<span class="operator">::</span>attachedParentChange(<span class="type"><a href="qquickattachedpropertypropagator.html#QQuickAttachedPropertyPropagator" translate="no">QQuickAttachedPropertyPropagator</a></span> <span class="operator">*</span>newParent<span class="operator">,</span> <span class="type"><a href="qquickattachedpropertypropagator.html#QQuickAttachedPropertyPropagator" translate="no">QQuickAttachedPropertyPropagator</a></span> <span class="operator">*</span>oldParent)
 {
     Q_UNUSED(oldParent);
     MyStyle <span class="operator">*</span>attachedParentStyle <span class="operator">=</span> qobject_cast<span class="operator">&lt;</span>MyStyle <span class="operator">*</span><span class="operator">&gt;</span>(newParent);
     <span class="keyword">if</span> (attachedParentStyle) {
         inheritTheme(attachedParentStyle<span class="operator">-</span><span class="operator">&gt;</span>theme());
         <span class="comment">// Do any other inheriting here...</span>
     }
 }
</pre>
<!-- @@@attachedParentChange -->
<!-- $$$initialize[overload1]$$$initialize -->
<h3 class="fn" translate="no" id="initialize"><code class="details extra" translate="no">[protected]</code> <span class="type">void</span> QQuickAttachedPropertyPropagator::<span class="name">initialize</span>()</h3>
<p>Finds and sets the attached parent for this attached object, and then does the same for its children. This must be called upon construction of the attached object in order for propagation to work.</p>
<p>It can be useful to read global/default values before calling this function. For example, before calling <code translate="no">initialize()</code>, the <a href="qtquickcontrols-imagine.html" translate="no">Imagine</a> style checks a static &quot;globalsInitialized&quot; flag to see if it should read default values from <a href="../qtcore/qsettings.html" translate="no">QSettings</a>. The values from that file form the basis for any attached property values that have not been explicitly set.</p>
<pre class="cpp" translate="no">
 MyStyle<span class="operator">::</span>MyStyle(<span class="type"><a href="../qtcore/qobject.html#QObject" translate="no">QObject</a></span> <span class="operator">*</span>parent)
     : <span class="type"><a href="qquickattachedpropertypropagator.html#QQuickAttachedPropertyPropagator" translate="no">QQuickAttachedPropertyPropagator</a></span>(parent)
     <span class="operator">,</span> m_theme(globalTheme)
 {
     <span class="comment">// A static function could be called here that reads globalTheme from a</span>
     <span class="comment">// settings file once at startup. That value would override the global</span>
     <span class="comment">// value. This is similar to what the Imagine and Material styles do, for</span>
     <span class="comment">// example.</span>

     initialize();
 }
</pre>
<!-- @@@initialize -->
</div>
        </div>
       </div>
   </div>
   </div>
</div>
<div class="footer">
   <p>
   <acronym title="Copyright">&copy;</acronym> 2024 <span translate="no">The Qt Company Ltd.</span>
   Documentation contributions included herein are the copyrights of
   their respective owners.<br/>    The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the <span translate="no">Free Software Foundation</span>.<br/>    <span translate="no">Qt</span> and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of <span translate="no">The Qt Company Ltd.</span> in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>
</div>
</body>
</html>
