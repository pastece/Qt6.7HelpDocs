<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<!-- androiddeployqt.qdoc -->
  <meta name="description" content="An overview of the androiddeployqt tool and how to use it.">
  <title>The androiddeployqt Tool | Qt Core 6.7.0</title>
  <link rel="stylesheet" type="text/css" href="style/offline-simple.css" />
  <script type="text/javascript">
    document.getElementsByTagName("link").item(0).setAttribute("href", "style/offline.css");
    // loading style sheet breaks anchors that were jumped to before
    // so force jumping to anchor again
    setTimeout(function() {
        var anchor = location.hash;
        // need to jump to different anchor first (e.g. none)
        location.hash = "#";
        setTimeout(function() {
            location.hash = anchor;
        }, 0);
    }, 0);
  </script>
</head>
<body>
<div class="header" id="qtdocheader">
    <div class="main">
    <div class="main-rounded">
        <div class="navigationbar">
        <ul>
<li><a href="../qtdoc/index.html" translate="no">Qt 6.7</a></li>
<li><a href="qtcore-index.html" translate="no">Qt Core</a></li>
<li>The androiddeployqt Tool</li>
<li id="buildversion"><a href="qtcore-index.html" translate="no">Qt 6.7.0 Reference Documentation</a></li>
    </ul>
    </div>
</div>
<div class="content">
<div class="line">
<div class="content mainContent">
<div class="sidebar">
<div class="toc">
<h3 id="toc">Contents</h3>
<ul>
<li class="level1"><a href="#prerequisites-before-running-androiddeployqt">Prerequisites Before Running androiddeployqt</a></li>
<li class="level1"><a href="#command-line-arguments">Command Line Arguments</a></li>
<li class="level1"><a href="#dependencies-detection">Dependencies Detection</a></li>
<li class="level1"><a href="#deployment-in-qt-creator">Deployment in Qt Creator</a></li>
</ul>
</div>
<div class="sidebar-content" id="sidebar-content"></div></div>
<h1 class="title">The androiddeployqt Tool</h1>
<!-- $$$android-deploy-qt-tool.html-description -->
<div class="descr" id="details">
<span id="androiddeployqt"></span><p>Building an Android package involves many steps, so Qt comes with a tool which handles the work for you. The steps handled by the androiddeployqt tool are described in <a href="../qtdoc/deployment-android.html" translate="no">Deploying an Application on Android</a>.</p>
<h2 id="prerequisites-before-running-androiddeployqt">Prerequisites Before Running androiddeployqt</h2>
<p>Before running the tool manually, you need to configure your project with <code translate="no">CMake</code> or <code translate="no">qmake</code> to generate <code translate="no">Makefiles</code> and a <code translate="no">JSON</code> file (i.e. <code translate="no">android-&lt;target_name&gt;-deployment-settings.json</code>) containing important settings used by <code translate="no">androiddeployqt</code>.</p>
<div class="admonition note">
<p><b>Note: </b>It is not recommended to modify the androiddeployqt JSON file.</p>
</div>
<p>To prepare the environment for androiddeployqt, configure your project in a separate directory than your source directory. For more information on configuring your project, see <a href="../qtdoc/android-building-projects-from-commandline.html" translate="no">Building Qt for Android Projects from Command Line</a>.</p>
<h2 id="command-line-arguments">Command Line Arguments</h2>
<p>The only required command line arguments when running the tool are <code translate="no">--input</code> and <code translate="no">--output</code>. Other command line arguments are optional but useful. The list below is available by passing the <code translate="no">--help</code> argument to androiddeployqt.</p>
<pre class="cpp" translate="no">
 Syntax: androiddeployqt --output &lt;destination&gt; [options]

 Creates an Android package in the build directory &lt;destination&gt; and
 builds it into an .apk file.

 Optional arguments:
     --input &lt;inputfile&gt;: Reads &lt;inputfile&gt; for options generated by
        qmake. A default file name based on the current working
        directory will be used if nothing else is specified.

     --deployment &lt;mechanism&gt;: Supported deployment mechanisms:
        bundled (default): Includes Qt files in stand-alone package.
        unbundled: Assumes native libraries are present on the device
        and does not include them in the APK.

     --aab: Build an Android App Bundle.

     --no-build: Do not build the package, it is useful to just install
        a package previously built.

     --install: Installs apk to device/emulator. By default this step is
        not taken. If the application has previously been installed on
        the device, it will be uninstalled first.

     --reinstall: Installs apk to device/emulator. By default this step
        is not taken. If the application has previously been installed on
        the device, it will be overwritten, but its data will be left
        intact.

     --device [device ID]: Use specified device for deployment. Default
        is the device selected by default by adb.

     --android-platform &lt;platform&gt;: Builds against the given android
        platform. By default, the highest available version will be
        used.

     --release: Builds a package ready for release. By default, the
        package will be signed with a debug key.

     --sign &lt;url/to/keystore&gt; &lt;alias&gt;: Signs the package with the
        specified keystore, alias and store password.
        Optional arguments for use with signing:
          --storepass &lt;password&gt;: Keystore password.
          --storetype &lt;type&gt;: Keystore type.
          --keypass &lt;password&gt;: Password for private key (if different
            from keystore password.)
          --sigfile &lt;file&gt;: Name of .SF/.DSA file.
          --digestalg &lt;name&gt;: Name of digest algorithm. Default is
            &quot;</span>SHA<span class="operator">-</span><span class="number">256</span><span class="string">&quot;.
          --sigalg &lt;name&gt;: Name of signature algorithm. Default is
            &quot;</span>SHA256withRSA<span class="string">&quot;.
          --tsa &lt;url&gt;: Location of the Time Stamping Authority.
          --tsacert &lt;alias&gt;: Public key certificate for TSA.
          --internalsf: Include the .SF file inside the signature block.
          --sectionsonly: Don't compute hash of entire manifest.
          --protected: Keystore has protected authentication path.
          --jarsigner: Deprecated, ignored.

        NOTE: To conceal the keystore information, the environment variables
          QT_ANDROID_KEYSTORE_PATH, and QT_ANDROID_KEYSTORE_ALIAS are used to
          set the values keysotore and alias respectively.
          Also the environment variables QT_ANDROID_KEYSTORE_STORE_PASS,
          and QT_ANDROID_KEYSTORE_KEY_PASS are used to set the store and key
          passwords respectively. This option needs only the --sign parameter.

     --jdk &lt;path/to/jdk&gt;: Used to find the jarsigner tool when used
        in combination with the --release argument. By default,
        an attempt is made to detect the tool using the JAVA_HOME and
        PATH environment variables, in that order.

     --qml-import-paths: Specify additional search paths for QML
        imports.

     --verbose: Prints out information during processing.

     --no-generated-assets-cache: Do not pregenerate the entry list for
        the assets file engine.

     --aux-mode: Operate in auxiliary mode. This will only copy the
        dependencies into the build directory and update the XML templates.
        The project will not be built or installed.

     --apk &lt;path/where/to/copy/the/apk&gt;: Path where to copy the built apk.

     --qml-importscanner-binary &lt;path/to/qmlimportscanner&gt;: Override the
        default qmlimportscanner binary path. By default the
        qmlimportscanner binary is located using the Qt directory
        specified in the input file.

     --depfile &lt;path/to/depfile&gt;: Output a dependency file.

     --builddir &lt;path/to/build/directory&gt;: build directory. Necessary when
        generating a depfile because ninja requires relative paths.

     --no-rcc-bundle-cleanup: skip cleaning rcc bundle directory after
        running androiddeployqt. This option simplifies debugging of
        the resource bundle content, but it should not be used when deploying
        a project, since it litters the 'assets' directory.

     --copy-dependencies-only: resolve application dependencies and stop
        deploying process after all libraries and resources that the
        application depends on have been copied.

     --help: Displays this information.
</pre>
<p>With a <code translate="no">project_name</code>, to build the application package with <code translate="no">androiddeployqt</code> without deploying it the device, run the following:</p>
<pre class="cpp plain" translate="no">
 androiddeployqt --input &lt;build_dir&gt;/android-project_name-deployment-settings.json \
                 --output &lt;build_dir&gt;/android-build
</pre>
<p>To build and deploy the package to the device:</p>
<pre class="cpp plain" translate="no">
 androiddeployqt --input &lt;build_dir&gt;/android-project_name-deployment-settings.json \
                 --output &lt;build_dir&gt;/android-build --install --device &lt;device_serial_id&gt;
</pre>
<h2 id="dependencies-detection">Dependencies Detection</h2>
<p>Qt comes with a number of plugins which are loaded at run-time when they are needed. These can handle anything from connecting to SQL databases to loading specific image formats. Detecting plugin dependencies is impossible as the plugins are loaded at run-time, but androiddeployqt tries to guess such dependencies based on the Qt dependencies of your application. If the plugin has any Qt dependencies which are not also dependencies of your application, it will not be included by default. For instance, in order to ensure that the SVG image format plugin is included, you will need to add <a href="../qtsvg/qtsvg-index.html" translate="no">Qt SVG</a> module to your project for it to become a dependency of your application:</p>
<pre class="cpp plain" translate="no">
 find_package(Qt6 REQUIRED COMPONENTS Svg)
 ...
 target_link_libraries(target_name PRIVATE Qt6::Svg)
</pre>
<p>If you are wondering why a particular plugin is not included automatically, you can run androiddeployqt with the <code translate="no">--verbose</code> option to get the list of missing dependencies for each excluded plugin. You can achieve the same in Qt Creator by ticking the <b translate="no">Verbose output</b> check box in the <b translate="no">Projects</b> &gt; <b translate="no">Build Steps</b> &gt; <b translate="no">Build Android APK</b> &gt; <b translate="no">Advanced Actions</b>.</p>
<p>It's also possible to manually specify the dependencies of your application. For more information, see <a href="cmake-target-property-qt-android-deployment-dependencies.html" translate="no">QT_ANDROID_DEPLOYMENT_DEPENDENCIES</a> CMake variable.</p>
<div class="admonition note">
<p><b>Note: </b>androiddeployqt scans the QML files of the project to collect the QML imports. However, if you are loading QML code as a <a href="qstring.html" translate="no">QString</a> from C++ at runtime, that might not work properly because androiddeployqt won't be aware of it at deploy time. To remedy that, you can add a dummy QML file that imports such QML modules that are referenced at runtime.</p>
</div>
<h2 id="deployment-in-qt-creator">Deployment in Qt Creator</h2>
<p>Qt Creator uses <code translate="no">androiddeployqt</code> under the hood, and provides easy and intuitive user interfaces to specify various options. For more information, see <a href="https://doc.qt.io/qtcreator/creator-deploying-android.html" translate="no">Qt Creator: Deploying Applications to Android Devices</a>.</p>
<p>For more information about customizing and deploying a Qt for Android app, see <a href="../qtdoc/deployment-android.html" translate="no">Deploying an Application on Android</a>.</p>
</div>
<!-- @@@android-deploy-qt-tool.html -->
        </div>
       </div>
   </div>
   </div>
</div>
<div class="footer">
   <p>
   <acronym title="Copyright">&copy;</acronym> 2024 <span translate="no">The Qt Company Ltd.</span>
   Documentation contributions included herein are the copyrights of
   their respective owners.<br/>    The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the <span translate="no">Free Software Foundation</span>.<br/>    <span translate="no">Qt</span> and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of <span translate="no">The Qt Company Ltd.</span> in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>
</div>
</body>
</html>
