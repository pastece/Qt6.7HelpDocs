<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<!-- qxmlstreambookmarks.qdoc -->
  <meta name="description" content="Demonstrates how to read and write XBEL files.">
  <title>QXmlStream Bookmarks Example | Qt Core 6.7.0</title>
  <link rel="stylesheet" type="text/css" href="style/offline-simple.css" />
  <script type="text/javascript">
    document.getElementsByTagName("link").item(0).setAttribute("href", "style/offline.css");
    // loading style sheet breaks anchors that were jumped to before
    // so force jumping to anchor again
    setTimeout(function() {
        var anchor = location.hash;
        // need to jump to different anchor first (e.g. none)
        location.hash = "#";
        setTimeout(function() {
            location.hash = anchor;
        }, 0);
    }, 0);
  </script>
</head>
<body>
<div class="header" id="qtdocheader">
    <div class="main">
    <div class="main-rounded">
        <div class="navigationbar">
        <ul>
<li><a href="../qtdoc/index.html" translate="no">Qt 6.7</a></li>
<li><a href="qtcore-index.html" translate="no">Qt Core</a></li>
<li>QXmlStream Bookmarks Example</li>
<li id="buildversion"><a href="qtcore-index.html" translate="no">Qt 6.7.0 Reference Documentation</a></li>
    </ul>
    </div>
</div>
<div class="content">
<div class="line">
<div class="content mainContent">
<div class="sidebar">
<div class="toc">
<h3 id="toc">Contents</h3>
<ul>
<li class="level1"><a href="#xbelwriter-class-definition">XbelWriter Class Definition</a></li>
<li class="level1"><a href="#xbelwriter-class-implementation">XbelWriter Class Implementation</a></li>
<li class="level1"><a href="#xbelreader-class-definition">XbelReader Class Definition</a></li>
<li class="level1"><a href="#xbelreader-class-implementation">XbelReader Class Implementation</a></li>
<li class="level1"><a href="#mainwindow-class-definition">MainWindow Class Definition</a></li>
<li class="level1"><a href="#mainwindow-class-implementation">MainWindow Class Implementation</a></li>
<li class="level1"><a href="#main-function"><code translate="no">main()</code> Function</a></li>
</ul>
</div>
<div class="sidebar-content" id="sidebar-content"></div></div>
<h1 class="title">QXmlStream Bookmarks Example</h1>
<!-- $$$serialization/streambookmarks-brief -->
<p>Demonstrates how to read and write XBEL files.</p>
<!-- @@@serialization/streambookmarks -->
<!-- $$$serialization/streambookmarks-description -->
<div class="descr" id="details">
<p>The QXmlStream Bookmarks example provides a viewer for XML Bookmark Exchange Language (XBEL) files. It can read bookmarks using Qt's <a href="qxmlstreamreader.html" translate="no">QXmlStreamReader</a> and write them back out again using <a href="qxmlstreamwriter.html" translate="no">QXmlStreamWriter</a>. As this example aims to show how to use these reader and writer types, it provides no means to open a bookmark, add a new one, or merge two bookmark files, and only minimal scope for editing bookmarks. None the less, it could surely be extended with such features, if desired.</p>
<p class="centerAlign"><img src="images/screenshot.png" alt="" /></p><h4 id="xbelwriter-class-definition">XbelWriter Class Definition</h4>
<p>The <code translate="no">XbelWriter</code> class takes a <a href="../qtwidgets/qtreewidget.html" translate="no">tree widget</a> describing a hierarchy of folders containing bookmarks. Its <code translate="no">writeFile()</code> provides the means to write out this hierarchy, in XBEL format, to a given output device.</p>
<p>Internally, it records the tree widget it was given and packages a private instance of <a href="qxmlstreamwriter.html" translate="no">QXmlStreamWriter</a>, which provides it with the means to stream XML. It has an internal <code translate="no">writeItem()</code> to write each item in its tree.</p>
<pre class="cpp" translate="no">
 <span class="keyword">class</span> XbelWriter
 {
 <span class="keyword">public</span>:
     <span class="keyword">explicit</span> XbelWriter(<span class="keyword">const</span> <span class="type"><a href="../qtwidgets/qtreewidget.html" translate="no">QTreeWidget</a></span> <span class="operator">*</span>treeWidget);
     <span class="type">bool</span> writeFile(<span class="type"><a href="qiodevice.html" translate="no">QIODevice</a></span> <span class="operator">*</span>device);

 <span class="keyword">private</span>:
     <span class="type">void</span> writeItem(<span class="keyword">const</span> <span class="type"><a href="../qtwidgets/qtreewidgetitem.html" translate="no">QTreeWidgetItem</a></span> <span class="operator">*</span>item);
     <span class="type"><a href="qxmlstreamwriter.html" translate="no">QXmlStreamWriter</a></span> xml;
     <span class="keyword">const</span> <span class="type"><a href="../qtwidgets/qtreewidget.html" translate="no">QTreeWidget</a></span> <span class="operator">*</span>treeWidget;
 };
</pre>
<h4 id="xbelwriter-class-implementation">XbelWriter Class Implementation</h4>
<p>The <code translate="no">XbelWriter</code> constructor accepts the <i translate="no">treeWidget</i> it will describe. It stores that and enables <a href="qxmlstreamwriter.html" translate="no">QXmlStreamWriter</a>'s auto-formatting property. This last splits the data into several lines, with indentation to indicate the structure of the tree, which makes the XML output easier to read.</p>
<pre class="cpp" translate="no">
 XbelWriter<span class="operator">::</span>XbelWriter(<span class="keyword">const</span> <span class="type"><a href="../qtwidgets/qtreewidget.html" translate="no">QTreeWidget</a></span> <span class="operator">*</span>treeWidget) : treeWidget(treeWidget)
 {
     xml<span class="operator">.</span>setAutoFormatting(<span class="keyword">true</span>);
 }
</pre>
<p>The <code translate="no">writeFile()</code> function accepts a <a href="qiodevice.html" translate="no">QIODevice</a> object and directs its <a href="qxmlstreamwriter.html" translate="no">QXmlStreamWriter</a> member to write to this device, using <code translate="no">setDevice()</code>. This function then writes the document type definition(DTD), the start element, the version, and delegates writing of each of the <code translate="no">treeWidget</code>'s top-level items to <code translate="no">writeItem()</code>. Finally, it closes the document and returns.</p>
<pre class="cpp" translate="no">
 <span class="type">bool</span> XbelWriter<span class="operator">::</span>writeFile(<span class="type"><a href="qiodevice.html" translate="no">QIODevice</a></span> <span class="operator">*</span>device)
 {
     xml<span class="operator">.</span>setDevice(device);

     xml<span class="operator">.</span>writeStartDocument();
     xml<span class="operator">.</span>writeDTD(<span class="string">&quot;&lt;!DOCTYPE xbel&gt;&quot;</span>_L1);
     xml<span class="operator">.</span>writeStartElement(<span class="string">&quot;xbel&quot;</span>_L1);
     xml<span class="operator">.</span>writeAttribute(<span class="string">&quot;version&quot;</span>_L1<span class="operator">,</span> <span class="string">&quot;1.0&quot;</span>_L1);
     <span class="keyword">for</span> (<span class="type">int</span> i <span class="operator">=</span> <span class="number">0</span>; i <span class="operator">&lt;</span> treeWidget<span class="operator">-</span><span class="operator">&gt;</span>topLevelItemCount(); <span class="operator">+</span><span class="operator">+</span>i)
         writeItem(treeWidget<span class="operator">-</span><span class="operator">&gt;</span>topLevelItem(i));

     xml<span class="operator">.</span>writeEndDocument();
     <span class="keyword">return</span> <span class="keyword">true</span>;
 }
</pre>
<p>The <code translate="no">writeItem()</code> function accepts a <a href="../qtwidgets/qtreewidgetitem.html" translate="no">QTreeWidgetItem</a> object and writes to its XML stream a representation of the object, which depends on its <code translate="no">UserRole</code>, which can be one of a <code translate="no">&quot;folder&quot;</code>, <code translate="no">&quot;bookmark&quot;</code>, or <code translate="no">&quot;separator&quot;</code>. Within each folder, it calls itself recursively on each child item, to recursively include a representation of each child within the folder's XML element.</p>
<pre class="cpp" translate="no">
 <span class="type">void</span> XbelWriter<span class="operator">::</span>writeItem(<span class="keyword">const</span> <span class="type"><a href="../qtwidgets/qtreewidgetitem.html" translate="no">QTreeWidgetItem</a></span> <span class="operator">*</span>item)
 {
     <span class="type"><a href="qstring.html" translate="no">QString</a></span> tagName <span class="operator">=</span> item<span class="operator">-</span><span class="operator">&gt;</span>data(<span class="number">0</span><span class="operator">,</span> <span class="type"><a href="qt.html" translate="no">Qt</a></span><span class="operator">::</span>UserRole)<span class="operator">.</span>toString();
     <span class="keyword">if</span> (tagName <span class="operator">=</span><span class="operator">=</span> <span class="string">&quot;folder&quot;</span>_L1) {
         <span class="type">bool</span> folded <span class="operator">=</span> <span class="operator">!</span>item<span class="operator">-</span><span class="operator">&gt;</span>isExpanded();
         xml<span class="operator">.</span>writeStartElement(tagName);
         xml<span class="operator">.</span>writeAttribute(<span class="string">&quot;folded&quot;</span>_L1<span class="operator">,</span> folded <span class="operator">?</span> <span class="string">&quot;yes&quot;</span>_L1 : <span class="string">&quot;no&quot;</span>_L1);
         xml<span class="operator">.</span>writeTextElement(<span class="string">&quot;title&quot;</span>_L1<span class="operator">,</span> item<span class="operator">-</span><span class="operator">&gt;</span>text(<span class="number">0</span>));
         <span class="keyword">for</span> (<span class="type">int</span> i <span class="operator">=</span> <span class="number">0</span>; i <span class="operator">&lt;</span> item<span class="operator">-</span><span class="operator">&gt;</span>childCount(); <span class="operator">+</span><span class="operator">+</span>i)
             writeItem(item<span class="operator">-</span><span class="operator">&gt;</span>child(i));
         xml<span class="operator">.</span>writeEndElement();
     } <span class="keyword">else</span> <span class="keyword">if</span> (tagName <span class="operator">=</span><span class="operator">=</span> <span class="string">&quot;bookmark&quot;</span>_L1) {
         xml<span class="operator">.</span>writeStartElement(tagName);
         <span class="keyword">if</span> (<span class="operator">!</span>item<span class="operator">-</span><span class="operator">&gt;</span>text(<span class="number">1</span>)<span class="operator">.</span>isEmpty())
             xml<span class="operator">.</span>writeAttribute(<span class="string">&quot;href&quot;</span>_L1<span class="operator">,</span> item<span class="operator">-</span><span class="operator">&gt;</span>text(<span class="number">1</span>));
         xml<span class="operator">.</span>writeTextElement(<span class="string">&quot;title&quot;</span>_L1<span class="operator">,</span> item<span class="operator">-</span><span class="operator">&gt;</span>text(<span class="number">0</span>));
         xml<span class="operator">.</span>writeEndElement();
     } <span class="keyword">else</span> <span class="keyword">if</span> (tagName <span class="operator">=</span><span class="operator">=</span> <span class="string">&quot;separator&quot;</span>_L1) {
         xml<span class="operator">.</span>writeEmptyElement(tagName);
     }
 }
</pre>
<h4 id="xbelreader-class-definition">XbelReader Class Definition</h4>
<p>The <code translate="no">XbelReader</code> takes a <a href="../qtwidgets/qtreewidget.html" translate="no">tree widget</a> to populate with items describing a bookmark hierarchy. It supports reading XBEL data from a <a href="qiodevice.html" translate="no">QIODevice</a> as a source of these items. If parsing of the XBEL data fails, it can report what went wrong.</p>
<p>Internally, it records the <a href="../qtwidgets/qtreewidget.html" translate="no">QTreeWidget</a> that it will populate and packages an instance of <a href="qxmlstreamreader.html" translate="no">QXmlStreamReader</a>, the companion class to <a href="qxmlstreamwriter.html" translate="no">QXmlStreamWriter</a>, which it will use to read XBEL data.</p>
<pre class="cpp" translate="no">
 <span class="keyword">class</span> XbelReader
 {
 <span class="keyword">public</span>:
     XbelReader(<span class="type"><a href="../qtwidgets/qtreewidget.html" translate="no">QTreeWidget</a></span> <span class="operator">*</span>treeWidget);

     <span class="type">bool</span> read(<span class="type"><a href="qiodevice.html" translate="no">QIODevice</a></span> <span class="operator">*</span>device);
     <span class="type"><a href="qstring.html" translate="no">QString</a></span> errorString() <span class="keyword">const</span>;

 <span class="keyword">private</span>:
     <span class="type">void</span> readXBEL();
     <span class="type">void</span> readTitle(<span class="type"><a href="../qtwidgets/qtreewidgetitem.html" translate="no">QTreeWidgetItem</a></span> <span class="operator">*</span>item);
     <span class="type">void</span> readSeparator(<span class="type"><a href="../qtwidgets/qtreewidgetitem.html" translate="no">QTreeWidgetItem</a></span> <span class="operator">*</span>item);
     <span class="type">void</span> readFolder(<span class="type"><a href="../qtwidgets/qtreewidgetitem.html" translate="no">QTreeWidgetItem</a></span> <span class="operator">*</span>item);
     <span class="type">void</span> readBookmark(<span class="type"><a href="../qtwidgets/qtreewidgetitem.html" translate="no">QTreeWidgetItem</a></span> <span class="operator">*</span>item);

     <span class="type"><a href="../qtwidgets/qtreewidgetitem.html" translate="no">QTreeWidgetItem</a></span> <span class="operator">*</span>createChildItem(<span class="type"><a href="../qtwidgets/qtreewidgetitem.html" translate="no">QTreeWidgetItem</a></span> <span class="operator">*</span>item);

     <span class="type"><a href="qxmlstreamreader.html" translate="no">QXmlStreamReader</a></span> xml;
     <span class="type"><a href="../qtwidgets/qtreewidget.html" translate="no">QTreeWidget</a></span> <span class="operator">*</span>treeWidget;

     <span class="type"><a href="../qtgui/qicon.html" translate="no">QIcon</a></span> folderIcon;
     <span class="type"><a href="../qtgui/qicon.html" translate="no">QIcon</a></span> bookmarkIcon;
 };
</pre>
<h4 id="xbelreader-class-implementation">XbelReader Class Implementation</h4>
<p>Since the XBEL reader is only concerned with reading XML elements, it makes extensive use of the <a href="qxmlstreamreader.html#readNextStartElement" translate="no">readNextStartElement</a>() convenience function.</p>
<p>The <code translate="no">XbelReader</code> constructor requires a <a href="../qtwidgets/qtreewidget.html" translate="no">QTreeWidget</a> that it will populate. It populates the tree widget's style with suitable icons: a folder icon that changes form to indicate whether each folder as open or closed; and a standard file icon for the individual bookmarks within those folders.</p>
<pre class="cpp" translate="no">
 XbelReader<span class="operator">::</span>XbelReader(<span class="type"><a href="../qtwidgets/qtreewidget.html" translate="no">QTreeWidget</a></span> <span class="operator">*</span>treeWidget) : treeWidget(treeWidget)
 {
     <span class="type"><a href="../qtwidgets/qstyle.html" translate="no">QStyle</a></span> <span class="operator">*</span>style <span class="operator">=</span> treeWidget<span class="operator">-</span><span class="operator">&gt;</span>style();

     folderIcon<span class="operator">.</span>addPixmap(style<span class="operator">-</span><span class="operator">&gt;</span>standardPixmap(<span class="type"><a href="../qtwidgets/qstyle.html" translate="no">QStyle</a></span><span class="operator">::</span>SP_DirClosedIcon)<span class="operator">,</span> <span class="type"><a href="../qtgui/qicon.html" translate="no">QIcon</a></span><span class="operator">::</span>Normal<span class="operator">,</span>
                          <span class="type"><a href="../qtgui/qicon.html" translate="no">QIcon</a></span><span class="operator">::</span>Off);
     folderIcon<span class="operator">.</span>addPixmap(style<span class="operator">-</span><span class="operator">&gt;</span>standardPixmap(<span class="type"><a href="../qtwidgets/qstyle.html" translate="no">QStyle</a></span><span class="operator">::</span>SP_DirOpenIcon)<span class="operator">,</span> <span class="type"><a href="../qtgui/qicon.html" translate="no">QIcon</a></span><span class="operator">::</span>Normal<span class="operator">,</span> <span class="type"><a href="../qtgui/qicon.html" translate="no">QIcon</a></span><span class="operator">::</span>On);
     bookmarkIcon<span class="operator">.</span>addPixmap(style<span class="operator">-</span><span class="operator">&gt;</span>standardPixmap(<span class="type"><a href="../qtwidgets/qstyle.html" translate="no">QStyle</a></span><span class="operator">::</span>SP_FileIcon));
 }
</pre>
<p>The <code translate="no">read()</code> function accepts a <a href="qiodevice.html" translate="no">QIODevice</a>. It directs its <a href="qxmlstreamreader.html" translate="no">QXmlStreamReader</a> member to read content from that device. Note that the XML input must be well-formed to be accepted by <a href="qxmlstreamreader.html" translate="no">QXmlStreamReader</a>. First it reads the outer structure and verifies the content is an XBEL 1.0 file; if it is, <code translate="no">read()</code> delegates the actual reading of content to the internal <code translate="no">readXBEL()</code>.</p>
<p>Otherwise, the <a href="qxmlstreamreader.html#raiseError" translate="no">raiseError</a>() function is used to record an error message. The reader itself may also do the same if it encounters errors in the input. When <code translate="no">read()</code> has finished, it returns true if there were no errors.</p>
<pre class="cpp" translate="no">
 <span class="type">bool</span> XbelReader<span class="operator">::</span>read(<span class="type"><a href="qiodevice.html" translate="no">QIODevice</a></span> <span class="operator">*</span>device)
 {
     xml<span class="operator">.</span>setDevice(device);

     <span class="keyword">if</span> (xml<span class="operator">.</span>readNextStartElement()) {
         <span class="keyword">if</span> (xml<span class="operator">.</span>name() <span class="operator">=</span><span class="operator">=</span> <span class="string">&quot;xbel&quot;</span>_L1 <span class="operator">&amp;</span><span class="operator">&amp;</span> xml<span class="operator">.</span>attributes()<span class="operator">.</span>value(<span class="string">&quot;version&quot;</span>_L1) <span class="operator">=</span><span class="operator">=</span> <span class="string">&quot;1.0&quot;</span>_L1)
             readXBEL();
         <span class="keyword">else</span>
             xml<span class="operator">.</span>raiseError(<span class="type"><a href="qobject.html" translate="no">QObject</a></span><span class="operator">::</span>tr(<span class="string">&quot;The file is not an XBEL version 1.0 file.&quot;</span>));
     }

     <span class="keyword">return</span> <span class="operator">!</span>xml<span class="operator">.</span>error();
 }
</pre>
<p>If <code translate="no">read()</code> returns false, its caller can obtain a description of the error, complete with line and column number within the stream, by calling the <code translate="no">errorString()</code> function.</p>
<pre class="cpp" translate="no">
 <span class="type"><a href="qstring.html" translate="no">QString</a></span> XbelReader<span class="operator">::</span>errorString() <span class="keyword">const</span>
 {
     <span class="keyword">return</span> <span class="type"><a href="qobject.html" translate="no">QObject</a></span><span class="operator">::</span>tr(<span class="string">&quot;%1\nLine %2, column %3&quot;</span>)
             <span class="operator">.</span>arg(xml<span class="operator">.</span>errorString())
             <span class="operator">.</span>arg(xml<span class="operator">.</span>lineNumber())
             <span class="operator">.</span>arg(xml<span class="operator">.</span>columnNumber());
 }
</pre>
<p>The <code translate="no">readXBEL()</code> function reads the name of a startElement and calls the appropriate function to read it, depending on whether if its tag name is <code translate="no">&quot;folder&quot;</code>, <code translate="no">&quot;bookmark&quot;</code> or <code translate="no">&quot;separator&quot;</code>. Any other elements encountered are skipped. The function starts with a precondition, verifying that the XML reader has just opened an <code translate="no">&quot;xbel&quot;</code> element.</p>
<pre class="cpp" translate="no">
 <span class="type">void</span> XbelReader<span class="operator">::</span>readXBEL()
 {
     Q_ASSERT(xml<span class="operator">.</span>isStartElement() <span class="operator">&amp;</span><span class="operator">&amp;</span> xml<span class="operator">.</span>name() <span class="operator">=</span><span class="operator">=</span> <span class="string">&quot;xbel&quot;</span>_L1);

     <span class="keyword">while</span> (xml<span class="operator">.</span>readNextStartElement()) {
         <span class="keyword">if</span> (xml<span class="operator">.</span>name() <span class="operator">=</span><span class="operator">=</span> <span class="string">&quot;folder&quot;</span>_L1)
             readFolder(nullptr);
         <span class="keyword">else</span> <span class="keyword">if</span> (xml<span class="operator">.</span>name() <span class="operator">=</span><span class="operator">=</span> <span class="string">&quot;bookmark&quot;</span>_L1)
             readBookmark(nullptr);
         <span class="keyword">else</span> <span class="keyword">if</span> (xml<span class="operator">.</span>name() <span class="operator">=</span><span class="operator">=</span> <span class="string">&quot;separator&quot;</span>_L1)
             readSeparator(nullptr);
         <span class="keyword">else</span>
             xml<span class="operator">.</span>skipCurrentElement();
     }
 }
</pre>
<p>The <code translate="no">readBookmark()</code> function creates a new editable item representing a single bookmark. It records the XML <code translate="no">&quot;href&quot;</code> attribute of the current element as second column text of the item and provisionally sets its first column text to <code translate="no">&quot;Unknown title&quot;</code> before scanning the rest of the element for a title element to over-ride that, skipping any unrecognized child elements.</p>
<pre class="cpp" translate="no">
 <span class="type">void</span> XbelReader<span class="operator">::</span>readTitle(<span class="type"><a href="../qtwidgets/qtreewidgetitem.html" translate="no">QTreeWidgetItem</a></span> <span class="operator">*</span>item)
 {
     Q_ASSERT(xml<span class="operator">.</span>isStartElement() <span class="operator">&amp;</span><span class="operator">&amp;</span> xml<span class="operator">.</span>name() <span class="operator">=</span><span class="operator">=</span> <span class="string">&quot;title&quot;</span>_L1);
     item<span class="operator">-</span><span class="operator">&gt;</span>setText(<span class="number">0</span><span class="operator">,</span> xml<span class="operator">.</span>readElementText());
 }
</pre>
<p>The <code translate="no">readTitle()</code> function reads a bookmark's title and records it as the title (first column text) of the item for which it was called.</p>
<pre class="cpp" translate="no">
 <span class="type">void</span> XbelReader<span class="operator">::</span>readSeparator(<span class="type"><a href="../qtwidgets/qtreewidgetitem.html" translate="no">QTreeWidgetItem</a></span> <span class="operator">*</span>item)
 {
     Q_ASSERT(xml<span class="operator">.</span>isStartElement() <span class="operator">&amp;</span><span class="operator">&amp;</span> xml<span class="operator">.</span>name() <span class="operator">=</span><span class="operator">=</span> <span class="string">&quot;separator&quot;</span>_L1);
     constexpr char16_t midDot <span class="operator">=</span> u<span class="char">'\xB7'</span>;
     <span class="keyword">static</span> <span class="keyword">const</span> <span class="type"><a href="qstring.html" translate="no">QString</a></span> dots(<span class="number">30</span><span class="operator">,</span> midDot);

     <span class="type"><a href="../qtwidgets/qtreewidgetitem.html" translate="no">QTreeWidgetItem</a></span> <span class="operator">*</span>separator <span class="operator">=</span> createChildItem(item);
     separator<span class="operator">-</span><span class="operator">&gt;</span>setFlags(item <span class="operator">?</span> item<span class="operator">-</span><span class="operator">&gt;</span>flags() <span class="operator">&amp;</span> <span class="operator">~</span><span class="type"><a href="qt.html" translate="no">Qt</a></span><span class="operator">::</span>ItemIsSelectable : <span class="type"><a href="qt.html" translate="no">Qt</a></span><span class="operator">::</span>ItemFlags{});
     separator<span class="operator">-</span><span class="operator">&gt;</span>setText(<span class="number">0</span><span class="operator">,</span> dots);
     xml<span class="operator">.</span>skipCurrentElement();
 }
</pre>
<p>The <code translate="no">readSeparator()</code> function creates a separator and sets its flags. The separator item's text is set to 30 centered dots. The rest of the element is then skipped using <a href="qxmlstreamreader.html#skipCurrentElement" translate="no">skipCurrentElement</a>().</p>
<pre class="cpp" translate="no">
 <span class="type">void</span> XbelReader<span class="operator">::</span>readSeparator(<span class="type"><a href="../qtwidgets/qtreewidgetitem.html" translate="no">QTreeWidgetItem</a></span> <span class="operator">*</span>item)
 {
     Q_ASSERT(xml<span class="operator">.</span>isStartElement() <span class="operator">&amp;</span><span class="operator">&amp;</span> xml<span class="operator">.</span>name() <span class="operator">=</span><span class="operator">=</span> <span class="string">&quot;separator&quot;</span>_L1);
     constexpr char16_t midDot <span class="operator">=</span> u<span class="char">'\xB7'</span>;
     <span class="keyword">static</span> <span class="keyword">const</span> <span class="type"><a href="qstring.html" translate="no">QString</a></span> dots(<span class="number">30</span><span class="operator">,</span> midDot);

     <span class="type"><a href="../qtwidgets/qtreewidgetitem.html" translate="no">QTreeWidgetItem</a></span> <span class="operator">*</span>separator <span class="operator">=</span> createChildItem(item);
     separator<span class="operator">-</span><span class="operator">&gt;</span>setFlags(item <span class="operator">?</span> item<span class="operator">-</span><span class="operator">&gt;</span>flags() <span class="operator">&amp;</span> <span class="operator">~</span><span class="type"><a href="qt.html" translate="no">Qt</a></span><span class="operator">::</span>ItemIsSelectable : <span class="type"><a href="qt.html" translate="no">Qt</a></span><span class="operator">::</span>ItemFlags{});
     separator<span class="operator">-</span><span class="operator">&gt;</span>setText(<span class="number">0</span><span class="operator">,</span> dots);
     xml<span class="operator">.</span>skipCurrentElement();
 }
</pre>
<p>The <code translate="no">readFolder()</code> function creates an item and iterates the content of the folder element, adding children to this item to represent the contents of the folder element. The loop over folder content is similar in form to the one in <code translate="no">readXBEL()</code>, save that it now accepts a title element to set the title of the folder.</p>
<pre class="cpp" translate="no">
 <span class="type">void</span> XbelReader<span class="operator">::</span>readFolder(<span class="type"><a href="../qtwidgets/qtreewidgetitem.html" translate="no">QTreeWidgetItem</a></span> <span class="operator">*</span>item)
 {
     Q_ASSERT(xml<span class="operator">.</span>isStartElement() <span class="operator">&amp;</span><span class="operator">&amp;</span> xml<span class="operator">.</span>name() <span class="operator">=</span><span class="operator">=</span> <span class="string">&quot;folder&quot;</span>_L1);

     <span class="type"><a href="../qtwidgets/qtreewidgetitem.html" translate="no">QTreeWidgetItem</a></span> <span class="operator">*</span>folder <span class="operator">=</span> createChildItem(item);
     <span class="type">bool</span> folded <span class="operator">=</span> xml<span class="operator">.</span>attributes()<span class="operator">.</span>value(<span class="string">&quot;folded&quot;</span>_L1) <span class="operator">!</span><span class="operator">=</span> <span class="string">&quot;no&quot;</span>_L1;
     folder<span class="operator">-</span><span class="operator">&gt;</span>setExpanded(<span class="operator">!</span>folded);

     <span class="keyword">while</span> (xml<span class="operator">.</span>readNextStartElement()) {
         <span class="keyword">if</span> (xml<span class="operator">.</span>name() <span class="operator">=</span><span class="operator">=</span> <span class="string">&quot;title&quot;</span>_L1)
             readTitle(folder);
         <span class="keyword">else</span> <span class="keyword">if</span> (xml<span class="operator">.</span>name() <span class="operator">=</span><span class="operator">=</span> <span class="string">&quot;folder&quot;</span>_L1)
             readFolder(folder);
         <span class="keyword">else</span> <span class="keyword">if</span> (xml<span class="operator">.</span>name() <span class="operator">=</span><span class="operator">=</span> <span class="string">&quot;bookmark&quot;</span>_L1)
             readBookmark(folder);
         <span class="keyword">else</span> <span class="keyword">if</span> (xml<span class="operator">.</span>name() <span class="operator">=</span><span class="operator">=</span> <span class="string">&quot;separator&quot;</span>_L1)
             readSeparator(folder);
         <span class="keyword">else</span>
             xml<span class="operator">.</span>skipCurrentElement();
     }
 }
</pre>
<p>The <code translate="no">createChildItem()</code> helper function creates a new tree widget item that's either a child of the given item or, if no parent item is given, a direct child of the tree widget. It sets the new item's <code translate="no">UserRole</code> to the tag name of the current XML element, matching how XbelWriter::writeFile() uses that <code translate="no">UserRole</code>.</p>
<pre class="cpp" translate="no">
 <span class="type"><a href="../qtwidgets/qtreewidgetitem.html" translate="no">QTreeWidgetItem</a></span> <span class="operator">*</span>XbelReader<span class="operator">::</span>createChildItem(<span class="type"><a href="../qtwidgets/qtreewidgetitem.html" translate="no">QTreeWidgetItem</a></span> <span class="operator">*</span>item)
 {
     <span class="type"><a href="../qtwidgets/qtreewidgetitem.html" translate="no">QTreeWidgetItem</a></span> <span class="operator">*</span>childItem <span class="operator">=</span> item <span class="operator">?</span> <span class="keyword">new</span> <span class="type"><a href="../qtwidgets/qtreewidgetitem.html" translate="no">QTreeWidgetItem</a></span>(item) : <span class="keyword">new</span> <span class="type"><a href="../qtwidgets/qtreewidgetitem.html" translate="no">QTreeWidgetItem</a></span>(treeWidget);
     childItem<span class="operator">-</span><span class="operator">&gt;</span>setData(<span class="number">0</span><span class="operator">,</span> <span class="type"><a href="qt.html" translate="no">Qt</a></span><span class="operator">::</span>UserRole<span class="operator">,</span> xml<span class="operator">.</span>name()<span class="operator">.</span>toString());
     <span class="keyword">return</span> childItem;
 }
</pre>
<h4 id="mainwindow-class-definition">MainWindow Class Definition</h4>
<p>The <code translate="no">MainWindow</code> class is a subclass of <a href="../qtwidgets/qmainwindow.html" translate="no">QMainWindow</a>, with a <code translate="no">File</code> menu and a <code translate="no">Help</code> menu.</p>
<pre class="cpp" translate="no">
 <span class="keyword">class</span> MainWindow : <span class="keyword">public</span> <span class="type"><a href="../qtwidgets/qmainwindow.html" translate="no">QMainWindow</a></span>
 {
     Q_OBJECT

 <span class="keyword">public</span>:
     MainWindow();

 <span class="keyword">public</span> <span class="keyword">slots</span>:
     <span class="type">void</span> open();
     <span class="type">void</span> saveAs();
     <span class="type">void</span> about();
 <span class="preprocessor">#if QT_CONFIG(clipboard) &amp;&amp; QT_CONFIG(contextmenu)</span>
     <span class="type">void</span> onCustomContextMenuRequested(<span class="keyword">const</span> <span class="type"><a href="qpoint.html" translate="no">QPoint</a></span> <span class="operator">&amp;</span>pos);
 <span class="preprocessor">#endif</span>
 <span class="keyword">private</span>:
     <span class="type">void</span> createMenus();

     <span class="type"><a href="../qtwidgets/qtreewidget.html" translate="no">QTreeWidget</a></span> <span class="operator">*</span><span class="keyword">const</span> treeWidget;
 };
</pre>
<h4 id="mainwindow-class-implementation">MainWindow Class Implementation</h4>
<p>The <code translate="no">MainWindow</code> constructor sets up its <a href="../qtwidgets/qtreewidget.html" translate="no">QTreeWidget</a> object, <code translate="no">treeWidget</code>, as its own central widget, with column headings for the title and location of each book-mark. It configures a custom menu that enables the user to perform actions on individual bookmarks within the tree widget.</p>
<p>It invokes <code translate="no">createMenus()</code> to set up its own menus and their corresponding actions. It sets its title, announces itself as ready and sets its size to a reasonable proportion of the available screen space.</p>
<pre class="cpp" translate="no">
 MainWindow<span class="operator">::</span>MainWindow() : treeWidget(<span class="keyword">new</span> <span class="type"><a href="../qtwidgets/qtreewidget.html" translate="no">QTreeWidget</a></span>)
 {
     treeWidget<span class="operator">-</span><span class="operator">&gt;</span>header()<span class="operator">-</span><span class="operator">&gt;</span>setSectionResizeMode(<span class="type"><a href="../qtwidgets/qheaderview.html" translate="no">QHeaderView</a></span><span class="operator">::</span>Stretch);
     treeWidget<span class="operator">-</span><span class="operator">&gt;</span>setHeaderLabels(<span class="type"><a href="qstringlist.html" translate="no">QStringList</a></span>{tr(<span class="string">&quot;Title&quot;</span>)<span class="operator">,</span> tr(<span class="string">&quot;Location&quot;</span>)});
 <span class="preprocessor">#if QT_CONFIG(clipboard) &amp;&amp; QT_CONFIG(contextmenu)</span>
     treeWidget<span class="operator">-</span><span class="operator">&gt;</span>setContextMenuPolicy(<span class="type"><a href="qt.html" translate="no">Qt</a></span><span class="operator">::</span>CustomContextMenu);
     connect(treeWidget<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="../qtwidgets/qwidget.html" translate="no">QWidget</a></span><span class="operator">::</span>customContextMenuRequested<span class="operator">,</span>
             <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>MainWindow<span class="operator">::</span>onCustomContextMenuRequested);
 <span class="preprocessor">#endif</span>
     setCentralWidget(treeWidget);

     createMenus();

     statusBar()<span class="operator">-</span><span class="operator">&gt;</span>showMessage(tr(<span class="string">&quot;Ready&quot;</span>));

     setWindowTitle(tr(<span class="string">&quot;QXmlStream Bookmarks&quot;</span>));
     <span class="keyword">const</span> <span class="type"><a href="qsize.html" translate="no">QSize</a></span> availableSize <span class="operator">=</span> screen()<span class="operator">-</span><span class="operator">&gt;</span>availableGeometry()<span class="operator">.</span>size();
     resize(availableSize<span class="operator">.</span>width() <span class="operator">/</span> <span class="number">2</span><span class="operator">,</span> availableSize<span class="operator">.</span>height() <span class="operator">/</span> <span class="number">3</span>);
 }
</pre>
<p>A custom menu, triggered when the user right-clicks on a bookmark, provides for copying the bookmark as a link or directing a desktop browser to open the URL it references. This menu is implemented (when relevant features are enabled) by <code translate="no">onCustomContextMenuRequested()</code>.</p>
<pre class="cpp" translate="no">
 <span class="preprocessor">#if QT_CONFIG(clipboard) &amp;&amp; QT_CONFIG(contextmenu)</span>
 <span class="type">void</span> MainWindow<span class="operator">::</span>onCustomContextMenuRequested(<span class="keyword">const</span> <span class="type"><a href="qpoint.html" translate="no">QPoint</a></span> <span class="operator">&amp;</span>pos)
 {
     <span class="keyword">const</span> <span class="type"><a href="../qtwidgets/qtreewidgetitem.html" translate="no">QTreeWidgetItem</a></span> <span class="operator">*</span>item <span class="operator">=</span> treeWidget<span class="operator">-</span><span class="operator">&gt;</span>itemAt(pos);
     <span class="keyword">if</span> (<span class="operator">!</span>item)
         <span class="keyword">return</span>;
     <span class="keyword">const</span> <span class="type"><a href="qstring.html" translate="no">QString</a></span> url <span class="operator">=</span> item<span class="operator">-</span><span class="operator">&gt;</span>text(<span class="number">1</span>);
     <span class="type"><a href="../qtwidgets/qmenu.html" translate="no">QMenu</a></span> contextMenu;
     <span class="type"><a href="../qtgui/qaction.html" translate="no">QAction</a></span> <span class="operator">*</span>copyAction <span class="operator">=</span> contextMenu<span class="operator">.</span>addAction(tr(<span class="string">&quot;Copy Link to Clipboard&quot;</span>));
     <span class="type"><a href="../qtgui/qaction.html" translate="no">QAction</a></span> <span class="operator">*</span>openAction <span class="operator">=</span> contextMenu<span class="operator">.</span>addAction(tr(<span class="string">&quot;Open&quot;</span>));
     <span class="type"><a href="../qtgui/qaction.html" translate="no">QAction</a></span> <span class="operator">*</span>action <span class="operator">=</span> contextMenu<span class="operator">.</span>exec(treeWidget<span class="operator">-</span><span class="operator">&gt;</span>viewport()<span class="operator">-</span><span class="operator">&gt;</span>mapToGlobal(pos));
     <span class="keyword">if</span> (action <span class="operator">=</span><span class="operator">=</span> copyAction)
         <span class="type"><a href="../qtgui/qguiapplication.html" translate="no">QGuiApplication</a></span><span class="operator">::</span>clipboard()<span class="operator">-</span><span class="operator">&gt;</span>setText(url);
     <span class="keyword">else</span> <span class="keyword">if</span> (action <span class="operator">=</span><span class="operator">=</span> openAction)
         <span class="type"><a href="../qtgui/qdesktopservices.html" translate="no">QDesktopServices</a></span><span class="operator">::</span>openUrl(<span class="type"><a href="qurl.html" translate="no">QUrl</a></span>(url));
 }
 <span class="preprocessor">#endif // QT_CONFIG(clipboard) &amp;&amp; QT_CONFIG(contextmenu)</span>
</pre>
<p>The <code translate="no">createMenus()</code> function creates the <code translate="no">fileMenu</code> and <code translate="no">helpMenu</code> and adds <a href="../qtgui/qaction.html" translate="no">QAction</a> objects to them, bound variously to the <code translate="no">open()</code>, <code translate="no">saveAs()</code> and <code translate="no">about()</code> functions, along with <a href="../qtwidgets/qwidget.html#close" translate="no">QWidget::close</a>() and <a href="../qtwidgets/qapplication.html#aboutQt" translate="no">QApplication::aboutQt</a>(). The connections are as shown below:</p>
<pre class="cpp" translate="no">
 <span class="type">void</span> MainWindow<span class="operator">::</span>createMenus()
 {
     <span class="type"><a href="../qtwidgets/qmenu.html" translate="no">QMenu</a></span> <span class="operator">*</span>fileMenu <span class="operator">=</span> menuBar()<span class="operator">-</span><span class="operator">&gt;</span>addMenu(tr(<span class="string">&quot;&amp;File&quot;</span>));
     <span class="type"><a href="../qtgui/qaction.html" translate="no">QAction</a></span> <span class="operator">*</span>openAct <span class="operator">=</span> fileMenu<span class="operator">-</span><span class="operator">&gt;</span>addAction(tr(<span class="string">&quot;&amp;Open...&quot;</span>)<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>MainWindow<span class="operator">::</span>open);
     openAct<span class="operator">-</span><span class="operator">&gt;</span>setShortcuts(<span class="type"><a href="../qtgui/qkeysequence.html" translate="no">QKeySequence</a></span><span class="operator">::</span>Open);

     <span class="type"><a href="../qtgui/qaction.html" translate="no">QAction</a></span> <span class="operator">*</span>saveAsAct <span class="operator">=</span> fileMenu<span class="operator">-</span><span class="operator">&gt;</span>addAction(tr(<span class="string">&quot;&amp;Save As...&quot;</span>)<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>MainWindow<span class="operator">::</span>saveAs);
     saveAsAct<span class="operator">-</span><span class="operator">&gt;</span>setShortcuts(<span class="type"><a href="../qtgui/qkeysequence.html" translate="no">QKeySequence</a></span><span class="operator">::</span>SaveAs);

     <span class="type"><a href="../qtgui/qaction.html" translate="no">QAction</a></span> <span class="operator">*</span>exitAct <span class="operator">=</span> fileMenu<span class="operator">-</span><span class="operator">&gt;</span>addAction(tr(<span class="string">&quot;E&amp;xit&quot;</span>)<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="../qtwidgets/qwidget.html" translate="no">QWidget</a></span><span class="operator">::</span>close);
     exitAct<span class="operator">-</span><span class="operator">&gt;</span>setShortcuts(<span class="type"><a href="../qtgui/qkeysequence.html" translate="no">QKeySequence</a></span><span class="operator">::</span>Quit);

     menuBar()<span class="operator">-</span><span class="operator">&gt;</span>addSeparator();

     <span class="type"><a href="../qtwidgets/qmenu.html" translate="no">QMenu</a></span> <span class="operator">*</span>helpMenu <span class="operator">=</span> menuBar()<span class="operator">-</span><span class="operator">&gt;</span>addMenu(tr(<span class="string">&quot;&amp;Help&quot;</span>));
     helpMenu<span class="operator">-</span><span class="operator">&gt;</span>addAction(tr(<span class="string">&quot;&amp;About&quot;</span>)<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span>MainWindow<span class="operator">::</span>about);
     helpMenu<span class="operator">-</span><span class="operator">&gt;</span>addAction(tr(<span class="string">&quot;About &amp;Qt&quot;</span>)<span class="operator">,</span> <a href="../qtwidgets/qapplication.html#qApp" translate="no">qApp</a><span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="../qtwidgets/qapplication.html" translate="no">QApplication</a></span><span class="operator">::</span>aboutQt);
 }
</pre>
<p>This creates the menu shown in the screenshots below:</p>
<div class="table"><table class="generic">
 <tr valign="top" class="odd"><td ><img src="images/filemenu.png" alt="" /></td><td ><img src="images/helpmenu.png" alt="" /></td></tr>
</table></div>
<p>The <code translate="no">open()</code> function, when triggered, offers the user a file dialog to use to select a bookmarks file. If a file is selected, it is parsed using an <code translate="no">XBelReader</code> to populate the <code translate="no">treeWidget</code> with bookmarks. If problems arise with opening or parsing the file, a suitable warning message is displayed to the user, including file name and error message. Otherwise, the bookmarks read from the file are displayed and the window's status bar briefly reports that the file has been loaded.</p>
<pre class="cpp" translate="no">
 <span class="type">void</span> MainWindow<span class="operator">::</span>open()
 {
     <span class="type"><a href="../qtwidgets/qfiledialog.html" translate="no">QFileDialog</a></span> fileDialog(<span class="keyword">this</span><span class="operator">,</span> tr(<span class="string">&quot;Open Bookmark File&quot;</span>)<span class="operator">,</span> <span class="type"><a href="qdir.html" translate="no">QDir</a></span><span class="operator">::</span>currentPath());
     fileDialog<span class="operator">.</span>setMimeTypeFilters({<span class="string">&quot;application/x-xbel&quot;</span>_L1});
     <span class="keyword">if</span> (fileDialog<span class="operator">.</span>exec() <span class="operator">!</span><span class="operator">=</span> <span class="type"><a href="../qtwidgets/qdialog.html" translate="no">QDialog</a></span><span class="operator">::</span>Accepted)
         <span class="keyword">return</span>;

     treeWidget<span class="operator">-</span><span class="operator">&gt;</span>clear();

     <span class="keyword">const</span> <span class="type"><a href="qstring.html" translate="no">QString</a></span> fileName <span class="operator">=</span> fileDialog<span class="operator">.</span>selectedFiles()<span class="operator">.</span>constFirst();
     <span class="type"><a href="qfile.html" translate="no">QFile</a></span> file(fileName);
     <span class="keyword">if</span> (<span class="operator">!</span>file<span class="operator">.</span>open(<span class="type"><a href="qfile.html" translate="no">QFile</a></span><span class="operator">::</span>ReadOnly <span class="operator">|</span> <span class="type"><a href="qfile.html" translate="no">QFile</a></span><span class="operator">::</span>Text)) {
         <span class="type"><a href="../qtwidgets/qmessagebox.html" translate="no">QMessageBox</a></span><span class="operator">::</span>warning(<span class="keyword">this</span><span class="operator">,</span> tr(<span class="string">&quot;QXmlStream Bookmarks&quot;</span>)<span class="operator">,</span>
                              tr(<span class="string">&quot;Cannot read file %1:\n%2.&quot;</span>)
                                      <span class="operator">.</span>arg(<span class="type"><a href="qdir.html" translate="no">QDir</a></span><span class="operator">::</span>toNativeSeparators(fileName)<span class="operator">,</span> file<span class="operator">.</span>errorString()));
         <span class="keyword">return</span>;
     }

     XbelReader reader(treeWidget);
     <span class="keyword">if</span> (<span class="operator">!</span>reader<span class="operator">.</span>read(<span class="operator">&amp;</span>file)) {
         <span class="type"><a href="../qtwidgets/qmessagebox.html" translate="no">QMessageBox</a></span><span class="operator">::</span>warning(
                 <span class="keyword">this</span><span class="operator">,</span> tr(<span class="string">&quot;QXmlStream Bookmarks&quot;</span>)<span class="operator">,</span>
                 tr(<span class="string">&quot;Parse error in file %1:\n\n%2&quot;</span>)
                         <span class="operator">.</span>arg(<span class="type"><a href="qdir.html" translate="no">QDir</a></span><span class="operator">::</span>toNativeSeparators(fileName)<span class="operator">,</span> reader<span class="operator">.</span>errorString()));
     } <span class="keyword">else</span> {
         statusBar()<span class="operator">-</span><span class="operator">&gt;</span>showMessage(tr(<span class="string">&quot;File loaded&quot;</span>)<span class="operator">,</span> <span class="number">2000</span>);
     }
 }
</pre>
<p>The <code translate="no">saveAs()</code> function displays a <a href="../qtwidgets/qfiledialog.html" translate="no">QFileDialog</a>, prompting the user for a <code translate="no">fileName</code>, to which to save a copy of the bookmarks data. Similar to the <code translate="no">open()</code> function, this function also displays a warning message if the file cannot be written to.</p>
<pre class="cpp" translate="no">
 <span class="type">void</span> MainWindow<span class="operator">::</span>saveAs()
 {
     <span class="type"><a href="../qtwidgets/qfiledialog.html" translate="no">QFileDialog</a></span> fileDialog(<span class="keyword">this</span><span class="operator">,</span> tr(<span class="string">&quot;Save Bookmark File&quot;</span>)<span class="operator">,</span> <span class="type"><a href="qdir.html" translate="no">QDir</a></span><span class="operator">::</span>currentPath());
     fileDialog<span class="operator">.</span>setAcceptMode(<span class="type"><a href="../qtwidgets/qfiledialog.html" translate="no">QFileDialog</a></span><span class="operator">::</span>AcceptSave);
     fileDialog<span class="operator">.</span>setDefaultSuffix(<span class="string">&quot;xbel&quot;</span>_L1);
     fileDialog<span class="operator">.</span>setMimeTypeFilters({<span class="string">&quot;application/x-xbel&quot;</span>_L1});
     <span class="keyword">if</span> (fileDialog<span class="operator">.</span>exec() <span class="operator">!</span><span class="operator">=</span> <span class="type"><a href="../qtwidgets/qdialog.html" translate="no">QDialog</a></span><span class="operator">::</span>Accepted)
         <span class="keyword">return</span>;

     <span class="keyword">const</span> <span class="type"><a href="qstring.html" translate="no">QString</a></span> fileName <span class="operator">=</span> fileDialog<span class="operator">.</span>selectedFiles()<span class="operator">.</span>constFirst();
     <span class="type"><a href="qfile.html" translate="no">QFile</a></span> file(fileName);
     <span class="keyword">if</span> (<span class="operator">!</span>file<span class="operator">.</span>open(<span class="type"><a href="qfile.html" translate="no">QFile</a></span><span class="operator">::</span>WriteOnly <span class="operator">|</span> <span class="type"><a href="qfile.html" translate="no">QFile</a></span><span class="operator">::</span>Text)) {
         <span class="type"><a href="../qtwidgets/qmessagebox.html" translate="no">QMessageBox</a></span><span class="operator">::</span>warning(<span class="keyword">this</span><span class="operator">,</span> tr(<span class="string">&quot;QXmlStream Bookmarks&quot;</span>)<span class="operator">,</span>
                              tr(<span class="string">&quot;Cannot write file %1:\n%2.&quot;</span>)
                                      <span class="operator">.</span>arg(<span class="type"><a href="qdir.html" translate="no">QDir</a></span><span class="operator">::</span>toNativeSeparators(fileName)<span class="operator">,</span> file<span class="operator">.</span>errorString()));
         <span class="keyword">return</span>;
     }

     XbelWriter writer(treeWidget);
     <span class="keyword">if</span> (writer<span class="operator">.</span>writeFile(<span class="operator">&amp;</span>file))
         statusBar()<span class="operator">-</span><span class="operator">&gt;</span>showMessage(tr(<span class="string">&quot;File saved&quot;</span>)<span class="operator">,</span> <span class="number">2000</span>);
 }
</pre>
<p>The <code translate="no">about()</code> function displays a <a href="../qtwidgets/qmessagebox.html" translate="no">QMessageBox</a> with a brief description of the example, or general information about Qt and the version of it in use.</p>
<pre class="cpp" translate="no">
 <span class="type">void</span> MainWindow<span class="operator">::</span>about()
 {
     <span class="type"><a href="../qtwidgets/qmessagebox.html" translate="no">QMessageBox</a></span><span class="operator">::</span>about(<span class="keyword">this</span><span class="operator">,</span> tr(<span class="string">&quot;About QXmlStream Bookmarks&quot;</span>)<span class="operator">,</span>
                        tr(<span class="string">&quot;The &lt;b&gt;QXmlStream Bookmarks&lt;/b&gt; example demonstrates how to use Qt's &quot;</span>
                           <span class="string">&quot;QXmlStream classes to read and write XML documents.&quot;</span>));
 }
</pre>
<h4 id="main-function"><code translate="no">main()</code> Function</h4>
<p>The <code translate="no">main()</code> function instantiates <code translate="no">MainWindow</code> and invokes the <code translate="no">show()</code> function to display it, then its <code translate="no">open()</code>, as this is most likely what the user shall want to do first.</p>
<pre class="cpp" translate="no">
 <span class="type">int</span> main(<span class="type">int</span> argc<span class="operator">,</span> <span class="type">char</span> <span class="operator">*</span>argv<span class="operator">[</span><span class="operator">]</span>)
 {
     <span class="type"><a href="../qtwidgets/qapplication.html" translate="no">QApplication</a></span> app(argc<span class="operator">,</span> argv);
     MainWindow mainWin;
     mainWin<span class="operator">.</span>show();
     mainWin<span class="operator">.</span>open();
     <span class="keyword">return</span> app<span class="operator">.</span>exec();
 }
</pre>
<p>See the <a href="https://pyxml.sourceforge.net/topics/xbel/" translate="no">XML Bookmark Exchange Language Resource Page</a> for more information about XBEL files.</p>
<p><a href="https://code.qt.io/cgit/qt/qtbase.git/tree/examples/corelib/serialization/streambookmarks?h=6.7" translate="no">Example project @ code.qt.io</a></p>
</div>
<!-- @@@serialization/streambookmarks -->
        </div>
       </div>
   </div>
   </div>
</div>
<div class="footer">
   <p>
   <acronym title="Copyright">&copy;</acronym> 2024 <span translate="no">The Qt Company Ltd.</span>
   Documentation contributions included herein are the copyrights of
   their respective owners.<br/>    The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the <span translate="no">Free Software Foundation</span>.<br/>    <span translate="no">Qt</span> and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of <span translate="no">The Qt Company Ltd.</span> in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>
</div>
</body>
</html>
